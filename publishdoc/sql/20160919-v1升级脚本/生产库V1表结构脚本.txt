-- USE Test0927
GO

/****** Object:  Table [dbo].[Statistics_Member]    Script Date: 09/27/2016 10:30:11 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE TABLE [dbo].[Statistics_Member](
	[StatisticsId] [int] IDENTITY(1,1) NOT NULL,
	[StatisticsDate] [date] NOT NULL,
	[RegistCount] [int] NOT NULL,
	[RealNameCount] [int] NOT NULL,
	[InvestCount] [int] NOT NULL,
	[IsFinish] [int] NOT NULL,
	[UpdatedOn] [datetime] NOT NULL,
	[CreatedOn] [datetime] NOT NULL,
 CONSTRAINT [PK_Statistics_Member] PRIMARY KEY CLUSTERED 
(
	[StatisticsId] ASC
)WITH (PAD_INDEX  = OFF, STATISTICS_NORECOMPUTE  = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS  = ON, ALLOW_PAGE_LOCKS  = ON) ON [PRIMARY]
) ON [PRIMARY]
GO
CREATE NONCLUSTERED INDEX [IX_Statistics_Member_Date] ON [dbo].[Statistics_Member] 
(
	[StatisticsDate] DESC
)WITH (PAD_INDEX  = OFF, STATISTICS_NORECOMPUTE  = OFF, SORT_IN_TEMPDB = OFF, IGNORE_DUP_KEY = OFF, DROP_EXISTING = OFF, ONLINE = OFF, ALLOW_ROW_LOCKS  = ON, ALLOW_PAGE_LOCKS  = ON) ON [PRIMARY]
GO
/****** Object:  StoredProcedure [dbo].[prStatisticsMember]    Script Date: 09/27/2016 10:30:11 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE proc [dbo].[prStatisticsMember]
as
begin
	--step1 初始化用户注册数据
	 Insert into Statistics_Member(StatisticsDate,RegistCount,RealNameCount)  
	 SELECT * FROM 
	 (  
	 SELECT  
	CONVERT(varchar(10),registration_time,120) as registration_time,
	COUNT(DISTINCT(registerid)) as regcount  
	,sum(case when isrealname=1 then 1 else 0 end) AS realNameCount 
	--,dbo.getInvestCountByDate(CONVERT(varchar(10),registration_time,120))  AS investCount
	FROM  hx_member_table  a 
	WHERE registerid>0  group by  convert(varchar(10),registration_time,120) 
	) AS bx WHERE bx.registration_time NOT IN (
	SELECT StatisticsDate FROM Statistics_Member
	)

	PRINT('初始化用户注册数据成功')

	----step2 初始化首次投资数据 只运行一次即可
	--　　DECLARE @investDate varchar(10)   
	--    DECLARE My_Cursor CURSOR --定义游标  
	--    FOR (SELECT StatisticsDate FROM dbo.Statistics_Member WHERE IsFinish=0 AND StatisticsDate<CONVERT(varchar(10),GETDATE(),120) ) --查出<当天 并且没有统计完成的 集合放到游标中  
	--    OPEN My_Cursor; --打开游标  
	--    FETCH NEXT FROM My_Cursor INTO @investDate; --读取第一行数据
	--    WHILE @@FETCH_STATUS = 0  
	--        BEGIN  
	--            PRINT @investDate; --打印数据
	--            UPDATE dbo.Statistics_Member SET InvestCount =dbo.getInvestCountByDate(@investDate),IsFinish=1 WHERE StatisticsDate = @investDate; --更新数据  
	--            FETCH NEXT FROM My_Cursor INTO @investDate; --读取下一行数据
	--        END  
	--    CLOSE My_Cursor; --关闭游标  
	--    DEALLOCATE My_Cursor; --释放游标  
	--    GO  
	 
	--PRINT('初始化首次投资数据成功')
	--更新当天数据
	 DECLARE @registration_time varchar(10)
	 DECLARE @regcount int
	 DECLARE @realNameCount INT
	 DECLARE @investCount int 
	 SELECT  @registration_time=
	CONVERT(varchar(10),GETDATE(),120),
	@regcount=COUNT(DISTINCT(registerid))    
	,@realNameCount=SUM(case when isrealname=1 then 1 else 0 end) 
	,@investCount=dbo.getInvestCountByDate(CONVERT(varchar(10),GETDATE(),120))
	FROM  hx_member_table  a 
	WHERE registerid>0  and  convert(varchar(10),registration_time,120) =CONVERT(varchar(10),GETDATE(),120)

	UPDATE Statistics_Member SET RegistCount=@regcount,RealNameCount=@realNameCount,InvestCount=@investCount,UpDatedOn=GETDATE() WHERE StatisticsDate=@registration_time 
	AND (RegistCount<>@regcount OR RealNameCount<>@realNameCount OR InvestCount<>@investCount)

	PRINT('更新当天数据成功')

	UPDATE Statistics_Member SET IsFinish=1 ,UpDatedOn=GETDATE() WHERE StatisticsDate=@registration_time 
	AND (IsFinish=0)


	PRINT('更新当天完成状态')
end
GO
/****** Object:  Table [dbo].[hx_member_table]    Script Date: 09/27/2016 10:30:12 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
SET ANSI_PADDING ON
GO
CREATE TABLE [dbo].[hx_member_table](
	[registerid] [int] IDENTITY(1,1) NOT NULL,
	[username] [nvarchar](50) NOT NULL,
	[password] [nvarchar](50) NULL,
	[mobile] [varchar](20) NULL,
	[email] [nvarchar](50) NULL,
	[realname] [nvarchar](30) NULL,
	[UsrCustId] [varchar](50) NULL,
	[iD_number] [varchar](30) NULL,
	[transactionpassword] [nvarchar](50) NULL,
	[istransactionpassword] [int] NULL,
	[ismobile] [int] NULL,
	[isrealname] [int] NULL,
	[isbankcard] [int] NULL,
	[isemail] [int] NULL,
	[userstate] [int] NULL,
	[account_total_assets] [numeric](38, 2) NULL,
	[available_balance] [numeric](38, 2) NULL,
	[collect_total_amount] [numeric](38, 2) NULL,
	[frozen_sum] [numeric](38, 2) NULL,
	[open_tonto_account] [int] NULL,
	[tonto_account_user] [varchar](30) NULL,
	[usertypes] [int] NULL,
	[registration_time] [datetime] NULL,
	[lastlogintime] [datetime] NULL,
	[lastloginIP] [varchar](50) NULL,
	[customserviceid] [int] NULL,
	[homephone] [varchar](30) NULL,
	[contactaddress] [varchar](30) NULL,
	[zipcode] [varchar](30) NULL,
	[qq] [varchar](30) NULL,
	[msn] [varchar](30) NULL,
	[invitedcode] [varchar](10) NULL,
	[UsrId] [varchar](50) NULL,
	[useridentity] [int] NULL,
	[CopName] [varchar](250) NULL,
	[Channelsource] [int] NULL,
	[Tid] [varchar](250) NULL,
	[WXAppId] [varchar](250) NULL,
	[ExtendCode] [nvarchar](50) NULL,
 CONSTRAINT [PK_HX_MEMBER_TABLE] PRIMARY KEY CLUSTERED 
(
	[registerid] ASC
)WITH (PAD_INDEX  = OFF, STATISTICS_NORECOMPUTE  = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS  = ON, ALLOW_PAGE_LOCKS  = ON) ON [PRIMARY]
) ON [PRIMARY]
GO
SET ANSI_PADDING OFF
GO
CREATE NONCLUSTERED INDEX [IX_hx_member_table] ON [dbo].[hx_member_table] 
(
	[UsrCustId] ASC
)WITH (PAD_INDEX  = OFF, STATISTICS_NORECOMPUTE  = OFF, SORT_IN_TEMPDB = OFF, IGNORE_DUP_KEY = OFF, DROP_EXISTING = OFF, ONLINE = OFF, ALLOW_ROW_LOCKS  = ON, ALLOW_PAGE_LOCKS  = ON) ON [PRIMARY]
GO
CREATE NONCLUSTERED INDEX [IX_hx_member_table_1] ON [dbo].[hx_member_table] 
(
	[invitedcode] ASC
)WITH (PAD_INDEX  = OFF, STATISTICS_NORECOMPUTE  = OFF, SORT_IN_TEMPDB = OFF, IGNORE_DUP_KEY = OFF, DROP_EXISTING = OFF, ONLINE = OFF, ALLOW_ROW_LOCKS  = ON, ALLOW_PAGE_LOCKS  = ON) ON [PRIMARY]
GO
EXEC sys.sp_addextendedproperty @name=N'MS_Description', @value=N'0 正常  1禁止登录' , @level0type=N'SCHEMA',@level0name=N'dbo', @level1type=N'TABLE',@level1name=N'hx_member_table', @level2type=N'COLUMN',@level2name=N'userstate'
GO
EXEC sys.sp_addextendedproperty @name=N'MS_Description', @value=N'0 默认未开通   1 已开通' , @level0type=N'SCHEMA',@level0name=N'dbo', @level1type=N'TABLE',@level1name=N'hx_member_table', @level2type=N'COLUMN',@level2name=N'open_tonto_account'
GO
/****** Object:  StoredProcedure [dbo].[upPhone]    Script Date: 09/27/2016 10:30:12 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
create procedure [dbo].[upPhone]
@phone nvarchar(30),
@oldph nvarchar(30)
as
	if((select COUNT(*) from hx_member_table where mobile=@oldph)>1)
	begin
		select '手机号出现重复'
		select * from hx_member_table where mobile=@oldph
	end
	else
	begin
	 update hx_member_table set mobile=@phone where mobile=@oldph
	end
GO
/****** Object:  Table [dbo].[hx_td_frozen]    Script Date: 09/27/2016 10:30:12 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
SET ANSI_PADDING ON
GO
CREATE TABLE [dbo].[hx_td_frozen](
	[Frozenid] [int] IDENTITY(1,1) NOT NULL,
	[MBT_Registerid] [int] NULL,
	[FrozenidAmount] [decimal](38, 2) NULL,
	[FrozenidNo] [varchar](20) NULL,
	[FrozenState] [int] NULL,
	[FrozenDate] [datetime] NULL,
	[targetid] [int] NULL,
	[UsrCustId] [varchar](50) NULL,
	[FreezeTrxId] [varchar](50) NULL,
	[bid_records_id] [int] NULL,
 CONSTRAINT [PK_HX_TD_FROZEN] PRIMARY KEY CLUSTERED 
(
	[Frozenid] ASC
)WITH (PAD_INDEX  = OFF, STATISTICS_NORECOMPUTE  = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS  = ON, ALLOW_PAGE_LOCKS  = ON) ON [PRIMARY]
) ON [PRIMARY]
GO
SET ANSI_PADDING OFF
GO
CREATE NONCLUSTERED INDEX [IX_hx_td_frozen] ON [dbo].[hx_td_frozen] 
(
	[MBT_Registerid] ASC
)WITH (PAD_INDEX  = OFF, STATISTICS_NORECOMPUTE  = OFF, SORT_IN_TEMPDB = OFF, IGNORE_DUP_KEY = OFF, DROP_EXISTING = OFF, ONLINE = OFF, ALLOW_ROW_LOCKS  = ON, ALLOW_PAGE_LOCKS  = ON) ON [PRIMARY]
GO
CREATE NONCLUSTERED INDEX [IX_hx_td_frozen_1] ON [dbo].[hx_td_frozen] 
(
	[bid_records_id] ASC
)WITH (PAD_INDEX  = OFF, STATISTICS_NORECOMPUTE  = OFF, SORT_IN_TEMPDB = OFF, IGNORE_DUP_KEY = OFF, DROP_EXISTING = OFF, ONLINE = OFF, ALLOW_ROW_LOCKS  = ON, ALLOW_PAGE_LOCKS  = ON) ON [PRIMARY]
GO
EXEC sys.sp_addextendedproperty @name=N'MS_Description', @value=N'0 默认(冻结未成功)  1 冻结成功  2 交易成功' , @level0type=N'SCHEMA',@level0name=N'dbo', @level1type=N'TABLE',@level1name=N'hx_td_frozen', @level2type=N'COLUMN',@level2name=N'FrozenState'
GO
/****** Object:  Table [dbo].[hx_borrower_guarantor_picture]    Script Date: 09/27/2016 10:30:11 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
SET ANSI_PADDING ON
GO
CREATE TABLE [dbo].[hx_borrower_guarantor_picture](
	[borrower_guarantor_picture_id] [int] IDENTITY(1,1) NOT NULL,
	[borrower_registerid] [int] NULL,
	[targetid] [int] NULL,
	[type_picture] [int] NULL,
	[picture_path] [varchar](200) NULL,
	[picture_name] [varchar](200) NULL,
	[uploadtime] [datetime] NULL,
 CONSTRAINT [PK_HX_BORROWER_GUARANTOR_PICTU] PRIMARY KEY CLUSTERED 
(
	[borrower_guarantor_picture_id] ASC
)WITH (PAD_INDEX  = OFF, STATISTICS_NORECOMPUTE  = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS  = ON, ALLOW_PAGE_LOCKS  = ON) ON [PRIMARY]
) ON [PRIMARY]
GO
SET ANSI_PADDING OFF
GO
EXEC sys.sp_addextendedproperty @name=N'MS_Description', @value=N'借款方图片类型 1
   胆保方图片类型 2' , @level0type=N'SCHEMA',@level0name=N'dbo', @level1type=N'TABLE',@level1name=N'hx_borrower_guarantor_picture', @level2type=N'COLUMN',@level2name=N'type_picture'
GO
EXEC sys.sp_addextendedproperty @name=N'MS_Description', @value=N'借款方图片类型 1
   胆保方图片类型 2' , @level0type=N'SCHEMA',@level0name=N'dbo', @level1type=N'TABLE',@level1name=N'hx_borrower_guarantor_picture'
GO
/****** Object:  Table [dbo].[hx_borrowing_target]    Script Date: 09/27/2016 10:30:11 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
SET ANSI_PADDING ON
GO
CREATE TABLE [dbo].[hx_borrowing_target](
	[targetid] [int] IDENTITY(1,1) NOT NULL,
	[borrower_registerid] [int] NULL,
	[loan_number] [numeric](18, 0) NOT NULL,
	[borrowing_title] [varchar](200) NULL,
	[borrowing_thumbnail] [varchar](200) NULL,
	[project_type_id] [int] NOT NULL,
	[annual_interest_rate] [numeric](6, 2) NULL,
	[borrowing_balance] [numeric](38, 2) NULL,
	[life_of_loan] [int] NULL,
	[unit_day] [int] NULL,
	[release_date] [datetime] NULL,
	[value_date] [datetime] NULL,
	[month_payment_date] [int] NULL,
	[repayment_date] [datetime] NULL,
	[minimum] [numeric](38, 2) NULL,
	[maxmum] [numeric](38, 2) NULL,
	[companyid] [int] NULL,
	[guarantee_way_id] [int] NOT NULL,
	[payment_options] [int] NULL,
	[start_time] [datetime] NULL,
	[end_time] [datetime] NULL,
	[service_charge] [numeric](18, 2) NULL,
	[loan_management_fee] [numeric](18, 2) NULL,
	[investors_management_fee] [numeric](18, 2) NULL,
	[ordinary_overdue_management_fees] [numeric](18, 2) NULL,
	[seriously_overdue_management_fees] [numeric](18, 2) NULL,
	[ordinary_overdue_penalty] [numeric](18, 2) NULL,
	[seriously_overdue_penalty] [numeric](18, 2) NULL,
	[transfer_Expenses] [numeric](18, 2) NULL,
	[fundraising_amount] [numeric](38, 2) NULL,
	[tender_state] [int] NULL,
	[full_scale_loan] [int] NULL,
	[flow_return] [int] NULL,
	[recommend] [int] NULL,
	[sys_time] [datetime] NULL,
	[repaymentperiods] [int] NULL,
	[reviewremarks] [varchar](1000) NULL,
	[recheckremarks] [varchar](1000) NULL,
	[guarantee_fee] [numeric](38, 2) NULL,
	[consultingAMT] [numeric](38, 2) NULL,
	[guaranteeAMT] [numeric](38, 2) NULL,
	[B_Rates] [numeric](6, 2) NULL,
	[H_Repayment_Amt] [numeric](38, 2) NULL,
	[Repay_Time] [datetime] NULL,
	[G_contract_Path] [varchar](150) NULL,
	[IsUse] [int] NULL,
	[indexorder] [int] NULL,
 CONSTRAINT [PK_HX_BORROWING_TARGET] PRIMARY KEY CLUSTERED 
(
	[targetid] ASC
)WITH (PAD_INDEX  = OFF, STATISTICS_NORECOMPUTE  = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS  = ON, ALLOW_PAGE_LOCKS  = ON) ON [PRIMARY]
) ON [PRIMARY]
GO
SET ANSI_PADDING OFF
GO
CREATE NONCLUSTERED INDEX [IX_hx_borrowing_target] ON [dbo].[hx_borrowing_target] 
(
	[borrower_registerid] ASC
)WITH (PAD_INDEX  = OFF, STATISTICS_NORECOMPUTE  = OFF, SORT_IN_TEMPDB = OFF, IGNORE_DUP_KEY = OFF, DROP_EXISTING = OFF, ONLINE = OFF, ALLOW_ROW_LOCKS  = ON, ALLOW_PAGE_LOCKS  = ON) ON [PRIMARY]
GO
CREATE NONCLUSTERED INDEX [IX_hx_borrowing_target_1] ON [dbo].[hx_borrowing_target] 
(
	[companyid] ASC
)WITH (PAD_INDEX  = OFF, STATISTICS_NORECOMPUTE  = OFF, SORT_IN_TEMPDB = OFF, IGNORE_DUP_KEY = OFF, DROP_EXISTING = OFF, ONLINE = OFF, ALLOW_ROW_LOCKS  = ON, ALLOW_PAGE_LOCKS  = ON) ON [PRIMARY]
GO
CREATE NONCLUSTERED INDEX [IX_hx_borrowing_target_2] ON [dbo].[hx_borrowing_target] 
(
	[guarantee_way_id] ASC
)WITH (PAD_INDEX  = OFF, STATISTICS_NORECOMPUTE  = OFF, SORT_IN_TEMPDB = OFF, IGNORE_DUP_KEY = OFF, DROP_EXISTING = OFF, ONLINE = OFF, ALLOW_ROW_LOCKS  = ON, ALLOW_PAGE_LOCKS  = ON) ON [PRIMARY]
GO
CREATE NONCLUSTERED INDEX [Tender_state_index] ON [dbo].[hx_borrowing_target] 
(
	[tender_state] ASC
)WITH (PAD_INDEX  = OFF, STATISTICS_NORECOMPUTE  = OFF, SORT_IN_TEMPDB = OFF, IGNORE_DUP_KEY = OFF, DROP_EXISTING = OFF, ONLINE = OFF, ALLOW_ROW_LOCKS  = ON, ALLOW_PAGE_LOCKS  = ON) ON [PRIMARY]
GO
EXEC sys.sp_addextendedproperty @name=N'MS_Description', @value=N'用于合同编号' , @level0type=N'SCHEMA',@level0name=N'dbo', @level1type=N'TABLE',@level1name=N'hx_borrowing_target', @level2type=N'COLUMN',@level2name=N'loan_number'
GO
EXEC sys.sp_addextendedproperty @name=N'MS_Description', @value=N'1 月  2 天' , @level0type=N'SCHEMA',@level0name=N'dbo', @level1type=N'TABLE',@level1name=N'hx_borrowing_target', @level2type=N'COLUMN',@level2name=N'unit_day'
GO
EXEC sys.sp_addextendedproperty @name=N'MS_Description', @value=N'每月付息日期 ' , @level0type=N'SCHEMA',@level0name=N'dbo', @level1type=N'TABLE',@level1name=N'hx_borrowing_target', @level2type=N'COLUMN',@level2name=N'month_payment_date'
GO
EXEC sys.sp_addextendedproperty @name=N'MS_Description', @value=N'0表示不限 ' , @level0type=N'SCHEMA',@level0name=N'dbo', @level1type=N'TABLE',@level1name=N'hx_borrowing_target', @level2type=N'COLUMN',@level2name=N'minimum'
GO
EXEC sys.sp_addextendedproperty @name=N'MS_Description', @value=N'0 表示不限' , @level0type=N'SCHEMA',@level0name=N'dbo', @level1type=N'TABLE',@level1name=N'hx_borrowing_target', @level2type=N'COLUMN',@level2name=N'maxmum'
GO
EXEC sys.sp_addextendedproperty @name=N'MS_Description', @value=N'1 按月等额本息 3 每月还息，到期还本  4 一次性还本付息' , @level0type=N'SCHEMA',@level0name=N'dbo', @level1type=N'TABLE',@level1name=N'hx_borrowing_target', @level2type=N'COLUMN',@level2name=N'payment_options'
GO
EXEC sys.sp_addextendedproperty @name=N'MS_Description', @value=N'根据和投资明细表触发器计算' , @level0type=N'SCHEMA',@level0name=N'dbo', @level1type=N'TABLE',@level1name=N'hx_borrowing_target', @level2type=N'COLUMN',@level2name=N'fundraising_amount'
GO
EXEC sys.sp_addextendedproperty @name=N'MS_Description', @value=N'0 审核中 1 审核通过 2 审核未通过 3 进行中 4 满标 5 已还清 ' , @level0type=N'SCHEMA',@level0name=N'dbo', @level1type=N'TABLE',@level1name=N'hx_borrowing_target', @level2type=N'COLUMN',@level2name=N'tender_state'
GO
EXEC sys.sp_addextendedproperty @name=N'MS_Description', @value=N'0 未放款  1已放款' , @level0type=N'SCHEMA',@level0name=N'dbo', @level1type=N'TABLE',@level1name=N'hx_borrowing_target', @level2type=N'COLUMN',@level2name=N'full_scale_loan'
GO
EXEC sys.sp_addextendedproperty @name=N'MS_Description', @value=N'0 未满标 1 未返还' , @level0type=N'SCHEMA',@level0name=N'dbo', @level1type=N'TABLE',@level1name=N'hx_borrowing_target', @level2type=N'COLUMN',@level2name=N'flow_return'
GO
EXEC sys.sp_addextendedproperty @name=N'MS_Description', @value=N'默认为 0   在生成原款计划时触发器自动生成还款期数总数' , @level0type=N'SCHEMA',@level0name=N'dbo', @level1type=N'TABLE',@level1name=N'hx_borrowing_target', @level2type=N'COLUMN',@level2name=N'repaymentperiods'
GO
/****** Object:  Table [dbo].[ActivityLogs]    Script Date: 09/27/2016 10:30:11 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE TABLE [dbo].[ActivityLogs](
	[LogId] [int] IDENTITY(1,1) NOT NULL,
	[UserId] [int] NOT NULL,
	[ActivityId] [int] NOT NULL,
	[ActType] [int] NOT NULL,
	[ActivityName] [nvarchar](200) NOT NULL,
	[UseBeginOn] [datetime] NOT NULL,
	[UseEndOn] [datetime] NOT NULL,
	[RecordId] [int] NOT NULL,
	[TargetId] [int] NOT NULL,
	[UsedRecordId] [int] NOT NULL,
	[UsedTargetId] [int] NOT NULL,
	[AddRate] [decimal](14, 2) NOT NULL,
	[UseStatus] [int] NOT NULL,
	[CreateOn] [datetime] NOT NULL,
 CONSTRAINT [PK_ACTIVITYLOGS] PRIMARY KEY CLUSTERED 
(
	[LogId] ASC
)WITH (PAD_INDEX  = OFF, STATISTICS_NORECOMPUTE  = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS  = ON, ALLOW_PAGE_LOCKS  = ON) ON [PRIMARY]
) ON [PRIMARY]
GO
EXEC sys.sp_addextendedproperty @name=N'MS_Description', @value=N'0 可用 1 已用 2已过期' , @level0type=N'SCHEMA',@level0name=N'dbo', @level1type=N'TABLE',@level1name=N'ActivityLogs', @level2type=N'COLUMN',@level2name=N'UseStatus'
GO
/****** Object:  Table [dbo].[hx_Bid_records]    Script Date: 09/27/2016 10:30:11 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
SET ANSI_PADDING ON
GO
CREATE TABLE [dbo].[hx_Bid_records](
	[bid_records_id] [int] IDENTITY(1,1) NOT NULL,
	[borrower_registerid] [int] NULL,
	[targetid] [int] NULL,
	[loan_number] [numeric](18, 0) NULL,
	[annual_interest_rate] [numeric](38, 2) NULL,
	[current_period] [int] NULL,
	[investment_amount] [numeric](38, 2) NULL,
	[value_date] [datetime] NULL,
	[investment_maturity] [datetime] NULL,
	[invest_time] [datetime] NULL,
	[invest_state] [int] NULL,
	[flow_return] [int] NULL,
	[repayment_amount] [numeric](38, 6) NULL,
	[repayment_period] [datetime] NULL,
	[investor_registerid] [int] NULL,
	[payment_status] [int] NULL,
	[withoutinterest] [numeric](38, 2) NULL,
	[haveinterest] [numeric](38, 2) NULL,
	[contractid] [int] NULL,
	[contractpath] [varchar](255) NULL,
	[invitationcode] [varchar](50) NULL,
	[OrdId] [decimal](20, 0) NULL,
	[ordstate] [int] NULL,
	[IsLoans] [int] NULL,
 CONSTRAINT [PK_HX_BID_RECORDS] PRIMARY KEY CLUSTERED 
(
	[bid_records_id] ASC
)WITH (PAD_INDEX  = OFF, STATISTICS_NORECOMPUTE  = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS  = ON, ALLOW_PAGE_LOCKS  = ON) ON [PRIMARY]
) ON [PRIMARY]
GO
SET ANSI_PADDING OFF
GO
CREATE NONCLUSTERED INDEX [IX_hx_Bid_records] ON [dbo].[hx_Bid_records] 
(
	[OrdId] ASC
)WITH (PAD_INDEX  = OFF, STATISTICS_NORECOMPUTE  = OFF, SORT_IN_TEMPDB = OFF, IGNORE_DUP_KEY = OFF, DROP_EXISTING = OFF, ONLINE = OFF, ALLOW_ROW_LOCKS  = ON, ALLOW_PAGE_LOCKS  = ON) ON [PRIMARY]
GO
CREATE NONCLUSTERED INDEX [IX_hx_Bid_records_1] ON [dbo].[hx_Bid_records] 
(
	[borrower_registerid] ASC
)WITH (PAD_INDEX  = OFF, STATISTICS_NORECOMPUTE  = OFF, SORT_IN_TEMPDB = OFF, IGNORE_DUP_KEY = OFF, DROP_EXISTING = OFF, ONLINE = OFF, ALLOW_ROW_LOCKS  = ON, ALLOW_PAGE_LOCKS  = ON) ON [PRIMARY]
GO
CREATE NONCLUSTERED INDEX [IX_hx_Bid_records_2] ON [dbo].[hx_Bid_records] 
(
	[investor_registerid] ASC
)WITH (PAD_INDEX  = OFF, STATISTICS_NORECOMPUTE  = OFF, SORT_IN_TEMPDB = OFF, IGNORE_DUP_KEY = OFF, DROP_EXISTING = OFF, ONLINE = OFF, ALLOW_ROW_LOCKS  = ON, ALLOW_PAGE_LOCKS  = ON) ON [PRIMARY]
GO
CREATE NONCLUSTERED INDEX [IX_hx_Bid_records_3] ON [dbo].[hx_Bid_records] 
(
	[invitationcode] ASC
)WITH (PAD_INDEX  = OFF, STATISTICS_NORECOMPUTE  = OFF, SORT_IN_TEMPDB = OFF, IGNORE_DUP_KEY = OFF, DROP_EXISTING = OFF, ONLINE = OFF, ALLOW_ROW_LOCKS  = ON, ALLOW_PAGE_LOCKS  = ON) ON [PRIMARY]
GO
CREATE NONCLUSTERED INDEX [IX_hx_Bid_records_4] ON [dbo].[hx_Bid_records] 
(
	[ordstate] ASC
)WITH (PAD_INDEX  = OFF, STATISTICS_NORECOMPUTE  = OFF, SORT_IN_TEMPDB = OFF, IGNORE_DUP_KEY = OFF, DROP_EXISTING = OFF, ONLINE = OFF, ALLOW_ROW_LOCKS  = ON, ALLOW_PAGE_LOCKS  = ON) ON [PRIMARY]
GO
CREATE NONCLUSTERED INDEX [IX_hx_Bid_records_5] ON [dbo].[hx_Bid_records] 
(
	[targetid] ASC
)WITH (PAD_INDEX  = OFF, STATISTICS_NORECOMPUTE  = OFF, SORT_IN_TEMPDB = OFF, IGNORE_DUP_KEY = OFF, DROP_EXISTING = OFF, ONLINE = OFF, ALLOW_ROW_LOCKS  = ON, ALLOW_PAGE_LOCKS  = ON) ON [PRIMARY]
GO
EXEC sys.sp_addextendedproperty @name=N'MS_Description', @value=N'分期总数' , @level0type=N'SCHEMA',@level0name=N'dbo', @level1type=N'TABLE',@level1name=N'hx_Bid_records', @level2type=N'COLUMN',@level2name=N'current_period'
GO
EXEC sys.sp_addextendedproperty @name=N'MS_Description', @value=N'1 成功  2 失败  3流标返还 
   
   如果是投标返还的话通过触发器更改对应金额问题' , @level0type=N'SCHEMA',@level0name=N'dbo', @level1type=N'TABLE',@level1name=N'hx_Bid_records', @level2type=N'COLUMN',@level2name=N'invest_state'
GO
EXEC sys.sp_addextendedproperty @name=N'MS_Description', @value=N'1 无返还  2已返还' , @level0type=N'SCHEMA',@level0name=N'dbo', @level1type=N'TABLE',@level1name=N'hx_Bid_records', @level2type=N'COLUMN',@level2name=N'flow_return'
GO
EXEC sys.sp_addextendedproperty @name=N'MS_Description', @value=N'0 未还款    1 借款人自己还款  2 平台代还' , @level0type=N'SCHEMA',@level0name=N'dbo', @level1type=N'TABLE',@level1name=N'hx_Bid_records', @level2type=N'COLUMN',@level2name=N'payment_status'
GO
EXEC sys.sp_addextendedproperty @name=N'MS_Description', @value=N'用户投标' , @level0type=N'SCHEMA',@level0name=N'dbo', @level1type=N'TABLE',@level1name=N'hx_Bid_records'
GO
/****** Object:  View [dbo].[V_hx_Bid_records_borrowing_target]    Script Date: 09/27/2016 10:30:12 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE VIEW [dbo].[V_hx_Bid_records_borrowing_target]
AS
SELECT DISTINCT 
                      dbo.hx_borrowing_target.borrowing_title, dbo.hx_Bid_records.bid_records_id, dbo.hx_Bid_records.borrower_registerid, dbo.hx_Bid_records.targetid, 
                      dbo.hx_Bid_records.loan_number, dbo.hx_Bid_records.annual_interest_rate, dbo.hx_Bid_records.current_period, dbo.hx_Bid_records.investment_amount, 
                      dbo.hx_Bid_records.value_date, dbo.hx_Bid_records.investment_maturity, dbo.hx_Bid_records.invest_time, dbo.hx_Bid_records.invest_state, 
                      dbo.hx_Bid_records.flow_return, dbo.hx_Bid_records.repayment_amount, dbo.hx_Bid_records.repayment_period, dbo.hx_Bid_records.investor_registerid, 
                      dbo.hx_Bid_records.payment_status, dbo.hx_Bid_records.withoutinterest, dbo.hx_Bid_records.haveinterest, dbo.hx_member_table.username, 
                      dbo.hx_member_table.realname, dbo.hx_member_table.registerid, dbo.hx_borrowing_target.payment_options, dbo.hx_Bid_records.contractid, 
                      dbo.hx_Bid_records.contractpath, dbo.hx_borrowing_target.life_of_loan, dbo.hx_borrowing_target.unit_day, dbo.hx_member_table.mobile, 
                      dbo.hx_member_table.UsrCustId, dbo.hx_td_frozen.FrozenidAmount, dbo.hx_td_frozen.FrozenidNo, dbo.hx_td_frozen.FrozenState, dbo.hx_td_frozen.FreezeTrxId, 
                      hx_member_table_1.UsrCustId AS borrUsrCustid, dbo.hx_member_table.available_balance, dbo.hx_borrowing_target.tender_state, 
                      dbo.hx_Bid_records.invitationcode, hx_member_table_1.realname AS borrealname, hx_member_table_1.username AS borusername, dbo.hx_Bid_records.OrdId, 
                      dbo.hx_borrowing_target.borrowing_balance, dbo.hx_Bid_records.ordstate, dbo.hx_Bid_records.IsLoans, dbo.hx_borrowing_target.project_type_id
FROM         dbo.hx_borrowing_target INNER JOIN
                      dbo.hx_Bid_records ON dbo.hx_borrowing_target.targetid = dbo.hx_Bid_records.targetid INNER JOIN
                      dbo.hx_member_table ON dbo.hx_Bid_records.investor_registerid = dbo.hx_member_table.registerid INNER JOIN
                      dbo.hx_member_table AS hx_member_table_1 ON dbo.hx_Bid_records.borrower_registerid = hx_member_table_1.registerid INNER JOIN
                      dbo.hx_td_frozen ON dbo.hx_Bid_records.investor_registerid = dbo.hx_td_frozen.MBT_Registerid AND 
                      dbo.hx_Bid_records.bid_records_id = dbo.hx_td_frozen.bid_records_id
WHERE     (dbo.hx_Bid_records.ordstate = 1)
GO
EXEC sys.sp_addextendedproperty @name=N'MS_DiagramPane1', @value=N'[0E232FF0-B466-11cf-A24F-00AA00A3EFFF, 1.00]
Begin DesignProperties = 
   Begin PaneConfigurations = 
      Begin PaneConfiguration = 0
         NumPanes = 4
         Configuration = "(H (1[31] 4[28] 2[14] 3) )"
      End
      Begin PaneConfiguration = 1
         NumPanes = 3
         Configuration = "(H (1 [50] 4 [25] 3))"
      End
      Begin PaneConfiguration = 2
         NumPanes = 3
         Configuration = "(H (1 [50] 2 [25] 3))"
      End
      Begin PaneConfiguration = 3
         NumPanes = 3
         Configuration = "(H (4 [30] 2 [40] 3))"
      End
      Begin PaneConfiguration = 4
         NumPanes = 2
         Configuration = "(H (1 [56] 3))"
      End
      Begin PaneConfiguration = 5
         NumPanes = 2
         Configuration = "(H (2 [66] 3))"
      End
      Begin PaneConfiguration = 6
         NumPanes = 2
         Configuration = "(H (4 [50] 3))"
      End
      Begin PaneConfiguration = 7
         NumPanes = 1
         Configuration = "(V (3))"
      End
      Begin PaneConfiguration = 8
         NumPanes = 3
         Configuration = "(H (1[56] 4[18] 2) )"
      End
      Begin PaneConfiguration = 9
         NumPanes = 2
         Configuration = "(H (1 [75] 4))"
      End
      Begin PaneConfiguration = 10
         NumPanes = 2
         Configuration = "(H (1[66] 2) )"
      End
      Begin PaneConfiguration = 11
         NumPanes = 2
         Configuration = "(H (4 [60] 2))"
      End
      Begin PaneConfiguration = 12
         NumPanes = 1
         Configuration = "(H (1) )"
      End
      Begin PaneConfiguration = 13
         NumPanes = 1
         Configuration = "(V (4))"
      End
      Begin PaneConfiguration = 14
         NumPanes = 1
         Configuration = "(V (2))"
      End
      ActivePaneConfig = 0
   End
   Begin DiagramPane = 
      Begin Origin = 
         Top = 0
         Left = 0
      End
      Begin Tables = 
         Begin Table = "hx_borrowing_target"
            Begin Extent = 
               Top = 18
               Left = 20
               Bottom = 191
               Right = 283
            End
            DisplayFlags = 280
            TopColumn = 1
         End
         Begin Table = "hx_Bid_records"
            Begin Extent = 
               Top = 76
               Left = 356
               Bottom = 275
               Right = 537
            End
            DisplayFlags = 280
            TopColumn = 14
         End
         Begin Table = "hx_member_table"
            Begin Extent = 
               Top = 233
               Left = 614
               Bottom = 419
               Right = 801
            End
            DisplayFlags = 280
            TopColumn = 0
         End
         Begin Table = "hx_member_table_1"
            Begin Extent = 
               Top = 0
               Left = 633
               Bottom = 108
               Right = 820
            End
            DisplayFlags = 280
            TopColumn = 0
         End
         Begin Table = "hx_td_frozen"
            Begin Extent = 
               Top = 106
               Left = 731
               Bottom = 214
               Right = 889
            End
            DisplayFlags = 280
            TopColumn = 6
         End
      End
   End
   Begin SQLPane = 
   End
   Begin DataPane = 
      Begin ParameterDefaults = ""
      End
      Begin ColumnWidths = 39
         Width = 284
         Width = 1995
         Width = 1500
         Width = 1500
         Width = 1500
         Width = 1500
         Width = 1500
         Width = 1500
         Width = 1500
         Width = 1500
         Width = 1500
         Width = 1500
         Width =' , @level0type=N'SCHEMA',@level0name=N'dbo', @level1type=N'VIEW',@level1name=N'V_hx_Bid_records_borrowing_target'
GO
EXEC sys.sp_addextendedproperty @name=N'MS_DiagramPane2', @value=N' 1500
         Width = 1500
         Width = 1500
         Width = 1500
         Width = 1500
         Width = 1500
         Width = 1500
         Width = 1500
         Width = 1500
         Width = 1500
         Width = 1500
         Width = 1500
         Width = 1500
         Width = 1500
         Width = 1500
         Width = 1500
         Width = 1500
         Width = 1500
         Width = 1500
         Width = 1500
         Width = 1500
         Width = 1500
         Width = 1500
         Width = 1500
         Width = 1500
         Width = 1500
         Width = 1500
      End
   End
   Begin CriteriaPane = 
      Begin ColumnWidths = 11
         Column = 1440
         Alias = 2745
         Table = 2085
         Output = 720
         Append = 1400
         NewValue = 1170
         SortType = 1350
         SortOrder = 1410
         GroupBy = 1350
         Filter = 1350
         Or = 1350
         Or = 1350
         Or = 1350
      End
   End
End
' , @level0type=N'SCHEMA',@level0name=N'dbo', @level1type=N'VIEW',@level1name=N'V_hx_Bid_records_borrowing_target'
GO
EXEC sys.sp_addextendedproperty @name=N'MS_DiagramPaneCount', @value=2 , @level0type=N'SCHEMA',@level0name=N'dbo', @level1type=N'VIEW',@level1name=N'V_hx_Bid_records_borrowing_target'
GO
/****** Object:  View [dbo].[tempViewUser]    Script Date: 09/27/2016 10:30:12 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
create view [dbo].[tempViewUser]
as 
select registerid,useridentity as '等级', account_total_assets as '资产' ,available_balance as '可用' ,frozen_sum as '冻结'  ,isnull(investment_amount,0) as '在投资产',
 registration_time as '注册时间' from hx_member_table LEFT JOIN (SELECT COALESCE(sum(investment_amount),0) AS investment_amount,investor_registerid FROM V_hx_Bid_records_borrowing_target WHERE
 tender_state between 2 and 4 GROUP BY investor_registerid) v ON investor_registerid=registerid
GO
/****** Object:  View [dbo].[ViewInvestRecord]    Script Date: 09/27/2016 10:30:12 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE VIEW [dbo].[ViewInvestRecord]
AS
SELECT a.bid_records_id, a.targetid,a.investor_registerid,mt.username,a.investment_amount,a.invest_state,a.invest_time FROM [dbo].hx_Bid_records AS a WITH(NOLOCK) 
LEFT JOIN dbo.hx_member_table AS mt WITH(NOLOCK) ON a.investor_registerid=mt.registerid
GO
/****** Object:  View [dbo].[V_yaoqin_count]    Script Date: 09/27/2016 10:30:12 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE VIEW [dbo].[V_yaoqin_count]
AS
SELECT     dbo.hx_Bid_records.bid_records_id, dbo.hx_Bid_records.targetid, dbo.hx_Bid_records.investment_amount, dbo.hx_Bid_records.OrdId, dbo.hx_Bid_records.ordstate, 
                      dbo.hx_Bid_records.invitationcode, dbo.hx_member_table.username AS yaousername, dbo.hx_member_table.registerid AS yaouid, 
                      hx_member_table_1.registerid AS invuid, hx_member_table_1.username AS invusername, hx_member_table_1.realname, dbo.hx_Bid_records.invest_time, 
                      dbo.hx_member_table.realname AS yaorealname
FROM         dbo.hx_Bid_records INNER JOIN
                      dbo.hx_member_table ON dbo.hx_Bid_records.invitationcode = dbo.hx_member_table.invitedcode INNER JOIN
                      dbo.hx_member_table AS hx_member_table_1 ON dbo.hx_Bid_records.investor_registerid = hx_member_table_1.registerid
GO
EXEC sys.sp_addextendedproperty @name=N'MS_DiagramPane1', @value=N'[0E232FF0-B466-11cf-A24F-00AA00A3EFFF, 1.00]
Begin DesignProperties = 
   Begin PaneConfigurations = 
      Begin PaneConfiguration = 0
         NumPanes = 4
         Configuration = "(H (1[41] 4[20] 2[13] 3) )"
      End
      Begin PaneConfiguration = 1
         NumPanes = 3
         Configuration = "(H (1 [50] 4 [25] 3))"
      End
      Begin PaneConfiguration = 2
         NumPanes = 3
         Configuration = "(H (1 [50] 2 [25] 3))"
      End
      Begin PaneConfiguration = 3
         NumPanes = 3
         Configuration = "(H (4 [30] 2 [40] 3))"
      End
      Begin PaneConfiguration = 4
         NumPanes = 2
         Configuration = "(H (1 [56] 3))"
      End
      Begin PaneConfiguration = 5
         NumPanes = 2
         Configuration = "(H (2 [66] 3))"
      End
      Begin PaneConfiguration = 6
         NumPanes = 2
         Configuration = "(H (4 [50] 3))"
      End
      Begin PaneConfiguration = 7
         NumPanes = 1
         Configuration = "(V (3))"
      End
      Begin PaneConfiguration = 8
         NumPanes = 3
         Configuration = "(H (1[56] 4[18] 2) )"
      End
      Begin PaneConfiguration = 9
         NumPanes = 2
         Configuration = "(H (1 [75] 4))"
      End
      Begin PaneConfiguration = 10
         NumPanes = 2
         Configuration = "(H (1[66] 2) )"
      End
      Begin PaneConfiguration = 11
         NumPanes = 2
         Configuration = "(H (4 [60] 2))"
      End
      Begin PaneConfiguration = 12
         NumPanes = 1
         Configuration = "(H (1) )"
      End
      Begin PaneConfiguration = 13
         NumPanes = 1
         Configuration = "(V (4))"
      End
      Begin PaneConfiguration = 14
         NumPanes = 1
         Configuration = "(V (2))"
      End
      ActivePaneConfig = 0
   End
   Begin DiagramPane = 
      Begin Origin = 
         Top = 0
         Left = 0
      End
      Begin Tables = 
         Begin Table = "hx_Bid_records"
            Begin Extent = 
               Top = 0
               Left = 120
               Bottom = 204
               Right = 301
            End
            DisplayFlags = 280
            TopColumn = 7
         End
         Begin Table = "hx_member_table"
            Begin Extent = 
               Top = 0
               Left = 432
               Bottom = 194
               Right = 619
            End
            DisplayFlags = 280
            TopColumn = 0
         End
         Begin Table = "hx_member_table_1"
            Begin Extent = 
               Top = 6
               Left = 657
               Bottom = 179
               Right = 844
            End
            DisplayFlags = 280
            TopColumn = 0
         End
      End
   End
   Begin SQLPane = 
   End
   Begin DataPane = 
      Begin ParameterDefaults = ""
      End
      Begin ColumnWidths = 9
         Width = 284
         Width = 1500
         Width = 1500
         Width = 1500
         Width = 1500
         Width = 1500
         Width = 1500
         Width = 1500
         Width = 1500
      End
   End
   Begin CriteriaPane = 
      Begin ColumnWidths = 11
         Column = 1440
         Alias = 900
         Table = 1170
         Output = 720
         Append = 1400
         NewValue = 1170
         SortType = 1350
         SortOrder = 1410
         GroupBy = 1350
         Filter = 1350
         Or = 1350
         Or = 1350
         Or = 1350
      End
   End
End
' , @level0type=N'SCHEMA',@level0name=N'dbo', @level1type=N'VIEW',@level1name=N'V_yaoqin_count'
GO
EXEC sys.sp_addextendedproperty @name=N'MS_DiagramPaneCount', @value=1 , @level0type=N'SCHEMA',@level0name=N'dbo', @level1type=N'VIEW',@level1name=N'V_yaoqin_count'
GO
/****** Object:  Table [dbo].[hx_income_statement]    Script Date: 09/27/2016 10:30:11 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
SET ANSI_PADDING ON
GO
CREATE TABLE [dbo].[hx_income_statement](
	[income_statement_id] [int] IDENTITY(1,1) NOT NULL,
	[targetid] [int] NULL,
	[bid_records_id] [int] NOT NULL,
	[loan_number] [numeric](18, 0) NULL,
	[borrower_registerid] [int] NULL,
	[OutCustId] [varchar](50) NULL,
	[annual_revenue] [numeric](38, 2) NULL,
	[investment_amount] [numeric](38, 2) NULL,
	[invest_time] [datetime] NULL,
	[current_investment_period] [int] NULL,
	[value_date] [datetime] NULL,
	[interest_payment_date] [datetime] NULL,
	[repayment_amount] [numeric](38, 2) NULL,
	[repayment_period] [datetime] NULL,
	[investor_registerid] [int] NULL,
	[InCustId] [varchar](50) NULL,
	[payment_status] [int] NULL,
	[Principal] [numeric](38, 2) NULL,
	[interestpayment] [numeric](38, 2) NULL,
	[orderid] [varchar](50) NULL,
	[BidOrderid] [decimal](20, 0) NULL,
	[interestDay] [int] NULL,
	[TotalInstallments] [int] NULL,
	[BorrFees] [numeric](38, 2) NULL,
	[InveFess] [numeric](38, 2) NULL,
 CONSTRAINT [PK_HX_INCOME_STATEMENT] PRIMARY KEY CLUSTERED 
(
	[income_statement_id] ASC
)WITH (PAD_INDEX  = OFF, STATISTICS_NORECOMPUTE  = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS  = ON, ALLOW_PAGE_LOCKS  = ON) ON [PRIMARY]
) ON [PRIMARY]
GO
SET ANSI_PADDING OFF
GO
CREATE NONCLUSTERED INDEX [IX_hx_income_statement] ON [dbo].[hx_income_statement] 
(
	[bid_records_id] ASC
)WITH (PAD_INDEX  = OFF, STATISTICS_NORECOMPUTE  = OFF, SORT_IN_TEMPDB = OFF, IGNORE_DUP_KEY = OFF, DROP_EXISTING = OFF, ONLINE = OFF, ALLOW_ROW_LOCKS  = ON, ALLOW_PAGE_LOCKS  = ON) ON [PRIMARY]
GO
CREATE NONCLUSTERED INDEX [IX_hx_income_statement_1] ON [dbo].[hx_income_statement] 
(
	[payment_status] ASC
)WITH (PAD_INDEX  = OFF, STATISTICS_NORECOMPUTE  = OFF, SORT_IN_TEMPDB = OFF, IGNORE_DUP_KEY = OFF, DROP_EXISTING = OFF, ONLINE = OFF, ALLOW_ROW_LOCKS  = ON, ALLOW_PAGE_LOCKS  = ON) ON [PRIMARY]
GO
CREATE NONCLUSTERED INDEX [IX_hx_income_statement_2] ON [dbo].[hx_income_statement] 
(
	[targetid] ASC
)WITH (PAD_INDEX  = OFF, STATISTICS_NORECOMPUTE  = OFF, SORT_IN_TEMPDB = OFF, IGNORE_DUP_KEY = OFF, DROP_EXISTING = OFF, ONLINE = OFF, ALLOW_ROW_LOCKS  = ON, ALLOW_PAGE_LOCKS  = ON) ON [PRIMARY]
GO
EXEC sys.sp_addextendedproperty @name=N'MS_Description', @value=N'0 未还款    1 借款人自己还款  2 平台代还' , @level0type=N'SCHEMA',@level0name=N'dbo', @level1type=N'TABLE',@level1name=N'hx_income_statement', @level2type=N'COLUMN',@level2name=N'payment_status'
GO
/****** Object:  View [dbo].[V_Bid_income_statement]    Script Date: 09/27/2016 10:30:12 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE VIEW [dbo].[V_Bid_income_statement]
AS
SELECT     dbo.hx_income_statement.income_statement_id, dbo.hx_income_statement.targetid, dbo.hx_income_statement.bid_records_id, 
                      dbo.hx_income_statement.loan_number, dbo.hx_income_statement.borrower_registerid, dbo.hx_income_statement.OutCustId, 
                      dbo.hx_income_statement.annual_revenue, dbo.hx_income_statement.investment_amount, dbo.hx_income_statement.invest_time, 
                      dbo.hx_income_statement.current_investment_period, dbo.hx_income_statement.value_date, dbo.hx_income_statement.interest_payment_date, 
                      dbo.hx_income_statement.repayment_amount, dbo.hx_income_statement.repayment_period, dbo.hx_income_statement.investor_registerid, 
                      dbo.hx_income_statement.InCustId, dbo.hx_income_statement.payment_status, dbo.hx_income_statement.interestpayment, dbo.hx_income_statement.orderid, 
                      dbo.hx_income_statement.BidOrderid, dbo.hx_Bid_records.ordstate
FROM         dbo.hx_Bid_records INNER JOIN
                      dbo.hx_income_statement ON dbo.hx_Bid_records.bid_records_id = dbo.hx_income_statement.bid_records_id
WHERE     (dbo.hx_Bid_records.ordstate > 0)
GO
EXEC sys.sp_addextendedproperty @name=N'MS_DiagramPane1', @value=N'[0E232FF0-B466-11cf-A24F-00AA00A3EFFF, 1.00]
Begin DesignProperties = 
   Begin PaneConfigurations = 
      Begin PaneConfiguration = 0
         NumPanes = 4
         Configuration = "(H (1[24] 4[38] 2[3] 3) )"
      End
      Begin PaneConfiguration = 1
         NumPanes = 3
         Configuration = "(H (1 [50] 4 [25] 3))"
      End
      Begin PaneConfiguration = 2
         NumPanes = 3
         Configuration = "(H (1 [50] 2 [25] 3))"
      End
      Begin PaneConfiguration = 3
         NumPanes = 3
         Configuration = "(H (4 [30] 2 [40] 3))"
      End
      Begin PaneConfiguration = 4
         NumPanes = 2
         Configuration = "(H (1 [56] 3))"
      End
      Begin PaneConfiguration = 5
         NumPanes = 2
         Configuration = "(H (2 [66] 3))"
      End
      Begin PaneConfiguration = 6
         NumPanes = 2
         Configuration = "(H (4 [50] 3))"
      End
      Begin PaneConfiguration = 7
         NumPanes = 1
         Configuration = "(V (3))"
      End
      Begin PaneConfiguration = 8
         NumPanes = 3
         Configuration = "(H (1[56] 4[18] 2) )"
      End
      Begin PaneConfiguration = 9
         NumPanes = 2
         Configuration = "(H (1 [75] 4))"
      End
      Begin PaneConfiguration = 10
         NumPanes = 2
         Configuration = "(H (1[66] 2) )"
      End
      Begin PaneConfiguration = 11
         NumPanes = 2
         Configuration = "(H (4 [60] 2))"
      End
      Begin PaneConfiguration = 12
         NumPanes = 1
         Configuration = "(H (1) )"
      End
      Begin PaneConfiguration = 13
         NumPanes = 1
         Configuration = "(V (4))"
      End
      Begin PaneConfiguration = 14
         NumPanes = 1
         Configuration = "(V (2))"
      End
      ActivePaneConfig = 0
   End
   Begin DiagramPane = 
      Begin Origin = 
         Top = 0
         Left = 0
      End
      Begin Tables = 
         Begin Table = "hx_Bid_records"
            Begin Extent = 
               Top = 6
               Left = 38
               Bottom = 196
               Right = 238
            End
            DisplayFlags = 280
            TopColumn = 14
         End
         Begin Table = "hx_income_statement"
            Begin Extent = 
               Top = 6
               Left = 257
               Bottom = 208
               Right = 467
            End
            DisplayFlags = 280
            TopColumn = 10
         End
      End
   End
   Begin SQLPane = 
   End
   Begin DataPane = 
      Begin ParameterDefaults = ""
      End
      Begin ColumnWidths = 22
         Width = 284
         Width = 1500
         Width = 1500
         Width = 1500
         Width = 1500
         Width = 1500
         Width = 1500
         Width = 1500
         Width = 1500
         Width = 1500
         Width = 1500
         Width = 1500
         Width = 1500
         Width = 1500
         Width = 1500
         Width = 1500
         Width = 1500
         Width = 1500
         Width = 1500
         Width = 1500
         Width = 1500
         Width = 1500
      End
   End
   Begin CriteriaPane = 
      Begin ColumnWidths = 11
         Column = 1440
         Alias = 900
         Table = 1170
         Output = 720
         Append = 1400
         NewValue = 1170
         SortType = 1350
         SortOrder = 1410
         GroupBy = 1350
         Filter = 1350
         Or = 1350
         Or = 1350
         Or = 1350
      End
   End
End
' , @level0type=N'SCHEMA',@level0name=N'dbo', @level1type=N'VIEW',@level1name=N'V_Bid_income_statement'
GO
EXEC sys.sp_addextendedproperty @name=N'MS_DiagramPaneCount', @value=1 , @level0type=N'SCHEMA',@level0name=N'dbo', @level1type=N'VIEW',@level1name=N'V_Bid_income_statement'
GO
/****** Object:  UserDefinedFunction [dbo].[getInvestCountByDate]    Script Date: 09/27/2016 10:30:13 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE function [dbo].[getInvestCountByDate](@investDate varchar(10))   
returns int --返回值类型  
as  
begin  
declare @investCount int   
SELECT @investCount=COUNT(DISTINCT(ba.registerid))  from hx_member_table ba (nolock) LEFT JOIN   hx_Bid_records br ON br.investor_registerid=ba.registerid  
WHERE br.bid_records_id IN (SELECT MIN(hb2.bid_records_id)  FROM dbo.hx_Bid_records hb2 GROUP BY hb2.investor_registerid ) AND   
 convert(varchar(10),br.invest_time,120)=@investDate  
return @investCount   
end
GO
/****** Object:  Table [dbo].[hx_Capital_account_water]    Script Date: 09/27/2016 10:30:12 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
SET ANSI_PADDING ON
GO
CREATE TABLE [dbo].[hx_Capital_account_water](
	[account_water_id] [int] IDENTITY(1,1) NOT NULL,
	[membertable_registerid] [int] NULL,
	[income] [numeric](38, 2) NULL,
	[expenditure] [numeric](38, 2) NULL,
	[time_of_occurrence] [datetime] NULL,
	[account_balance] [numeric](38, 2) NULL,
	[types_Finance] [int] NULL,
	[createtime] [datetime] NULL,
	[keyid] [int] NULL,
	[remarks] [varchar](3000) NULL,
 CONSTRAINT [PK_HX_CAPITAL_ACCOUNT_WATER] PRIMARY KEY CLUSTERED 
(
	[account_water_id] ASC
)WITH (PAD_INDEX  = OFF, STATISTICS_NORECOMPUTE  = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS  = ON, ALLOW_PAGE_LOCKS  = ON) ON [PRIMARY]
) ON [PRIMARY]
GO
SET ANSI_PADDING OFF
GO
/****** Object:  Table [dbo].[hx_borrowing_target_detailed]    Script Date: 09/27/2016 10:30:12 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
SET ANSI_PADDING ON
GO
CREATE TABLE [dbo].[hx_borrowing_target_detailed](
	[target_detailed_id] [int] IDENTITY(1,1) NOT NULL,
	[borrower_registerid] [int] NULL,
	[targetid] [int] NULL,
	[item_details] [varchar](max) NULL,
	[borrower_circumstances] [varchar](max) NULL,
	[borrower_base_material] [varchar](max) NULL,
	[use_funds] [varchar](max) NULL,
	[independent_advice] [varchar](max) NULL,
	[guarantee_agency_views] [varchar](max) NULL,
	[risk_control_measures] [varchar](max) NULL,
	[createtime] [datetime] NULL,
 CONSTRAINT [PK_HX_BORROWING_TARGET_DETAILE] PRIMARY KEY CLUSTERED 
(
	[target_detailed_id] ASC
)WITH (PAD_INDEX  = OFF, STATISTICS_NORECOMPUTE  = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS  = ON, ALLOW_PAGE_LOCKS  = ON) ON [PRIMARY]
) ON [PRIMARY]
GO
SET ANSI_PADDING OFF
GO
CREATE NONCLUSTERED INDEX [IX_hx_borrowing_target_detailed] ON [dbo].[hx_borrowing_target_detailed] 
(
	[targetid] ASC
)WITH (PAD_INDEX  = OFF, STATISTICS_NORECOMPUTE  = OFF, SORT_IN_TEMPDB = OFF, IGNORE_DUP_KEY = OFF, DROP_EXISTING = OFF, ONLINE = OFF, ALLOW_ROW_LOCKS  = ON, ALLOW_PAGE_LOCKS  = ON) ON [PRIMARY]
GO
/****** Object:  View [dbo].[ViewThirdWangDaiZhongGuo]    Script Date: 09/27/2016 10:30:12 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE VIEW [dbo].[ViewThirdWangDaiZhongGuo]

AS





SELECT 		



			'http://www.chuanglitou.com/invest_borrow_'+CAST( t.targetid AS NVARCHAR(MAX))+'.html' AS url,



				t.targetid AS id,



				t.borrowing_title AS title,



				t.borrowing_balance AS account,



				t.annual_interest_rate AS apr



				,t.life_of_loan AS limit



,t.unit_day AS limit_type



,t.payment_options AS way



,t.H_Repayment_Amt AS account_yes



,t.minimum AS account_min



,t.maxmum AS account_max



,'' AS username ,

(DATEDIFF(S,'1970-01-01 00:00:00',td.createtime) - 8 * 3600 ) AS add_time



,(DATEDIFF(S,'1970-01-01 00:00:00',t.sys_time) - 8 * 3600 )   AS verify_time



,(DATEDIFF(S,'1970-01-01 00:00:00',t.sys_time) - 8 * 3600 )  AS success_time



,'默认' AS [type]



--1  录入 0 审核中 1 初审通过  2 复审通过(开标上线)    3 满标 (还款中)     4放款 (还款中)   5 已还清   6初审未通过   7 复审未通过  8 流标



,( CASE  t.tender_state  WHEN 0 THEN 0  --0 新标待审 1 初审通过 2 初审未通过 3 成功借款 4 复审未通过 5已结束 6 用户取消 7 坏账



WHEN 1 THEN 1 --1 初审通过



WHEN 6 THEN 2



WHEN 2 THEN 3



WHEN 3 THEN 3



WHEN 4 THEN 3



WHEN 7 THEN 4



WHEN 5 THEN 5



END



) AS [status] 



,'' AS reward



,1 AS is_diya



,1 AS is_danbao



,0 AS is_mima



,0 AS is_miao



,0 AS is_zhuan



FROM hx_borrowing_target t  WITH  (NOLOCK) LEFT JOIN dbo.hx_borrowing_target_detailed  td  WITH  (NOLOCK) ON t.targetid=td.targetid
GO
/****** Object:  View [dbo].[ViewTargetWithRecords]    Script Date: 09/27/2016 10:30:12 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE VIEW [dbo].[ViewTargetWithRecords] AS 

SELECT 































a.targetid,































a.borrowing_title,































































a.borrower_registerid,































mt.username,







































a.tender_state,







































a.repayment_date,



a.month_payment_date,



















a.project_type_id,































































a.borrowing_balance,































































a.annual_interest_rate,































































a.life_of_loan,































a.start_time,































a.release_date,































a.unit_day,































a.payment_options,































































a.H_Repayment_Amt,































a.end_time,b.invest_num,















a.fundraising_amount, 























det.createtime AS CreatedOn
,

a.minimum ,a.maxmum




















 FROM dbo.hx_borrowing_target  
a  WITH (NOLOCK) LEFT JOIN dbo.hx_borrowing_target_detailed det  WITH (NOLOCK)  ON det.targetid=a.targetid







LEFT JOIN (SELECT targetid,COUNT(bid_records_id) AS invest_num,MAX(invest_time) AS end_time FROM hx_Bid_records   WITH (NOLOCK) GROUP BY targetid) b ON a.targetid=b.targetid







LEFT JOIN dbo.hx_member_table mt ON mt.registerid=det.borrower_registerid
GO
/****** Object:  View [dbo].[ViewInvestList]    Script Date: 09/27/2016 10:30:12 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE VIEW [dbo].[ViewInvestList]



as



SELECT 



br.bid_records_id AS recordId



,br.targetid AS targetId

,bt.borrowing_title AS targetTitle

,br.investor_registerid AS investMemberId
,
br.haveinterest AS receivableInterest
,mt.username AS investMemberName



,bt.life_of_loan AS deadLine--期限



,bt.unit_day AS unitDay--单位(月/天) 1 月  3 天



,br.annual_interest_rate AS rate --年化收益



,br.investment_amount AS investAmount--投资金额



,br.payment_status AS paymentStatus



,br.value_date AS rateBeginOn--开始计算利息日期



,br.investment_maturity AS investMaturity--投资到期日



,br.invest_time AS createdOn



 FROM dbo.hx_Bid_records (NOLOCK) br



 LEFT JOIN dbo.hx_member_table (NOLOCK) mt ON br.investor_registerid=mt.registerid



 LEFT JOIN dbo.hx_borrowing_target (NOLOCK) bt ON bt.targetid=br.targetid
GO
/****** Object:  View [dbo].[ViewInvestDetail]    Script Date: 09/27/2016 10:30:12 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE VIEW [dbo].[ViewInvestDetail]



as



SELECT 



br.bid_records_id AS recordId

,br.targetid AS targetId

,bt.borrowing_title AS targetTitle

,br.investor_registerid AS investMemberId

,mt.username AS investMemberName

,bt.life_of_loan AS deadLine--期限

,bt.unit_day AS unitDay--单位(月/天) 1 月  3 天

,br.annual_interest_rate AS rate --年化收益

,bt.borrowing_balance AS borrowTotalAmount--项目总额

,bt.fundraising_amount AS fundTotalAmount--已投总金额

,br.investment_amount AS investAmount--投资金额

,bt.payment_options AS paymentOption--1 按月等额本息  3 每月还息，到期还本   4 一次性还本付息

,br.payment_status AS paymentStatus

,br.value_date AS rateBeginOn--开始计算利息日期

,br.investment_maturity AS investMaturity--投资到期日

,bt.repayment_date AS paymentDate--还款日期

,br.invest_time AS createdOn

,b.investNumber--已购买人数
,bt.guarantee_way_id--担保类型
,bt.month_payment_date--每月付息日

 FROM dbo.hx_Bid_records (NOLOCK) br

 LEFT JOIN dbo.hx_member_table (NOLOCK) mt ON br.investor_registerid=mt.registerid

 LEFT JOIN dbo.hx_borrowing_target (NOLOCK) bt ON bt.targetid=br.targetid 

LEFT JOIN (SELECT  targetid,COUNT(DISTINCT(investor_registerid)) AS investNumber  FROM hx_Bid_records   WITH (NOLOCK) GROUP BY targetid) b ON br.targetid=b.targetid
GO
/****** Object:  View [dbo].[V_incomeborr_count]    Script Date: 09/27/2016 10:30:12 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE VIEW [dbo].[V_incomeborr_count]
AS
SELECT     dbo.hx_income_statement.income_statement_id, dbo.hx_income_statement.targetid, dbo.hx_income_statement.bid_records_id, 
                      dbo.hx_income_statement.loan_number, dbo.hx_income_statement.borrower_registerid, dbo.hx_income_statement.OutCustId, 
                      dbo.hx_income_statement.annual_revenue, dbo.hx_income_statement.investment_amount, dbo.hx_income_statement.invest_time, 
                      dbo.hx_income_statement.current_investment_period, dbo.hx_income_statement.value_date, dbo.hx_income_statement.interest_payment_date, 
                      dbo.hx_income_statement.repayment_amount, dbo.hx_income_statement.repayment_period, dbo.hx_income_statement.investor_registerid, 
                      dbo.hx_income_statement.InCustId, dbo.hx_income_statement.payment_status, dbo.hx_income_statement.Principal, dbo.hx_income_statement.interestpayment, 
                      dbo.hx_income_statement.orderid, dbo.hx_income_statement.BidOrderid, dbo.hx_income_statement.interestDay, dbo.hx_income_statement.TotalInstallments, 
                      dbo.hx_income_statement.BorrFees, dbo.hx_income_statement.InveFess, dbo.hx_borrowing_target.loan_management_fee
FROM         dbo.hx_income_statement INNER JOIN
                      dbo.hx_borrowing_target ON dbo.hx_income_statement.targetid = dbo.hx_borrowing_target.targetid
WHERE     (dbo.hx_income_statement.payment_status = 0)
GO
EXEC sys.sp_addextendedproperty @name=N'MS_DiagramPane1', @value=N'[0E232FF0-B466-11cf-A24F-00AA00A3EFFF, 1.00]
Begin DesignProperties = 
   Begin PaneConfigurations = 
      Begin PaneConfiguration = 0
         NumPanes = 4
         Configuration = "(H (1[21] 4[30] 2[15] 3) )"
      End
      Begin PaneConfiguration = 1
         NumPanes = 3
         Configuration = "(H (1 [50] 4 [25] 3))"
      End
      Begin PaneConfiguration = 2
         NumPanes = 3
         Configuration = "(H (1 [50] 2 [25] 3))"
      End
      Begin PaneConfiguration = 3
         NumPanes = 3
         Configuration = "(H (4 [30] 2 [40] 3))"
      End
      Begin PaneConfiguration = 4
         NumPanes = 2
         Configuration = "(H (1 [56] 3))"
      End
      Begin PaneConfiguration = 5
         NumPanes = 2
         Configuration = "(H (2 [66] 3))"
      End
      Begin PaneConfiguration = 6
         NumPanes = 2
         Configuration = "(H (4 [50] 3))"
      End
      Begin PaneConfiguration = 7
         NumPanes = 1
         Configuration = "(V (3))"
      End
      Begin PaneConfiguration = 8
         NumPanes = 3
         Configuration = "(H (1[56] 4[18] 2) )"
      End
      Begin PaneConfiguration = 9
         NumPanes = 2
         Configuration = "(H (1 [75] 4))"
      End
      Begin PaneConfiguration = 10
         NumPanes = 2
         Configuration = "(H (1[66] 2) )"
      End
      Begin PaneConfiguration = 11
         NumPanes = 2
         Configuration = "(H (4 [60] 2))"
      End
      Begin PaneConfiguration = 12
         NumPanes = 1
         Configuration = "(H (1) )"
      End
      Begin PaneConfiguration = 13
         NumPanes = 1
         Configuration = "(V (4))"
      End
      Begin PaneConfiguration = 14
         NumPanes = 1
         Configuration = "(V (2))"
      End
      ActivePaneConfig = 0
   End
   Begin DiagramPane = 
      Begin Origin = 
         Top = 0
         Left = 0
      End
      Begin Tables = 
         Begin Table = "hx_income_statement"
            Begin Extent = 
               Top = 6
               Left = 38
               Bottom = 210
               Right = 248
            End
            DisplayFlags = 280
            TopColumn = 15
         End
         Begin Table = "hx_borrowing_target"
            Begin Extent = 
               Top = 8
               Left = 419
               Bottom = 212
               Right = 682
            End
            DisplayFlags = 280
            TopColumn = 0
         End
      End
   End
   Begin SQLPane = 
   End
   Begin DataPane = 
      Begin ParameterDefaults = ""
      End
      Begin ColumnWidths = 27
         Width = 284
         Width = 1905
         Width = 1500
         Width = 1500
         Width = 1500
         Width = 1500
         Width = 1500
         Width = 1500
         Width = 1500
         Width = 1500
         Width = 1500
         Width = 1500
         Width = 1500
         Width = 1500
         Width = 1500
         Width = 1500
         Width = 1500
         Width = 1500
         Width = 1500
         Width = 1500
         Width = 1500
         Width = 1500
         Width = 1500
         Width = 1500
         Width = 1500
         Width = 1500
         Width = 1500
      End
   End
   Begin CriteriaPane = 
      Begin ColumnWidths = 11
         Column = 1440
         Alias = 900
         Table = 1170
         Output = 720
         Append = 1400
         NewValue = 1170
         SortType = 1350
         SortOrder = 1410
         GroupBy = 1350
         Filter = 1350
         Or = 1350
         Or = 1350
         Or = 1350
      End
   End
End
' , @level0type=N'SCHEMA',@level0name=N'dbo', @level1type=N'VIEW',@level1name=N'V_incomeborr_count'
GO
EXEC sys.sp_addextendedproperty @name=N'MS_DiagramPaneCount', @value=1 , @level0type=N'SCHEMA',@level0name=N'dbo', @level1type=N'VIEW',@level1name=N'V_incomeborr_count'
GO
/****** Object:  View [dbo].[V_borrowing_Bid_records_income_statement_uc]    Script Date: 09/27/2016 10:30:12 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE VIEW [dbo].[V_borrowing_Bid_records_income_statement_uc]
AS
SELECT     dbo.hx_borrowing_target.targetid, dbo.hx_borrowing_target.loan_number, dbo.hx_borrowing_target.borrowing_title, dbo.hx_borrowing_target.borrowing_balance, 
                      dbo.hx_Bid_records.investment_amount, dbo.hx_income_statement.income_statement_id, dbo.hx_income_statement.borrower_registerid, 
                      dbo.hx_income_statement.annual_revenue, dbo.hx_income_statement.invest_time, dbo.hx_income_statement.current_investment_period, 
                      dbo.hx_income_statement.value_date, dbo.hx_income_statement.interest_payment_date, dbo.hx_income_statement.repayment_amount, 
                      dbo.hx_income_statement.repayment_period, dbo.hx_income_statement.investor_registerid, dbo.hx_income_statement.payment_status, 
                      dbo.hx_income_statement.bid_records_id, dbo.hx_borrowing_target.annual_interest_rate, dbo.hx_member_table.registerid, dbo.hx_member_table.available_balance, 
                      dbo.hx_borrowing_target.payment_options, dbo.hx_member_table.UsrCustId AS OutCustId, dbo.hx_borrowing_target.loan_management_fee, 
                      dbo.hx_income_statement.Principal, dbo.hx_income_statement.interestDay, dbo.hx_income_statement.TotalInstallments, dbo.hx_Bid_records.ordstate, 
                      dbo.hx_member_table.username, dbo.hx_member_table.realname
FROM         dbo.hx_borrowing_target INNER JOIN
                      dbo.hx_Bid_records ON dbo.hx_borrowing_target.targetid = dbo.hx_Bid_records.targetid INNER JOIN
                      dbo.hx_income_statement ON dbo.hx_Bid_records.bid_records_id = dbo.hx_income_statement.bid_records_id INNER JOIN
                      dbo.hx_member_table ON dbo.hx_Bid_records.investor_registerid = dbo.hx_member_table.registerid
WHERE     (dbo.hx_Bid_records.ordstate = 1)
GO
EXEC sys.sp_addextendedproperty @name=N'MS_DiagramPane1', @value=N'[0E232FF0-B466-11cf-A24F-00AA00A3EFFF, 1.00]
Begin DesignProperties = 
   Begin PaneConfigurations = 
      Begin PaneConfiguration = 0
         NumPanes = 4
         Configuration = "(H (1[54] 4[16] 2[2] 3) )"
      End
      Begin PaneConfiguration = 1
         NumPanes = 3
         Configuration = "(H (1 [50] 4 [25] 3))"
      End
      Begin PaneConfiguration = 2
         NumPanes = 3
         Configuration = "(H (1 [50] 2 [25] 3))"
      End
      Begin PaneConfiguration = 3
         NumPanes = 3
         Configuration = "(H (4 [30] 2 [40] 3))"
      End
      Begin PaneConfiguration = 4
         NumPanes = 2
         Configuration = "(H (1 [56] 3))"
      End
      Begin PaneConfiguration = 5
         NumPanes = 2
         Configuration = "(H (2 [66] 3))"
      End
      Begin PaneConfiguration = 6
         NumPanes = 2
         Configuration = "(H (4 [50] 3))"
      End
      Begin PaneConfiguration = 7
         NumPanes = 1
         Configuration = "(V (3))"
      End
      Begin PaneConfiguration = 8
         NumPanes = 3
         Configuration = "(H (1[56] 4[18] 2) )"
      End
      Begin PaneConfiguration = 9
         NumPanes = 2
         Configuration = "(H (1 [75] 4))"
      End
      Begin PaneConfiguration = 10
         NumPanes = 2
         Configuration = "(H (1[66] 2) )"
      End
      Begin PaneConfiguration = 11
         NumPanes = 2
         Configuration = "(H (4 [60] 2))"
      End
      Begin PaneConfiguration = 12
         NumPanes = 1
         Configuration = "(H (1) )"
      End
      Begin PaneConfiguration = 13
         NumPanes = 1
         Configuration = "(V (4))"
      End
      Begin PaneConfiguration = 14
         NumPanes = 1
         Configuration = "(V (2))"
      End
      ActivePaneConfig = 0
   End
   Begin DiagramPane = 
      Begin Origin = 
         Top = 0
         Left = -200
      End
      Begin Tables = 
         Begin Table = "hx_borrowing_target"
            Begin Extent = 
               Top = 5
               Left = 88
               Bottom = 173
               Right = 351
            End
            DisplayFlags = 280
            TopColumn = 18
         End
         Begin Table = "hx_Bid_records"
            Begin Extent = 
               Top = 0
               Left = 521
               Bottom = 153
               Right = 702
            End
            DisplayFlags = 280
            TopColumn = 10
         End
         Begin Table = "hx_income_statement"
            Begin Extent = 
               Top = 1
               Left = 736
               Bottom = 186
               Right = 946
            End
            DisplayFlags = 280
            TopColumn = 14
         End
         Begin Table = "hx_member_table"
            Begin Extent = 
               Top = 169
               Left = 360
               Bottom = 339
               Right = 547
            End
            DisplayFlags = 280
            TopColumn = 6
         End
      End
   End
   Begin SQLPane = 
   End
   Begin DataPane = 
      Begin ParameterDefaults = ""
      End
      Begin ColumnWidths = 28
         Width = 284
         Width = 1500
         Width = 1500
         Width = 1500
         Width = 2025
         Width = 3630
         Width = 1500
         Width = 1500
         Width = 1500
         Width = 1500
         Width = 2985
         Width = 1500
         Width = 1500
         Width = 1500
         Width = 1500
         Width = 1500
         Width = 1500
         Width = 1500
         Width = 1500
         Width = 1500
         Width = 1500
         Width = 1500
         Width = 1500
         Width = 1500
    ' , @level0type=N'SCHEMA',@level0name=N'dbo', @level1type=N'VIEW',@level1name=N'V_borrowing_Bid_records_income_statement_uc'
GO
EXEC sys.sp_addextendedproperty @name=N'MS_DiagramPane2', @value=N'     Width = 1500
         Width = 1500
         Width = 1500
         Width = 1500
      End
   End
   Begin CriteriaPane = 
      Begin ColumnWidths = 11
         Column = 2100
         Alias = 900
         Table = 1170
         Output = 720
         Append = 1400
         NewValue = 1170
         SortType = 1350
         SortOrder = 1410
         GroupBy = 1350
         Filter = 1350
         Or = 1350
         Or = 1350
         Or = 1350
      End
   End
End
' , @level0type=N'SCHEMA',@level0name=N'dbo', @level1type=N'VIEW',@level1name=N'V_borrowing_Bid_records_income_statement_uc'
GO
EXEC sys.sp_addextendedproperty @name=N'MS_DiagramPaneCount', @value=2 , @level0type=N'SCHEMA',@level0name=N'dbo', @level1type=N'VIEW',@level1name=N'V_borrowing_Bid_records_income_statement_uc'
GO
/****** Object:  Trigger [hx_Bid_records_insert]    Script Date: 09/27/2016 10:30:13 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
-- =============================================
-- Author:		<Author,,Name>
-- Create date: <Create Date,,>
-- Description:	<Description,,>
-- =============================================
CREATE TRIGGER [dbo].[hx_Bid_records_insert] 
   ON  [dbo].[hx_Bid_records] 
   for insert
AS 
BEGIN
	-- SET NOCOUNT ON added to prevent extra result sets from
	-- interfering with SELECT statements.
	SET NOCOUNT ON;
declare @targetid int,@investment_amount numeric(38,6),@investor_registerid int ;  --定义一个变量id

select @targetid=targetid,@investment_amount=investment_amount,@investor_registerid=investor_registerid from inserted;
update hx_borrowing_target  set fundraising_amount=fundraising_amount+@investment_amount where targetid=@targetid;
--因为有代金券这里不能直接相减，得单独处理
--update hx_member_table  set available_balance=available_balance-@investment_amount where registerid=@investor_registerid;
	
	

    -- Insert statements for trigger here

END
GO
/****** Object:  Table [dbo].[Contract_management]    Script Date: 09/27/2016 10:30:12 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
SET ANSI_PADDING ON
GO
CREATE TABLE [dbo].[Contract_management](
	[contract] [int] IDENTITY(1,1) NOT NULL,
	[loan_number] [decimal](18, 0) NOT NULL,
	[targetid] [int] NOT NULL,
	[lender_name] [varchar](50) NULL,
	[lender_username] [varchar](50) NULL,
	[lender_registerid] [int] NULL,
	[lender_id_card] [varchar](50) NULL,
	[lenders_account_name] [varchar](50) NULL,
	[lender_bank_account] [varchar](50) NULL,
	[lender_bank] [varchar](50) NULL,
	[lender_address] [varchar](100) NULL,
	[lenders_telephone] [varchar](50) NULL,
	[lenders_email] [varchar](50) NULL,
	[lendres_date_contract] [datetime] NULL,
	[borrower_registerid] [int] NULL,
	[borrower_name] [varchar](50) NULL,
	[borrower_username] [varchar](50) NULL,
	[borrower_id_card] [varchar](50) NULL,
	[borrower_account_name] [varchar](50) NULL,
	[borrower_bank_account] [varchar](50) NULL,
	[borrower_date_contract] [varchar](50) NULL,
	[borrower_bank] [varchar](50) NULL,
	[witness_name] [varchar](50) NULL,
	[witness_address] [varchar](50) NULL,
	[witness_telephone] [varchar](50) NULL,
	[witness_agent] [varchar](50) NULL,
	[witness_admid] [int] NULL,
	[witness_username] [varchar](50) NULL,
	[witness_id_card] [varchar](50) NULL,
	[witness_date_contract] [datetime] NULL,
	[surety_company_name] [varchar](100) NULL,
	[guarantee_business_icense] [varchar](50) NULL,
	[ensure_address] [varchar](50) NULL,
	[guarantee_legal_representative] [varchar](50) NULL,
	[guarantor_agent] [varchar](50) NULL,
	[guarantor_companyid] [int] NULL,
	[guarantor_agent_usernqme] [varchar](50) NULL,
	[guarantor_agent_id_card] [varchar](50) NULL,
	[guarantor_agent_idate_contract] [datetime] NULL,
	[contract_money] [varchar](max) NULL,
	[counselling_service] [varchar](max) NULL,
	[contract_amount] [numeric](38, 6) NULL,
	[suretyship_contract] [varchar](max) NULL,
	[mode_payment] [varchar](255) NULL,
	[createtime] [datetime] NULL,
	[contract_type] [int] NULL,
	[contractpath] [varchar](255) NULL,
	[bid_records_id] [int] NULL,
 CONSTRAINT [PK_CONTRACT_MANAGEMENT] PRIMARY KEY CLUSTERED 
(
	[contract] ASC
)WITH (PAD_INDEX  = OFF, STATISTICS_NORECOMPUTE  = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS  = ON, ALLOW_PAGE_LOCKS  = ON) ON [PRIMARY]
) ON [PRIMARY]
GO
SET ANSI_PADDING OFF
GO
CREATE NONCLUSTERED INDEX [IX_Contract_management] ON [dbo].[Contract_management] 
(
	[contract_type] ASC
)WITH (PAD_INDEX  = OFF, STATISTICS_NORECOMPUTE  = OFF, SORT_IN_TEMPDB = OFF, IGNORE_DUP_KEY = OFF, DROP_EXISTING = OFF, ONLINE = OFF, ALLOW_ROW_LOCKS  = ON, ALLOW_PAGE_LOCKS  = ON) ON [PRIMARY]
GO
EXEC sys.sp_addextendedproperty @name=N'MS_Description', @value=N'用于合同编号' , @level0type=N'SCHEMA',@level0name=N'dbo', @level1type=N'TABLE',@level1name=N'Contract_management', @level2type=N'COLUMN',@level2name=N'loan_number'
GO
EXEC sys.sp_addextendedproperty @name=N'MS_Description', @value=N'关联担保平台管理员id' , @level0type=N'SCHEMA',@level0name=N'dbo', @level1type=N'TABLE',@level1name=N'Contract_management', @level2type=N'COLUMN',@level2name=N'witness_admid'
GO
EXEC sys.sp_addextendedproperty @name=N'MS_Description', @value=N'关联保险公司id' , @level0type=N'SCHEMA',@level0name=N'dbo', @level1type=N'TABLE',@level1name=N'Contract_management', @level2type=N'COLUMN',@level2name=N'guarantor_companyid'
GO
EXEC sys.sp_addextendedproperty @name=N'MS_Description', @value=N'合同管理是对网站甲方(出借人):   乙方(借款人)： 丙方(见证人)： 的合同管理 合同种类分为:
   1 借款合同
    角色身份: 甲方 (出借人):   乙方 (借款人)： 丙方(见证人)： 
   
   2 出借人咨询服务协议
   角色身份: 甲方 (见证人)    乙方   (出借人):   
   
   3 保证合同
   角色身份: 甲方 （保证人 担保公司）： 乙方   (出借人):   
   ' , @level0type=N'SCHEMA',@level0name=N'dbo', @level1type=N'TABLE',@level1name=N'Contract_management'
GO
/****** Object:  Trigger [triggerStatisticsMemberInvest]    Script Date: 09/27/2016 10:30:13 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
create trigger [dbo].[triggerStatisticsMemberInvest]
on [dbo].[hx_Bid_records]
for insert
 AS
 EXEC prStatisticsMember
GO
/****** Object:  Trigger [triggerStatisticsMember]    Script Date: 09/27/2016 10:30:13 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
create trigger [dbo].[triggerStatisticsMember]
on [dbo].[hx_member_table]
for insert
 AS
 EXEC prStatisticsMember
GO
/****** Object:  Table [dbo].[province]    Script Date: 09/27/2016 10:30:13 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
SET ANSI_PADDING ON
GO
CREATE TABLE [dbo].[province](
	[id] [int] IDENTITY(1,1) NOT NULL,
	[provinceID] [int] NOT NULL,
	[province] [varchar](200) NOT NULL,
 CONSTRAINT [PK_province] PRIMARY KEY CLUSTERED 
(
	[id] ASC
)WITH (PAD_INDEX  = OFF, STATISTICS_NORECOMPUTE  = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS  = ON, ALLOW_PAGE_LOCKS  = ON) ON [PRIMARY]
) ON [PRIMARY]
GO
SET ANSI_PADDING OFF
GO
/****** Object:  StoredProcedure [dbo].[procPagination]    Script Date: 09/27/2016 10:30:13 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE PROCEDURE [dbo].[procPagination]
(
@tblName   NVarChar(255),       -- 表名
@strGetFields NVarChar(1000),  -- 需要返回的列
@fldName NVarChar(255),      -- 排序的字段名
@prKey NVarChar(255),      -- 主键
@pageSize   int ,          -- 页尺寸
@pageIndex  int ,           -- 页码
@strWhere  NVarChar(1500),  -- 查询条件(注意: 不要加where)
@sort NVarChar(255),      --排序的方法
@recordCount int OUTPUT  --总记录数(存储过程输出参数)
)
AS
declare @strSQL   NVarChar(max)       -- 主语句 
declare @strOrder NVarChar(400)        -- 排序类型
declare @TmpSelect NVarChar(600)      -- 记录统计

if @strWhere != '' 
begin
set @TmpSelect = 'select @recordCount = count(*) from '+ @tblName +' where ' + @strWhere
end
else
begin
set @TmpSelect = 'select @recordCount = count(*) from '+ @tblName
end
execute sp_executesql 
@TmpSelect,    --执行上面的sql语句
N'@recordCount int OUTPUT' ,   --执行输出数据的sql语句，output出总记录数 
@recordCount  OUTPUT
--if (@recordCount = 0)    --如果没有贴子，则返回零
  --     return 0

if @sort = 'desc'
begin 
set @strOrder = ' order by ' + @fldName +' desc'
--如果@OrderType不是，就执行降序，这句很重要！
end
else
begin 
set @strOrder = ' order by ' + @fldName +' asc'
end
 
if @pageIndex = 1
begin
if @strWhere != ''   
  begin
set @strSQL = 'select top ' + str(@pageSize) +' '+@strGetFields+ '  from ' + @tblName + ' where ' + @strWhere + ' ' + @strOrder
  end
else
  begin
set @strSQL = 'select top ' + str(@pageSize) +' '+@strGetFields+ '  from '+ @tblName + ' '+ @strOrder
  end
--如果是第一页就执行以上代码，这样会加快执行速度
end
else
begin
--以下代码赋予了@strSQL以真正执行的SQL代码
set @strSQL = 'select top ' + str(@pageSize) +' '+@strGetFields+ '  from '
+ @tblName + ' where ' + @prKey + ' not in'  + '(select top ' + str((@pageIndex-1) * @pageSize) + ' '+ @prKey + ' from ' + @tblName + '' + @strOrder + ') '+ @strOrder
 
if @strWhere != ''

set @strSQL = 'select top ' + str(@pageSize) +' '+@strGetFields+ '  from '
+ @tblName + ' where '+ @strWhere+' and ' + @prKey + ' not in'  + '(select top ' + str((@pageIndex-1) * @pageSize) + ' '+ @prKey + ' from ' + @tblName + ' where ' +@strWhere + @strOrder + ') '+ @strOrder

 
END

PRINT @strSQL
exec (@strSQL)
RETURN
GO
/****** Object:  StoredProcedure [dbo].[pagination]    Script Date: 09/27/2016 10:30:13 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
/***************************************************** 
存储过程名称 pagination 
功能:通用分页 
参数
1.表名(字符串必要参数) 
2.主键或者唯一约束字段 字符串 必要参数  
3.需不需要进行总数统计.布尔类型 可选参数默认为1。1或者true是只统计总条数,不进行查询 0或者false进行分页查询,不进行统计  
4.查询条件 字符串 可选参数 默认为无条件查询。     注意不要加where  
5.排序的字段名字符串可选参数默认按照主键排序  
6.页码 整数 可选参数 默认第1页  
7.每页大小整数 可选参数 默认每页10条记录  
8.排序类型 整数或布尔 可选参数 默认升序排序     1或true按降序排序     0或false按升序排列  
9.需要返回的列(字符串 可选参数,默认返回所有列)  
*****************************************************/ 
CREATE PROCEDURE [dbo].[pagination] 
@TableName NVARCHAR(255), -- 表名 
@PrimaryKey NVARCHAR(255),--主键或者唯一约束字段 
@StrWhere NVARCHAR(1500) = '', -- 查询条件 (注意: 不要加 where)  
@OrderField NVARCHAR(255)=@PrimaryKey, -- 排序的字段名,默认按照主键排序 
@PageIndex INT = 1, -- 页码 
@PageSize INT = 10, -- 页尺寸 
@OrderType BIT = 0 ,-- 设置排序类型, 非 0 值则降序 
@StrGetFields NVARCHAR(1000) = '*',-- 需要返回的列  
@RecordCount INT=0 OUTPUT,--输出记录总数
@PageCount INT=0 OUTPUT--输出页面总数
AS
BEGIN
	SET NOCOUNT ON;
	DECLARE @strSQL NVARCHAR(4000),@strTmp NVARCHAR(110),@strOrder NVARCHAR(400)
	IF (@StrWhere!='')
	BEGIN 
			SET @strSQL = 'select @RecordCount=count(*) from ' + @TableName + ' where '+@strWhere
	END
	ELSE
	BEGIN   
			SET @strSQL = 'select @RecordCount=count(*) from ' + @TableName
	END
	
	--统计记录总数 
	EXEC SP_EXECUTESQL @strSQL,N'@RecordCount INT OUTPUT ',@RecordCount OUTPUT;
	PRINT @RecordCount;
	--统计分页总数
	SET @PageCount = (@RecordCount+@PageSize-1)/@PageSize;
	/******  确定是升序还是降序  ******/  
	IF (@OrderType != 0)
	BEGIN   
		SET @strTmp = '<(select min'   
		SET @strOrder = 'order by ' + @OrderField +' desc'  
	END   
	ELSE  
	BEGIN
	   SET @strTmp = '>(select max'
	   SET @strOrder = 'order by ' + @OrderField +' asc'
	END   
	/*****为了加快执行速度判断一下是不是第一页******/  

	IF (@PageIndex = 1)
	BEGIN
		IF (@strWhere != '')
			 SET @strSQL ='select top ' + STR(@PageSize) +' '+@StrGetFields+ ' from ' + @TableName + ' where ' + @strWhere + ' ' + @strOrder   
		ELSE
			 SET @strSQL ='select top ' + STR(@PageSize) +' '+@strGetFields+ ' from '+ @TableName + ' '+ @strOrder  
	END  /******不是第一页******/   
	ELSE 
	BEGIN   
		IF @strWhere=''    
			SET @strSQL='select top '+STR(@PageSize)+' '+@strGetFields+' from '+ @TableName +' where '+@PrimaryKey+@strTmp+'('+@PrimaryKey+') as '+@PrimaryKey+' from (select top '+STR((@PageIndex-1)*@PageSize)+' '+@PrimaryKey+' from '+@TableName+' '+@strOrder+') as T) '+@strOrder   ELSE    SET @strSQL='select top '+STR(@PageSize)+' '+@strGetFields+' from '+ @TableName +' where '+@PrimaryKey+@strTmp+'('+@PrimaryKey+') as '+@PrimaryKey+' from (select top '+STR((@PageIndex-1)*@PageSize)+' '+@PrimaryKey+' from '+@TableName+' where '+@StrWhere+' '+@strOrder+') as T) and '+@StrWhere+' '+@strOrder     
	END  
	PRINT @strSQL 
	EXEC SP_EXECUTESQL @strSQL    
END
GO
/****** Object:  Table [dbo].[Overdue_repayment]    Script Date: 09/27/2016 10:30:13 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE TABLE [dbo].[Overdue_repayment](
	[overdue_repayment_id] [int] IDENTITY(1,1) NOT NULL,
	[repayment_plan_id] [int] NULL,
	[membertable_registerid] [int] NULL,
	[targetid] [int] NULL,
	[loan_management_fee] [numeric](38, 2) NULL,
	[ordinary_overdue_management_fees] [numeric](38, 2) NULL,
	[seriously_overdue_management_fees] [numeric](38, 2) NULL,
	[ordinary_overdue_penalty] [numeric](38, 2) NULL,
	[seriously_overdue_penalty] [numeric](38, 2) NULL,
	[actual_repayment_time] [datetime] NULL,
	[overdue_days] [int] NULL,
	[interest_state] [int] NULL,
 CONSTRAINT [PK_OVERDUE_REPAYMENT] PRIMARY KEY CLUSTERED 
(
	[overdue_repayment_id] ASC
)WITH (PAD_INDEX  = OFF, STATISTICS_NORECOMPUTE  = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS  = ON, ALLOW_PAGE_LOCKS  = ON) ON [PRIMARY]
) ON [PRIMARY]
GO
EXEC sys.sp_addextendedproperty @name=N'MS_Description', @value=N'0 初始值  1 罚息未还  2 罚息还清
   产生逾期时状态应改为1  ' , @level0type=N'SCHEMA',@level0name=N'dbo', @level1type=N'TABLE',@level1name=N'Overdue_repayment', @level2type=N'COLUMN',@level2name=N'interest_state'
GO
EXEC sys.sp_addextendedproperty @name=N'MS_Description', @value=N'与用户表，标的表 还款计划表相关联' , @level0type=N'SCHEMA',@level0name=N'dbo', @level1type=N'TABLE',@level1name=N'Overdue_repayment'
GO
/****** Object:  Table [dbo].[NormalArea]    Script Date: 09/27/2016 10:30:13 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE TABLE [dbo].[NormalArea](
	[AreaId] [int] NOT NULL,
	[AreaCode] [nvarchar](100) NOT NULL,
	[AreaName] [nvarchar](100) NOT NULL,
	[ParentId] [int] NOT NULL,
	[AreaLevel] [int] NOT NULL,
	[AreaOrder] [int] NOT NULL,
	[AreaNameEn] [nvarchar](100) NOT NULL,
	[AreaShortNameEn] [nvarchar](10) NOT NULL
) ON [PRIMARY]
GO
/****** Object:  Table [dbo].[LuckDrawRecord]    Script Date: 09/27/2016 10:30:13 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE TABLE [dbo].[LuckDrawRecord](
	[Ldre_ID] [int] IDENTITY(1,1) NOT NULL,
	[Ldre_UserID] [int] NOT NULL,
	[Ldre_AwardID] [int] NOT NULL,
	[Ldre_AwardName] [nvarchar](50) NOT NULL,
	[Ldre_CreatTime] [datetime] NOT NULL,
	[Ldre_AwardType] [int] NOT NULL,
	[Ldre_OrderID] [nvarchar](500) NULL,
 CONSTRAINT [PK_LuckDrawRecord] PRIMARY KEY CLUSTERED 
(
	[Ldre_ID] ASC
)WITH (PAD_INDEX  = OFF, STATISTICS_NORECOMPUTE  = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS  = ON, ALLOW_PAGE_LOCKS  = ON) ON [PRIMARY]
) ON [PRIMARY]
GO
EXEC sys.sp_addextendedproperty @name=N'MS_Description', @value=N'抽奖记录编号' , @level0type=N'SCHEMA',@level0name=N'dbo', @level1type=N'TABLE',@level1name=N'LuckDrawRecord', @level2type=N'COLUMN',@level2name=N'Ldre_ID'
GO
EXEC sys.sp_addextendedproperty @name=N'MS_Description', @value=N'用户编号' , @level0type=N'SCHEMA',@level0name=N'dbo', @level1type=N'TABLE',@level1name=N'LuckDrawRecord', @level2type=N'COLUMN',@level2name=N'Ldre_UserID'
GO
EXEC sys.sp_addextendedproperty @name=N'MS_Description', @value=N'奖品编号' , @level0type=N'SCHEMA',@level0name=N'dbo', @level1type=N'TABLE',@level1name=N'LuckDrawRecord', @level2type=N'COLUMN',@level2name=N'Ldre_AwardID'
GO
EXEC sys.sp_addextendedproperty @name=N'MS_Description', @value=N'奖品名称' , @level0type=N'SCHEMA',@level0name=N'dbo', @level1type=N'TABLE',@level1name=N'LuckDrawRecord', @level2type=N'COLUMN',@level2name=N'Ldre_AwardName'
GO
EXEC sys.sp_addextendedproperty @name=N'MS_Description', @value=N'中奖时间' , @level0type=N'SCHEMA',@level0name=N'dbo', @level1type=N'TABLE',@level1name=N'LuckDrawRecord', @level2type=N'COLUMN',@level2name=N'Ldre_CreatTime'
GO
EXEC sys.sp_addextendedproperty @name=N'MS_Description', @value=N'奖品类型（0-现金（未发）；1-代金券；2-加息券；3-谢谢参与；4-现金（已发））' , @level0type=N'SCHEMA',@level0name=N'dbo', @level1type=N'TABLE',@level1name=N'LuckDrawRecord', @level2type=N'COLUMN',@level2name=N'Ldre_AwardType'
GO
EXEC sys.sp_addextendedproperty @name=N'MS_Description', @value=N'汇付交易订单号（奖品类型为4时该字段有值）' , @level0type=N'SCHEMA',@level0name=N'dbo', @level1type=N'TABLE',@level1name=N'LuckDrawRecord', @level2type=N'COLUMN',@level2name=N'Ldre_OrderID'
GO
/****** Object:  View [dbo].[V_LuckDrawData]    Script Date: 09/27/2016 10:30:13 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE VIEW [dbo].[V_LuckDrawData]
AS
SELECT     dbo.LuckDrawRecord.Ldre_ID AS ID, dbo.LuckDrawRecord.Ldre_AwardName AS AwardName, dbo.LuckDrawRecord.Ldre_CreatTime AS AwardTime, 
                      dbo.LuckDrawRecord.Ldre_AwardType AS AwardType, dbo.hx_member_table.username, dbo.LuckDrawRecord.Ldre_AwardID AS AwardID
FROM         dbo.LuckDrawRecord LEFT OUTER JOIN
                      dbo.hx_member_table ON dbo.LuckDrawRecord.Ldre_UserID = dbo.hx_member_table.registerid
GO
EXEC sys.sp_addextendedproperty @name=N'MS_DiagramPane1', @value=N'[0E232FF0-B466-11cf-A24F-00AA00A3EFFF, 1.00]
Begin DesignProperties = 
   Begin PaneConfigurations = 
      Begin PaneConfiguration = 0
         NumPanes = 4
         Configuration = "(H (1[47] 4[19] 2[27] 3) )"
      End
      Begin PaneConfiguration = 1
         NumPanes = 3
         Configuration = "(H (1 [50] 4 [25] 3))"
      End
      Begin PaneConfiguration = 2
         NumPanes = 3
         Configuration = "(H (1 [50] 2 [25] 3))"
      End
      Begin PaneConfiguration = 3
         NumPanes = 3
         Configuration = "(H (4 [30] 2 [40] 3))"
      End
      Begin PaneConfiguration = 4
         NumPanes = 2
         Configuration = "(H (1 [56] 3))"
      End
      Begin PaneConfiguration = 5
         NumPanes = 2
         Configuration = "(H (2 [66] 3))"
      End
      Begin PaneConfiguration = 6
         NumPanes = 2
         Configuration = "(H (4 [50] 3))"
      End
      Begin PaneConfiguration = 7
         NumPanes = 1
         Configuration = "(V (3))"
      End
      Begin PaneConfiguration = 8
         NumPanes = 3
         Configuration = "(H (1[56] 4[18] 2) )"
      End
      Begin PaneConfiguration = 9
         NumPanes = 2
         Configuration = "(H (1 [75] 4))"
      End
      Begin PaneConfiguration = 10
         NumPanes = 2
         Configuration = "(H (1[66] 2) )"
      End
      Begin PaneConfiguration = 11
         NumPanes = 2
         Configuration = "(H (4 [60] 2))"
      End
      Begin PaneConfiguration = 12
         NumPanes = 1
         Configuration = "(H (1) )"
      End
      Begin PaneConfiguration = 13
         NumPanes = 1
         Configuration = "(V (4))"
      End
      Begin PaneConfiguration = 14
         NumPanes = 1
         Configuration = "(V (2))"
      End
      ActivePaneConfig = 0
   End
   Begin DiagramPane = 
      Begin Origin = 
         Top = 0
         Left = -67
      End
      Begin Tables = 
         Begin Table = "LuckDrawRecord"
            Begin Extent = 
               Top = 47
               Left = 292
               Bottom = 186
               Right = 484
            End
            DisplayFlags = 280
            TopColumn = 0
         End
         Begin Table = "hx_member_table"
            Begin Extent = 
               Top = 128
               Left = 47
               Bottom = 267
               Right = 266
            End
            DisplayFlags = 280
            TopColumn = 0
         End
      End
   End
   Begin SQLPane = 
   End
   Begin DataPane = 
      Begin ParameterDefaults = ""
      End
      Begin ColumnWidths = 9
         Width = 284
         Width = 1500
         Width = 1500
         Width = 1500
         Width = 1500
         Width = 1500
         Width = 1500
         Width = 1500
         Width = 1500
      End
   End
   Begin CriteriaPane = 
      Begin ColumnWidths = 11
         Column = 1440
         Alias = 900
         Table = 1170
         Output = 720
         Append = 1400
         NewValue = 1170
         SortType = 1350
         SortOrder = 1410
         GroupBy = 1350
         Filter = 1350
         Or = 1350
         Or = 1350
         Or = 1350
      End
   End
End
' , @level0type=N'SCHEMA',@level0name=N'dbo', @level1type=N'VIEW',@level1name=N'V_LuckDrawData'
GO
EXEC sys.sp_addextendedproperty @name=N'MS_DiagramPaneCount', @value=1 , @level0type=N'SCHEMA',@level0name=N'dbo', @level1type=N'VIEW',@level1name=N'V_LuckDrawData'
GO
/****** Object:  Table [dbo].[hx_UsrBindCardC]    Script Date: 09/27/2016 10:30:13 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
SET ANSI_PADDING ON
GO
CREATE TABLE [dbo].[hx_UsrBindCardC](
	[UsrBindCardID] [int] IDENTITY(1,1) NOT NULL,
	[UsrCustId] [varchar](50) NULL,
	[OpenAcctId] [varchar](50) NULL,
	[OpenBankId] [varchar](50) NULL,
	[defCard] [int] NULL,
 CONSTRAINT [PK_HX_USRBINDCARDC] PRIMARY KEY CLUSTERED 
(
	[UsrBindCardID] ASC
)WITH (PAD_INDEX  = OFF, STATISTICS_NORECOMPUTE  = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS  = ON, ALLOW_PAGE_LOCKS  = ON) ON [PRIMARY]
) ON [PRIMARY]
GO
SET ANSI_PADDING OFF
GO
CREATE NONCLUSTERED INDEX [IX_hx_UsrBindCardC] ON [dbo].[hx_UsrBindCardC] 
(
	[OpenBankId] ASC
)WITH (PAD_INDEX  = OFF, STATISTICS_NORECOMPUTE  = OFF, SORT_IN_TEMPDB = OFF, IGNORE_DUP_KEY = OFF, DROP_EXISTING = OFF, ONLINE = OFF, ALLOW_ROW_LOCKS  = ON, ALLOW_PAGE_LOCKS  = ON) ON [PRIMARY]
GO
CREATE NONCLUSTERED INDEX [IX_hx_UsrBindCardC_1] ON [dbo].[hx_UsrBindCardC] 
(
	[UsrCustId] ASC
)WITH (PAD_INDEX  = OFF, STATISTICS_NORECOMPUTE  = OFF, SORT_IN_TEMPDB = OFF, IGNORE_DUP_KEY = OFF, DROP_EXISTING = OFF, ONLINE = OFF, ALLOW_ROW_LOCKS  = ON, ALLOW_PAGE_LOCKS  = ON) ON [PRIMARY]
GO
EXEC sys.sp_addextendedproperty @name=N'MS_Description', @value=N'0 默认   1设置为默认卡' , @level0type=N'SCHEMA',@level0name=N'dbo', @level1type=N'TABLE',@level1name=N'hx_UsrBindCardC', @level2type=N'COLUMN',@level2name=N'defCard'
GO
/****** Object:  Table [dbo].[hx_Test_records]    Script Date: 09/27/2016 10:30:13 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
SET ANSI_PADDING ON
GO
CREATE TABLE [dbo].[hx_Test_records](
	[TrecordsID] [int] IDENTITY(1,1) NOT NULL,
	[Username] [varchar](50) NULL,
	[mobile] [varchar](50) NULL,
	[amt] [decimal](18, 2) NULL,
	[datetime] [datetime] NULL,
	[targetid] [int] NULL,
 CONSTRAINT [PK_hx_Test_records] PRIMARY KEY CLUSTERED 
(
	[TrecordsID] ASC
)WITH (PAD_INDEX  = OFF, STATISTICS_NORECOMPUTE  = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS  = ON, ALLOW_PAGE_LOCKS  = ON) ON [PRIMARY]
) ON [PRIMARY]
GO
SET ANSI_PADDING OFF
GO
CREATE NONCLUSTERED INDEX [testretargetid] ON [dbo].[hx_Test_records] 
(
	[targetid] ASC
)WITH (PAD_INDEX  = OFF, STATISTICS_NORECOMPUTE  = OFF, SORT_IN_TEMPDB = OFF, IGNORE_DUP_KEY = OFF, DROP_EXISTING = OFF, ONLINE = OFF, ALLOW_ROW_LOCKS  = ON, ALLOW_PAGE_LOCKS  = ON) ON [PRIMARY]
GO
/****** Object:  Table [dbo].[hx_td_web_type]    Script Date: 09/27/2016 10:30:13 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
SET ANSI_PADDING OFF
GO
CREATE TABLE [dbo].[hx_td_web_type](
	[menu_id] [int] IDENTITY(1,1) NOT NULL,
	[menu_name] [varchar](50) NULL,
	[parentid] [int] NULL,
	[parentpath] [varchar](50) NULL,
	[depath] [int] NULL,
	[rootid] [int] NULL,
	[child] [int] NULL,
	[previd] [int] NULL,
	[nextid] [int] NULL,
	[orderid] [int] NULL,
	[createtime] [datetime] NULL,
	[path1] [varchar](150) NULL,
	[path2] [varchar](150) NULL,
	[path3] [varchar](150) NULL,
	[path4] [varchar](150) NULL,
 CONSTRAINT [PK_hx_td_web_type] PRIMARY KEY CLUSTERED 
(
	[menu_id] ASC
)WITH (PAD_INDEX  = OFF, STATISTICS_NORECOMPUTE  = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS  = ON, ALLOW_PAGE_LOCKS  = ON) ON [PRIMARY]
) ON [PRIMARY]
GO
SET ANSI_PADDING OFF
GO
CREATE NONCLUSTERED INDEX [IX_hx_td_web_type] ON [dbo].[hx_td_web_type] 
(
	[rootid] ASC
)WITH (PAD_INDEX  = OFF, STATISTICS_NORECOMPUTE  = OFF, SORT_IN_TEMPDB = OFF, IGNORE_DUP_KEY = OFF, DROP_EXISTING = OFF, ONLINE = OFF, ALLOW_ROW_LOCKS  = ON, ALLOW_PAGE_LOCKS  = ON) ON [PRIMARY]
GO
/****** Object:  Table [dbo].[hx_td_web_Ad_type]    Script Date: 09/27/2016 10:30:13 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
SET ANSI_PADDING ON
GO
CREATE TABLE [dbo].[hx_td_web_Ad_type](
	[AdTypeId] [int] IDENTITY(1,1) NOT NULL,
	[AdtypeName] [varchar](50) NULL,
	[createtime] [datetime] NULL,
 CONSTRAINT [PK_HX_TD_WEB_AD_TYPE] PRIMARY KEY CLUSTERED 
(
	[AdTypeId] ASC
)WITH (PAD_INDEX  = OFF, STATISTICS_NORECOMPUTE  = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS  = ON, ALLOW_PAGE_LOCKS  = ON) ON [PRIMARY]
) ON [PRIMARY]
GO
SET ANSI_PADDING OFF
GO
/****** Object:  Table [dbo].[hx_td_Userinvitation]    Script Date: 09/27/2016 10:30:13 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
SET ANSI_PADDING ON
GO
CREATE TABLE [dbo].[hx_td_Userinvitation](
	[invitationid] [int] IDENTITY(1,1) NOT NULL,
	[invcode] [varchar](50) NULL,
	[invtime] [datetime] NULL,
	[invpersonid] [int] NULL,
	[Invpeopleid] [int] NULL,
	[InvitesStates] [int] NULL,
	[Invitereward] [decimal](8, 2) NULL,
 CONSTRAINT [PK_hx_td_Userinvitation] PRIMARY KEY CLUSTERED 
(
	[invitationid] ASC
)WITH (PAD_INDEX  = OFF, STATISTICS_NORECOMPUTE  = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS  = ON, ALLOW_PAGE_LOCKS  = ON) ON [PRIMARY]
) ON [PRIMARY]
GO
SET ANSI_PADDING OFF
GO
CREATE NONCLUSTERED INDEX [IX_hx_td_Userinvitation] ON [dbo].[hx_td_Userinvitation] 
(
	[invpersonid] ASC
)WITH (PAD_INDEX  = OFF, STATISTICS_NORECOMPUTE  = OFF, SORT_IN_TEMPDB = OFF, IGNORE_DUP_KEY = OFF, DROP_EXISTING = OFF, ONLINE = OFF, ALLOW_ROW_LOCKS  = ON, ALLOW_PAGE_LOCKS  = ON) ON [PRIMARY]
GO
EXEC sys.sp_addextendedproperty @name=N'MS_Description', @value=N'0 邀请码未使用   1已使用' , @level0type=N'SCHEMA',@level0name=N'dbo', @level1type=N'TABLE',@level1name=N'hx_td_Userinvitation', @level2type=N'COLUMN',@level2name=N'InvitesStates'
GO
/****** Object:  View [dbo].[ViewUserCenter]    Script Date: 09/27/2016 10:30:13 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
--视图
 Create view [dbo].[ViewUserCenter] 
  as
  select [registerid]
  ,[username]
  ,[UsrCustId]
  ,[isrealname]
  ,[registration_time]
  ,[mobile]
  ,[realname]
  ,[available_balance]
  ,[usertypes]
  ,(select count(1) from hx_Bid_records b where a.registerid=b.investor_registerid) as investCount
  ,(CASE WHEN 
   NOT EXISTS (SELECT invpersonid FROM hx_td_Userinvitation lb  WHERE  lb.invpersonid=a.registerid) THEN 0 ELSE 1 END ) AS IsCPS   
  FROM  [hx_member_table] a
GO
/****** Object:  View [dbo].[V_UserInvitation]    Script Date: 09/27/2016 10:30:13 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE VIEW [dbo].[V_UserInvitation]
AS
SELECT     dbo.hx_td_Userinvitation.invpersonid, dbo.hx_member_table.username, dbo.hx_td_Userinvitation.invitationid, dbo.hx_td_Userinvitation.invcode, 
                      dbo.hx_td_Userinvitation.invtime, dbo.hx_td_Userinvitation.Invpeopleid, dbo.hx_td_Userinvitation.InvitesStates, dbo.hx_td_Userinvitation.Invitereward, 
                      dbo.hx_member_table.userstate, dbo.hx_member_table.registration_time, b.invest_time, b.investment_amount
FROM         dbo.hx_td_Userinvitation INNER JOIN
                      dbo.hx_member_table ON dbo.hx_td_Userinvitation.invpersonid = dbo.hx_member_table.registerid LEFT OUTER JOIN
                      dbo.hx_Bid_records AS b ON b.investor_registerid = dbo.hx_member_table.registerid AND b.bid_records_id =
                          (SELECT     MIN(bid_records_id) AS Expr1
                            FROM          dbo.hx_Bid_records
                            WHERE      (ordstate = 1) AND (investor_registerid = b.investor_registerid))
GO
EXEC sys.sp_addextendedproperty @name=N'MS_DiagramPane1', @value=N'[0E232FF0-B466-11cf-A24F-00AA00A3EFFF, 1.00]
Begin DesignProperties = 
   Begin PaneConfigurations = 
      Begin PaneConfiguration = 0
         NumPanes = 4
         Configuration = "(H (1[40] 4[20] 2[20] 3) )"
      End
      Begin PaneConfiguration = 1
         NumPanes = 3
         Configuration = "(H (1 [50] 4 [25] 3))"
      End
      Begin PaneConfiguration = 2
         NumPanes = 3
         Configuration = "(H (1 [50] 2 [25] 3))"
      End
      Begin PaneConfiguration = 3
         NumPanes = 3
         Configuration = "(H (4 [30] 2 [40] 3))"
      End
      Begin PaneConfiguration = 4
         NumPanes = 2
         Configuration = "(H (1 [56] 3))"
      End
      Begin PaneConfiguration = 5
         NumPanes = 2
         Configuration = "(H (2 [66] 3))"
      End
      Begin PaneConfiguration = 6
         NumPanes = 2
         Configuration = "(H (4 [50] 3))"
      End
      Begin PaneConfiguration = 7
         NumPanes = 1
         Configuration = "(V (3))"
      End
      Begin PaneConfiguration = 8
         NumPanes = 3
         Configuration = "(H (1[56] 4[18] 2) )"
      End
      Begin PaneConfiguration = 9
         NumPanes = 2
         Configuration = "(H (1 [75] 4))"
      End
      Begin PaneConfiguration = 10
         NumPanes = 2
         Configuration = "(H (1[66] 2) )"
      End
      Begin PaneConfiguration = 11
         NumPanes = 2
         Configuration = "(H (4 [60] 2))"
      End
      Begin PaneConfiguration = 12
         NumPanes = 1
         Configuration = "(H (1) )"
      End
      Begin PaneConfiguration = 13
         NumPanes = 1
         Configuration = "(V (4))"
      End
      Begin PaneConfiguration = 14
         NumPanes = 1
         Configuration = "(V (2))"
      End
      ActivePaneConfig = 0
   End
   Begin DiagramPane = 
      Begin Origin = 
         Top = 0
         Left = 0
      End
      Begin Tables = 
         Begin Table = "hx_td_Userinvitation"
            Begin Extent = 
               Top = 28
               Left = 429
               Bottom = 192
               Right = 679
            End
            DisplayFlags = 280
            TopColumn = 0
         End
         Begin Table = "hx_member_table"
            Begin Extent = 
               Top = 6
               Left = 90
               Bottom = 191
               Right = 277
            End
            DisplayFlags = 280
            TopColumn = 17
         End
         Begin Table = "b"
            Begin Extent = 
               Top = 6
               Left = 717
               Bottom = 114
               Right = 898
            End
            DisplayFlags = 280
            TopColumn = 0
         End
      End
   End
   Begin SQLPane = 
   End
   Begin DataPane = 
      Begin ParameterDefaults = ""
      End
      Begin ColumnWidths = 9
         Width = 284
         Width = 1500
         Width = 1500
         Width = 1500
         Width = 1500
         Width = 1500
         Width = 1500
         Width = 1500
         Width = 1500
      End
   End
   Begin CriteriaPane = 
      Begin ColumnWidths = 11
         Column = 1440
         Alias = 900
         Table = 1170
         Output = 720
         Append = 1400
         NewValue = 1170
         SortType = 1350
         SortOrder = 1410
         GroupBy = 1350
         Filter = 1350
         Or = 1350
         Or = 1350
         Or = 1350
      End
   End
End
' , @level0type=N'SCHEMA',@level0name=N'dbo', @level1type=N'VIEW',@level1name=N'V_UserInvitation'
GO
EXEC sys.sp_addextendedproperty @name=N'MS_DiagramPaneCount', @value=1 , @level0type=N'SCHEMA',@level0name=N'dbo', @level1type=N'VIEW',@level1name=N'V_UserInvitation'
GO
/****** Object:  Table [dbo].[hx_td_UserCash]    Script Date: 09/27/2016 10:30:13 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
SET ANSI_PADDING ON
GO
CREATE TABLE [dbo].[hx_td_UserCash](
	[UserCashId] [int] IDENTITY(1,1) NOT NULL,
	[registerid] [int] NULL,
	[UsrCustId] [varchar](50) NULL,
	[TransAmt] [decimal](38, 2) NULL,
	[FeeAmt] [decimal](38, 2) NULL,
	[OrdId] [varchar](50) NULL,
	[OrdIdTime] [datetime] NULL,
	[OrdIdState] [int] NULL,
	[OperTime] [datetime] NULL,
	[Reason] [varchar](500) NULL,
	[Remarks] [varchar](500) NULL,
	[TransState] [int] NULL,
	[OpenAcctId] [varchar](50) NULL,
	[OpenBankId] [varchar](50) NULL,
	[FeeObjFlag] [varchar](50) NULL,
 CONSTRAINT [PK_HX_TD_USERCASH] PRIMARY KEY CLUSTERED 
(
	[UserCashId] ASC
)WITH (PAD_INDEX  = OFF, STATISTICS_NORECOMPUTE  = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS  = ON, ALLOW_PAGE_LOCKS  = ON) ON [PRIMARY]
) ON [PRIMARY]
GO
SET ANSI_PADDING OFF
GO
CREATE NONCLUSTERED INDEX [IX_hx_td_UserCash] ON [dbo].[hx_td_UserCash] 
(
	[OpenBankId] ASC
)WITH (PAD_INDEX  = OFF, STATISTICS_NORECOMPUTE  = OFF, SORT_IN_TEMPDB = OFF, IGNORE_DUP_KEY = OFF, DROP_EXISTING = OFF, ONLINE = OFF, ALLOW_ROW_LOCKS  = ON, ALLOW_PAGE_LOCKS  = ON) ON [PRIMARY]
GO
CREATE NONCLUSTERED INDEX [IX_hx_td_UserCash_1] ON [dbo].[hx_td_UserCash] 
(
	[registerid] ASC
)WITH (PAD_INDEX  = OFF, STATISTICS_NORECOMPUTE  = OFF, SORT_IN_TEMPDB = OFF, IGNORE_DUP_KEY = OFF, DROP_EXISTING = OFF, ONLINE = OFF, ALLOW_ROW_LOCKS  = ON, ALLOW_PAGE_LOCKS  = ON) ON [PRIMARY]
GO
EXEC sys.sp_addextendedproperty @name=N'MS_Description', @value=N'由汇付生成的唯一标识' , @level0type=N'SCHEMA',@level0name=N'dbo', @level1type=N'TABLE',@level1name=N'hx_td_UserCash', @level2type=N'COLUMN',@level2name=N'UsrCustId'
GO
EXEC sys.sp_addextendedproperty @name=N'MS_Description', @value=N'0 待审核 1待付款  3 已付款 4未通过(必须填写原因)' , @level0type=N'SCHEMA',@level0name=N'dbo', @level1type=N'TABLE',@level1name=N'hx_td_UserCash', @level2type=N'COLUMN',@level2name=N'OrdIdState'
GO
EXEC sys.sp_addextendedproperty @name=N'MS_Description', @value=N'999 处理中(默认)      400 取现失败    000成功' , @level0type=N'SCHEMA',@level0name=N'dbo', @level1type=N'TABLE',@level1name=N'hx_td_UserCash', @level2type=N'COLUMN',@level2name=N'TransState'
GO
/****** Object:  Table [dbo].[hx_td_System_message]    Script Date: 09/27/2016 10:30:13 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
SET ANSI_PADDING ON
GO
CREATE TABLE [dbo].[hx_td_System_message](
	[Messageid] [int] IDENTITY(1,1) NOT NULL,
	[MTitle] [varchar](255) NULL,
	[PubTime] [datetime] NULL,
	[MContext] [varchar](800) NULL,
	[Mstate] [int] NULL,
	[MUrl] [varchar](255) NULL,
	[MReg] [int] NULL,
	[Mtype] [int] NULL,
 CONSTRAINT [PK_HX_TD_SYSTEM_MESSAGE] PRIMARY KEY CLUSTERED 
(
	[Messageid] ASC
)WITH (PAD_INDEX  = OFF, STATISTICS_NORECOMPUTE  = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS  = ON, ALLOW_PAGE_LOCKS  = ON) ON [PRIMARY]
) ON [PRIMARY]
GO
SET ANSI_PADDING OFF
GO
/****** Object:  Table [dbo].[hx_td_SMSEmail]    Script Date: 09/27/2016 10:30:13 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
SET ANSI_PADDING ON
GO
CREATE TABLE [dbo].[hx_td_SMSEmail](
	[SmsEmailId] [int] IDENTITY(1,1) NOT NULL,
	[SmsEname] [varchar](50) NULL,
	[SEContext] [varchar](max) NULL,
	[SEtype] [int] NULL,
 CONSTRAINT [PK_HX_TD_SMSEMAIL] PRIMARY KEY CLUSTERED 
(
	[SmsEmailId] ASC
)WITH (PAD_INDEX  = OFF, STATISTICS_NORECOMPUTE  = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS  = ON, ALLOW_PAGE_LOCKS  = ON) ON [PRIMARY]
) ON [PRIMARY]
GO
SET ANSI_PADDING OFF
GO
EXEC sys.sp_addextendedproperty @name=N'MS_Description', @value=N'0 是邮件类别
   1 短信类别
   
   ' , @level0type=N'SCHEMA',@level0name=N'dbo', @level1type=N'TABLE',@level1name=N'hx_td_SMSEmail', @level2type=N'COLUMN',@level2name=N'SEContext'
GO
/****** Object:  Table [dbo].[hx_td_SMS_record]    Script Date: 09/27/2016 10:30:13 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
SET ANSI_PADDING ON
GO
CREATE TABLE [dbo].[hx_td_SMS_record](
	[sms_record_id] [int] IDENTITY(1,1) NOT NULL,
	[senduserid] [int] NULL,
	[phone_number] [varchar](11) NULL,
	[smscontext] [varchar](4000) NULL,
	[smstype] [int] NULL,
	[sendtime] [datetime] NULL,
	[orderid] [decimal](28, 0) NULL,
	[vcode] [varchar](50) NULL,
	[hits] [int] NULL,
	[ip] [varchar](50) NULL,
 CONSTRAINT [PK_HX_TD_SMS_RECORD] PRIMARY KEY CLUSTERED 
(
	[sms_record_id] ASC
)WITH (PAD_INDEX  = OFF, STATISTICS_NORECOMPUTE  = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS  = ON, ALLOW_PAGE_LOCKS  = ON) ON [PRIMARY]
) ON [PRIMARY]
GO
SET ANSI_PADDING OFF
GO
CREATE NONCLUSTERED INDEX [IX_hx_td_SMS_record] ON [dbo].[hx_td_SMS_record] 
(
	[senduserid] ASC
)WITH (PAD_INDEX  = OFF, STATISTICS_NORECOMPUTE  = OFF, SORT_IN_TEMPDB = OFF, IGNORE_DUP_KEY = OFF, DROP_EXISTING = OFF, ONLINE = OFF, ALLOW_ROW_LOCKS  = ON, ALLOW_PAGE_LOCKS  = ON) ON [PRIMARY]
GO
/****** Object:  View [dbo].[V_SMS_Record]    Script Date: 09/27/2016 10:30:13 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE VIEW [dbo].[V_SMS_Record]
AS
SELECT     dbo.hx_td_SMS_record.sms_record_id, dbo.hx_td_SMS_record.senduserid, dbo.hx_td_SMS_record.smscontext, dbo.hx_td_SMS_record.phone_number, 
                      dbo.hx_td_SMS_record.smstype, dbo.hx_td_SMS_record.orderid, dbo.hx_td_SMS_record.sendtime, dbo.hx_td_SMS_record.vcode, dbo.hx_member_table.registerid, 
                      dbo.hx_member_table.username, dbo.hx_member_table.realname
FROM         dbo.hx_td_SMS_record INNER JOIN
                      dbo.hx_member_table ON dbo.hx_td_SMS_record.senduserid = dbo.hx_member_table.registerid
GO
EXEC sys.sp_addextendedproperty @name=N'MS_DiagramPane1', @value=N'[0E232FF0-B466-11cf-A24F-00AA00A3EFFF, 1.00]
Begin DesignProperties = 
   Begin PaneConfigurations = 
      Begin PaneConfiguration = 0
         NumPanes = 4
         Configuration = "(H (1[27] 4[35] 2[3] 3) )"
      End
      Begin PaneConfiguration = 1
         NumPanes = 3
         Configuration = "(H (1 [50] 4 [25] 3))"
      End
      Begin PaneConfiguration = 2
         NumPanes = 3
         Configuration = "(H (1 [50] 2 [25] 3))"
      End
      Begin PaneConfiguration = 3
         NumPanes = 3
         Configuration = "(H (4 [30] 2 [40] 3))"
      End
      Begin PaneConfiguration = 4
         NumPanes = 2
         Configuration = "(H (1 [56] 3))"
      End
      Begin PaneConfiguration = 5
         NumPanes = 2
         Configuration = "(H (2 [66] 3))"
      End
      Begin PaneConfiguration = 6
         NumPanes = 2
         Configuration = "(H (4 [50] 3))"
      End
      Begin PaneConfiguration = 7
         NumPanes = 1
         Configuration = "(V (3))"
      End
      Begin PaneConfiguration = 8
         NumPanes = 3
         Configuration = "(H (1[56] 4[18] 2) )"
      End
      Begin PaneConfiguration = 9
         NumPanes = 2
         Configuration = "(H (1 [75] 4))"
      End
      Begin PaneConfiguration = 10
         NumPanes = 2
         Configuration = "(H (1[66] 2) )"
      End
      Begin PaneConfiguration = 11
         NumPanes = 2
         Configuration = "(H (4 [60] 2))"
      End
      Begin PaneConfiguration = 12
         NumPanes = 1
         Configuration = "(H (1) )"
      End
      Begin PaneConfiguration = 13
         NumPanes = 1
         Configuration = "(V (4))"
      End
      Begin PaneConfiguration = 14
         NumPanes = 1
         Configuration = "(V (2))"
      End
      ActivePaneConfig = 0
   End
   Begin DiagramPane = 
      Begin Origin = 
         Top = 0
         Left = 0
      End
      Begin Tables = 
         Begin Table = "hx_td_SMS_record"
            Begin Extent = 
               Top = 6
               Left = 38
               Bottom = 186
               Right = 190
            End
            DisplayFlags = 280
            TopColumn = 0
         End
         Begin Table = "hx_member_table"
            Begin Extent = 
               Top = 6
               Left = 228
               Bottom = 132
               Right = 415
            End
            DisplayFlags = 280
            TopColumn = 1
         End
      End
   End
   Begin SQLPane = 
   End
   Begin DataPane = 
      Begin ParameterDefaults = ""
      End
      Begin ColumnWidths = 9
         Width = 284
         Width = 1500
         Width = 1500
         Width = 1500
         Width = 1500
         Width = 1500
         Width = 1500
         Width = 1500
         Width = 1500
      End
   End
   Begin CriteriaPane = 
      Begin ColumnWidths = 11
         Column = 1440
         Alias = 900
         Table = 1170
         Output = 720
         Append = 1400
         NewValue = 1170
         SortType = 1350
         SortOrder = 1410
         GroupBy = 1350
         Filter = 1350
         Or = 1350
         Or = 1350
         Or = 1350
      End
   End
End
' , @level0type=N'SCHEMA',@level0name=N'dbo', @level1type=N'VIEW',@level1name=N'V_SMS_Record'
GO
EXEC sys.sp_addextendedproperty @name=N'MS_DiagramPaneCount', @value=1 , @level0type=N'SCHEMA',@level0name=N'dbo', @level1type=N'VIEW',@level1name=N'V_SMS_Record'
GO
/****** Object:  Table [dbo].[hx_td_reviewremarks]    Script Date: 09/27/2016 10:30:13 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
SET ANSI_PADDING ON
GO
CREATE TABLE [dbo].[hx_td_reviewremarks](
	[reviewid] [int] IDENTITY(1,1) NOT NULL,
	[targetid] [int] NULL,
	[tender_state] [int] NULL,
	[reviewremarks] [varchar](1000) NULL,
	[reviewtime] [datetime] NULL,
	[admin_operator] [int] NULL,
 CONSTRAINT [PK_HX_TD_REVIEWREMARKS] PRIMARY KEY CLUSTERED 
(
	[reviewid] ASC
)WITH (PAD_INDEX  = OFF, STATISTICS_NORECOMPUTE  = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS  = ON, ALLOW_PAGE_LOCKS  = ON) ON [PRIMARY]
) ON [PRIMARY]
GO
SET ANSI_PADDING OFF
GO
CREATE NONCLUSTERED INDEX [IX_hx_td_reviewremarks] ON [dbo].[hx_td_reviewremarks] 
(
	[targetid] ASC
)WITH (PAD_INDEX  = OFF, STATISTICS_NORECOMPUTE  = OFF, SORT_IN_TEMPDB = OFF, IGNORE_DUP_KEY = OFF, DROP_EXISTING = OFF, ONLINE = OFF, ALLOW_ROW_LOCKS  = ON, ALLOW_PAGE_LOCKS  = ON) ON [PRIMARY]
GO
CREATE NONCLUSTERED INDEX [IX_hx_td_reviewremarks_1] ON [dbo].[hx_td_reviewremarks] 
(
	[admin_operator] ASC
)WITH (PAD_INDEX  = OFF, STATISTICS_NORECOMPUTE  = OFF, SORT_IN_TEMPDB = OFF, IGNORE_DUP_KEY = OFF, DROP_EXISTING = OFF, ONLINE = OFF, ALLOW_ROW_LOCKS  = ON, ALLOW_PAGE_LOCKS  = ON) ON [PRIMARY]
GO
EXEC sys.sp_addextendedproperty @name=N'MS_Description', @value=N'-1  录入 0 审核中 1 初审通过  2 复审通过 3 进行中(开款上线)  4 满标(还款中)   5 已还清   6初审未通过   7 复审未通过  8 流标' , @level0type=N'SCHEMA',@level0name=N'dbo', @level1type=N'TABLE',@level1name=N'hx_td_reviewremarks', @level2type=N'COLUMN',@level2name=N'tender_state'
GO
/****** Object:  Table [dbo].[hx_td_Phone_records]    Script Date: 09/27/2016 10:30:13 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
SET ANSI_PADDING ON
GO
CREATE TABLE [dbo].[hx_td_Phone_records](
	[recordsid] [int] IDENTITY(1,1) NOT NULL,
	[recordcontext] [varchar](max) NULL,
	[recordtime] [datetime] NULL,
	[registerid] [int] NULL,
	[adminid] [int] NULL,
 CONSTRAINT [PK_HX_TD_PHONE_RECORDS] PRIMARY KEY CLUSTERED 
(
	[recordsid] ASC
)WITH (PAD_INDEX  = OFF, STATISTICS_NORECOMPUTE  = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS  = ON, ALLOW_PAGE_LOCKS  = ON) ON [PRIMARY]
) ON [PRIMARY]
GO
SET ANSI_PADDING OFF
GO
CREATE NONCLUSTERED INDEX [IX_hx_td_Phone_records] ON [dbo].[hx_td_Phone_records] 
(
	[registerid] ASC
)WITH (PAD_INDEX  = OFF, STATISTICS_NORECOMPUTE  = OFF, SORT_IN_TEMPDB = OFF, IGNORE_DUP_KEY = OFF, DROP_EXISTING = OFF, ONLINE = OFF, ALLOW_ROW_LOCKS  = ON, ALLOW_PAGE_LOCKS  = ON) ON [PRIMARY]
GO
/****** Object:  Table [dbo].[hx_td_Myborrow]    Script Date: 09/27/2016 10:30:13 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
SET ANSI_PADDING ON
GO
CREATE TABLE [dbo].[hx_td_Myborrow](
	[Myborrowid] [int] IDENTITY(1,1) NOT NULL,
	[Username] [varchar](255) NULL,
	[userTel] [varchar](255) NULL,
	[BorrAMT] [varchar](255) NULL,
	[BorrPurposes] [varchar](255) NULL,
	[Area] [varchar](255) NULL,
	[CompName] [varchar](255) NULL,
	[Industry] [varchar](255) NULL,
	[RegCapital] [varchar](255) NULL,
	[TimeLimit] [int] NULL,
	[FoundingTime] [datetime] NULL,
	[Mortgage] [int] NULL,
	[EntryTime] [datetime] NULL,
	[BorrType] [int] NULL,
	[BorrState] [int] NULL,
 CONSTRAINT [PK_HX_TD_MYBORROW] PRIMARY KEY CLUSTERED 
(
	[Myborrowid] ASC
)WITH (PAD_INDEX  = OFF, STATISTICS_NORECOMPUTE  = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS  = ON, ALLOW_PAGE_LOCKS  = ON) ON [PRIMARY]
) ON [PRIMARY]
GO
SET ANSI_PADDING OFF
GO
EXEC sys.sp_addextendedproperty @name=N'MS_Description', @value=N'0 个人借款
   1 企业借款' , @level0type=N'SCHEMA',@level0name=N'dbo', @level1type=N'TABLE',@level1name=N'hx_td_Myborrow', @level2type=N'COLUMN',@level2name=N'BorrType'
GO
EXEC sys.sp_addextendedproperty @name=N'MS_Description', @value=N'0无效  1有效' , @level0type=N'SCHEMA',@level0name=N'dbo', @level1type=N'TABLE',@level1name=N'hx_td_Myborrow', @level2type=N'COLUMN',@level2name=N'BorrState'
GO
/****** Object:  Table [dbo].[hx_td_menu]    Script Date: 09/27/2016 10:30:13 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
SET ANSI_PADDING ON
GO
CREATE TABLE [dbo].[hx_td_menu](
	[menu_id] [int] IDENTITY(1,1) NOT NULL,
	[menu_name] [varchar](50) NULL,
	[parentid] [int] NULL,
	[parentpath] [varchar](50) NULL,
	[depath] [int] NULL,
	[rootid] [int] NULL,
	[child] [int] NULL,
	[previd] [int] NULL,
	[nextid] [int] NULL,
	[orderid] [int] NULL,
	[createtime] [datetime] NULL,
	[path1] [varchar](150) NULL,
	[path2] [varchar](150) NULL,
	[path3] [varchar](150) NULL,
	[path4] [varchar](150) NULL,
 CONSTRAINT [PK_hx_td_menu] PRIMARY KEY CLUSTERED 
(
	[menu_id] ASC
)WITH (PAD_INDEX  = OFF, STATISTICS_NORECOMPUTE  = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS  = ON, ALLOW_PAGE_LOCKS  = ON) ON [PRIMARY]
) ON [PRIMARY]
GO
SET ANSI_PADDING OFF
GO
CREATE NONCLUSTERED INDEX [IX_hx_td_menu] ON [dbo].[hx_td_menu] 
(
	[parentid] ASC
)WITH (PAD_INDEX  = OFF, STATISTICS_NORECOMPUTE  = OFF, SORT_IN_TEMPDB = OFF, IGNORE_DUP_KEY = OFF, DROP_EXISTING = OFF, ONLINE = OFF, ALLOW_ROW_LOCKS  = ON, ALLOW_PAGE_LOCKS  = ON) ON [PRIMARY]
GO
/****** Object:  Table [dbo].[hx_td_LoginInfo]    Script Date: 09/27/2016 10:30:13 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
SET ANSI_PADDING ON
GO
CREATE TABLE [dbo].[hx_td_LoginInfo](
	[id] [int] IDENTITY(1,1) NOT NULL,
	[AdminUserName] [varchar](50) NULL,
	[Pwd] [varchar](50) NULL,
	[LoginTime] [datetime] NULL,
	[LoginIP] [varchar](20) NULL,
	[LoginSuccess] [int] NULL,
 CONSTRAINT [PK_hx_td_LoginInfo] PRIMARY KEY CLUSTERED 
(
	[id] ASC
)WITH (PAD_INDEX  = OFF, STATISTICS_NORECOMPUTE  = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS  = ON, ALLOW_PAGE_LOCKS  = ON) ON [PRIMARY]
) ON [PRIMARY]
GO
SET ANSI_PADDING OFF
GO
/****** Object:  Table [dbo].[hx_td_Loan_records]    Script Date: 09/27/2016 10:30:13 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
SET ANSI_PADDING ON
GO
CREATE TABLE [dbo].[hx_td_Loan_records](
	[Loan_records_id] [int] IDENTITY(1,1) NOT NULL,
	[targetid] [int] NULL,
	[bid_records_id] [int] NULL,
	[InCustId] [varchar](50) NULL,
	[OutCustId] [varchar](50) NULL,
	[LoanAMT] [decimal](10, 2) NULL,
	[LoanOrdId] [varchar](50) NULL,
	[LoanDate] [datetime] NULL,
	[Free] [decimal](10, 2) NULL,
	[DivDetails] [varchar](max) NULL,
	[SubOrdid] [varchar](50) NULL,
	[SubOrdDate] [datetime] NULL,
	[unFreezeOrdId] [varchar](50) NULL,
	[FreezeTrxId] [varchar](50) NULL,
	[bid_orderid] [decimal](20, 0) NULL,
 CONSTRAINT [PK_HX_TD_LOAN_RECORDS] PRIMARY KEY CLUSTERED 
(
	[Loan_records_id] ASC
)WITH (PAD_INDEX  = OFF, STATISTICS_NORECOMPUTE  = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS  = ON, ALLOW_PAGE_LOCKS  = ON) ON [PRIMARY]
) ON [PRIMARY]
GO
SET ANSI_PADDING OFF
GO
CREATE NONCLUSTERED INDEX [IX_hx_td_Loan_records] ON [dbo].[hx_td_Loan_records] 
(
	[bid_orderid] ASC
)WITH (PAD_INDEX  = OFF, STATISTICS_NORECOMPUTE  = OFF, SORT_IN_TEMPDB = OFF, IGNORE_DUP_KEY = OFF, DROP_EXISTING = OFF, ONLINE = OFF, ALLOW_ROW_LOCKS  = ON, ALLOW_PAGE_LOCKS  = ON) ON [PRIMARY]
GO
CREATE NONCLUSTERED INDEX [IX_hx_td_Loan_records_1] ON [dbo].[hx_td_Loan_records] 
(
	[bid_records_id] ASC
)WITH (PAD_INDEX  = OFF, STATISTICS_NORECOMPUTE  = OFF, SORT_IN_TEMPDB = OFF, IGNORE_DUP_KEY = OFF, DROP_EXISTING = OFF, ONLINE = OFF, ALLOW_ROW_LOCKS  = ON, ALLOW_PAGE_LOCKS  = ON) ON [PRIMARY]
GO
CREATE NONCLUSTERED INDEX [IX_hx_td_Loan_records_2] ON [dbo].[hx_td_Loan_records] 
(
	[targetid] ASC
)WITH (PAD_INDEX  = OFF, STATISTICS_NORECOMPUTE  = OFF, SORT_IN_TEMPDB = OFF, IGNORE_DUP_KEY = OFF, DROP_EXISTING = OFF, ONLINE = OFF, ALLOW_ROW_LOCKS  = ON, ALLOW_PAGE_LOCKS  = ON) ON [PRIMARY]
GO
EXEC sys.sp_addextendedproperty @name=N'MS_Description', @value=N'本字段关链投标订单' , @level0type=N'SCHEMA',@level0name=N'dbo', @level1type=N'TABLE',@level1name=N'hx_td_Loan_records', @level2type=N'COLUMN',@level2name=N'SubOrdid'
GO
/****** Object:  View [dbo].[V_borrowing_Bid_records_income_statement]    Script Date: 09/27/2016 10:30:13 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE VIEW [dbo].[V_borrowing_Bid_records_income_statement]
AS
SELECT     dbo.hx_borrowing_target.targetid, dbo.hx_borrowing_target.loan_number, dbo.hx_borrowing_target.borrowing_title, dbo.hx_borrowing_target.borrowing_balance, 
                      dbo.hx_Bid_records.investment_amount, dbo.hx_income_statement.income_statement_id, dbo.hx_income_statement.borrower_registerid, 
                      dbo.hx_income_statement.annual_revenue, dbo.hx_income_statement.invest_time, dbo.hx_income_statement.current_investment_period, 
                      dbo.hx_income_statement.value_date, dbo.hx_income_statement.interest_payment_date, dbo.hx_income_statement.repayment_amount, 
                      dbo.hx_income_statement.repayment_period, dbo.hx_income_statement.investor_registerid, dbo.hx_income_statement.payment_status, 
                      dbo.hx_income_statement.bid_records_id, dbo.hx_borrowing_target.annual_interest_rate, dbo.hx_member_table.registerid, dbo.hx_member_table.available_balance, 
                      dbo.hx_borrowing_target.payment_options, hx_member_table_1.UsrCustId AS BorrUsrCustId, dbo.hx_member_table.UsrCustId AS OutCustId, 
                      dbo.hx_td_Loan_records.bid_orderid, dbo.hx_td_Loan_records.SubOrdid, dbo.hx_td_Loan_records.SubOrdDate, dbo.hx_borrowing_target.loan_management_fee, 
                      dbo.hx_member_table.username, dbo.hx_member_table.mobile, dbo.hx_member_table.email, dbo.hx_income_statement.Principal, 
                      dbo.hx_income_statement.interestpayment
FROM         dbo.hx_borrowing_target INNER JOIN
                      dbo.hx_Bid_records ON dbo.hx_borrowing_target.targetid = dbo.hx_Bid_records.targetid INNER JOIN
                      dbo.hx_income_statement ON dbo.hx_Bid_records.bid_records_id = dbo.hx_income_statement.bid_records_id INNER JOIN
                      dbo.hx_member_table ON dbo.hx_Bid_records.investor_registerid = dbo.hx_member_table.registerid INNER JOIN
                      dbo.hx_member_table AS hx_member_table_1 ON dbo.hx_borrowing_target.borrower_registerid = hx_member_table_1.registerid INNER JOIN
                      dbo.hx_td_Loan_records ON dbo.hx_Bid_records.OrdId = dbo.hx_td_Loan_records.bid_orderid
GO
EXEC sys.sp_addextendedproperty @name=N'MS_DiagramPane1', @value=N'[0E232FF0-B466-11cf-A24F-00AA00A3EFFF, 1.00]
Begin DesignProperties = 
   Begin PaneConfigurations = 
      Begin PaneConfiguration = 0
         NumPanes = 4
         Configuration = "(H (1[43] 4[15] 2[14] 3) )"
      End
      Begin PaneConfiguration = 1
         NumPanes = 3
         Configuration = "(H (1 [50] 4 [25] 3))"
      End
      Begin PaneConfiguration = 2
         NumPanes = 3
         Configuration = "(H (1 [50] 2 [25] 3))"
      End
      Begin PaneConfiguration = 3
         NumPanes = 3
         Configuration = "(H (4 [30] 2 [40] 3))"
      End
      Begin PaneConfiguration = 4
         NumPanes = 2
         Configuration = "(H (1 [56] 3))"
      End
      Begin PaneConfiguration = 5
         NumPanes = 2
         Configuration = "(H (2 [66] 3))"
      End
      Begin PaneConfiguration = 6
         NumPanes = 2
         Configuration = "(H (4 [50] 3))"
      End
      Begin PaneConfiguration = 7
         NumPanes = 1
         Configuration = "(V (3))"
      End
      Begin PaneConfiguration = 8
         NumPanes = 3
         Configuration = "(H (1[56] 4[18] 2) )"
      End
      Begin PaneConfiguration = 9
         NumPanes = 2
         Configuration = "(H (1 [75] 4))"
      End
      Begin PaneConfiguration = 10
         NumPanes = 2
         Configuration = "(H (1[66] 2) )"
      End
      Begin PaneConfiguration = 11
         NumPanes = 2
         Configuration = "(H (4 [60] 2))"
      End
      Begin PaneConfiguration = 12
         NumPanes = 1
         Configuration = "(H (1) )"
      End
      Begin PaneConfiguration = 13
         NumPanes = 1
         Configuration = "(V (4))"
      End
      Begin PaneConfiguration = 14
         NumPanes = 1
         Configuration = "(V (2))"
      End
      ActivePaneConfig = 0
   End
   Begin DiagramPane = 
      Begin Origin = 
         Top = 0
         Left = -192
      End
      Begin Tables = 
         Begin Table = "hx_borrowing_target"
            Begin Extent = 
               Top = 5
               Left = 88
               Bottom = 173
               Right = 351
            End
            DisplayFlags = 280
            TopColumn = 18
         End
         Begin Table = "hx_Bid_records"
            Begin Extent = 
               Top = 10
               Left = 371
               Bottom = 163
               Right = 552
            End
            DisplayFlags = 280
            TopColumn = 15
         End
         Begin Table = "hx_income_statement"
            Begin Extent = 
               Top = 1
               Left = 736
               Bottom = 186
               Right = 946
            End
            DisplayFlags = 280
            TopColumn = 13
         End
         Begin Table = "hx_member_table"
            Begin Extent = 
               Top = 175
               Left = 310
               Bottom = 345
               Right = 497
            End
            DisplayFlags = 280
            TopColumn = 1
         End
         Begin Table = "hx_member_table_1"
            Begin Extent = 
               Top = 190
               Left = 0
               Bottom = 298
               Right = 187
            End
            DisplayFlags = 280
            TopColumn = 5
         End
         Begin Table = "hx_td_Loan_records"
            Begin Extent = 
               Top = 26
               Left = 581
               Bottom = 300
               Right = 740
            End
            DisplayFlags = 280
            TopColumn = 0
         End
      End
   End
   Begin SQLPane = 
   End
   Begin DataPane = 
      Begin ParameterDefaults = ""
      End
      Begin ColumnWidths = 29
         ' , @level0type=N'SCHEMA',@level0name=N'dbo', @level1type=N'VIEW',@level1name=N'V_borrowing_Bid_records_income_statement'
GO
EXEC sys.sp_addextendedproperty @name=N'MS_DiagramPane2', @value=N'Width = 284
         Width = 1500
         Width = 1500
         Width = 1500
         Width = 2025
         Width = 3630
         Width = 1500
         Width = 1500
         Width = 1500
         Width = 1500
         Width = 2985
         Width = 1500
         Width = 1500
         Width = 1500
         Width = 1500
         Width = 1500
         Width = 1500
         Width = 1500
         Width = 1500
         Width = 1500
         Width = 1500
         Width = 1500
         Width = 1500
         Width = 1500
         Width = 1500
         Width = 1500
         Width = 1500
         Width = 1500
         Width = 1500
      End
   End
   Begin CriteriaPane = 
      Begin ColumnWidths = 11
         Column = 2100
         Alias = 900
         Table = 3540
         Output = 720
         Append = 1400
         NewValue = 1170
         SortType = 1350
         SortOrder = 1410
         GroupBy = 1350
         Filter = 1350
         Or = 1350
         Or = 1350
         Or = 1350
      End
   End
End
' , @level0type=N'SCHEMA',@level0name=N'dbo', @level1type=N'VIEW',@level1name=N'V_borrowing_Bid_records_income_statement'
GO
EXEC sys.sp_addextendedproperty @name=N'MS_DiagramPaneCount', @value=2 , @level0type=N'SCHEMA',@level0name=N'dbo', @level1type=N'VIEW',@level1name=N'V_borrowing_Bid_records_income_statement'
GO
/****** Object:  Table [dbo].[hx_td_LLpay_Recharge]    Script Date: 09/27/2016 10:30:13 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
SET ANSI_PADDING OFF
GO
CREATE TABLE [dbo].[hx_td_LLpay_Recharge](
	[Rechargeid] [int] IDENTITY(1,1) NOT NULL,
	[UsrId] [int] NULL,
	[no_order] [varchar](32) NULL,
	[ordertime] [varchar](50) NULL,
	[info_order] [varchar](300) NULL,
	[money_order] [decimal](18, 2) NULL,
	[BankCode] [varchar](100) NULL,
	[card_no] [varchar](100) NULL,
	[ReState] [int] NULL,
	[oid_paybill] [varchar](32) NULL,
 CONSTRAINT [PK_HX_TD_LLPAY_RECHARGE] PRIMARY KEY CLUSTERED 
(
	[Rechargeid] ASC
)WITH (PAD_INDEX  = OFF, STATISTICS_NORECOMPUTE  = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS  = ON, ALLOW_PAGE_LOCKS  = ON) ON [PRIMARY]
) ON [PRIMARY]
GO
SET ANSI_PADDING OFF
GO
CREATE NONCLUSTERED INDEX [IX_hx_td_LLpay_Recharge] ON [dbo].[hx_td_LLpay_Recharge] 
(
	[BankCode] ASC
)WITH (PAD_INDEX  = OFF, STATISTICS_NORECOMPUTE  = OFF, SORT_IN_TEMPDB = OFF, IGNORE_DUP_KEY = OFF, DROP_EXISTING = OFF, ONLINE = OFF, ALLOW_ROW_LOCKS  = ON, ALLOW_PAGE_LOCKS  = ON) ON [PRIMARY]
GO
CREATE NONCLUSTERED INDEX [IX_hx_td_LLpay_Recharge_1] ON [dbo].[hx_td_LLpay_Recharge] 
(
	[no_order] ASC
)WITH (PAD_INDEX  = OFF, STATISTICS_NORECOMPUTE  = OFF, SORT_IN_TEMPDB = OFF, IGNORE_DUP_KEY = OFF, DROP_EXISTING = OFF, ONLINE = OFF, ALLOW_ROW_LOCKS  = ON, ALLOW_PAGE_LOCKS  = ON) ON [PRIMARY]
GO
EXEC sys.sp_addextendedproperty @name=N'MS_Description', @value=N'0 默认   1 成功  2失败  ' , @level0type=N'SCHEMA',@level0name=N'dbo', @level1type=N'TABLE',@level1name=N'hx_td_LLpay_Recharge', @level2type=N'COLUMN',@level2name=N'ReState'
GO
/****** Object:  Table [dbo].[hx_td_LLpay_re_cash]    Script Date: 09/27/2016 10:30:13 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
SET ANSI_PADDING OFF
GO
CREATE TABLE [dbo].[hx_td_LLpay_re_cash](
	[re_cashid] [int] IDENTITY(1,1) NOT NULL,
	[OrdId] [varchar](20) NULL,
	[no_order] [varchar](32) NULL,
	[OutAcctId] [varchar](50) NULL,
	[InAcctId] [varchar](50) NULL,
	[TransAmt] [decimal](18, 2) NULL,
	[h_state] [int] NULL,
	[htype] [int] NULL,
	[OrdTime] [datetime] NULL,
	[Usrid] [int] NULL
) ON [PRIMARY]
SET ANSI_PADDING ON
ALTER TABLE [dbo].[hx_td_LLpay_re_cash] ADD [Remarks] [varchar](max) NULL
ALTER TABLE [dbo].[hx_td_LLpay_re_cash] ADD  CONSTRAINT [PK_HX_TD_LLPAY_RE_CASH] PRIMARY KEY CLUSTERED 
(
	[re_cashid] ASC
)WITH (PAD_INDEX  = OFF, STATISTICS_NORECOMPUTE  = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS  = ON, ALLOW_PAGE_LOCKS  = ON) ON [PRIMARY]
GO
SET ANSI_PADDING OFF
GO
CREATE NONCLUSTERED INDEX [IX_hx_td_LLpay_re_cash] ON [dbo].[hx_td_LLpay_re_cash] 
(
	[Usrid] ASC
)WITH (PAD_INDEX  = OFF, STATISTICS_NORECOMPUTE  = OFF, SORT_IN_TEMPDB = OFF, IGNORE_DUP_KEY = OFF, DROP_EXISTING = OFF, ONLINE = OFF, ALLOW_ROW_LOCKS  = ON, ALLOW_PAGE_LOCKS  = ON) ON [PRIMARY]
GO
CREATE NONCLUSTERED INDEX [IX_hx_td_LLpay_re_cash_1] ON [dbo].[hx_td_LLpay_re_cash] 
(
	[htype] ASC
)WITH (PAD_INDEX  = OFF, STATISTICS_NORECOMPUTE  = OFF, SORT_IN_TEMPDB = OFF, IGNORE_DUP_KEY = OFF, DROP_EXISTING = OFF, ONLINE = OFF, ALLOW_ROW_LOCKS  = ON, ALLOW_PAGE_LOCKS  = ON) ON [PRIMARY]
GO
CREATE NONCLUSTERED INDEX [IX_hx_td_LLpay_re_cash_2] ON [dbo].[hx_td_LLpay_re_cash] 
(
	[no_order] ASC
)WITH (PAD_INDEX  = OFF, STATISTICS_NORECOMPUTE  = OFF, SORT_IN_TEMPDB = OFF, IGNORE_DUP_KEY = OFF, DROP_EXISTING = OFF, ONLINE = OFF, ALLOW_ROW_LOCKS  = ON, ALLOW_PAGE_LOCKS  = ON) ON [PRIMARY]
GO
EXEC sys.sp_addextendedproperty @name=N'MS_Description', @value=N'0  默认   1成功 2失败' , @level0type=N'SCHEMA',@level0name=N'dbo', @level1type=N'TABLE',@level1name=N'hx_td_LLpay_re_cash', @level2type=N'COLUMN',@level2name=N'h_state'
GO
EXEC sys.sp_addextendedproperty @name=N'MS_Description', @value=N'0 商户向用户转账(相当充值)  1 用户向商户转账 相当取现' , @level0type=N'SCHEMA',@level0name=N'dbo', @level1type=N'TABLE',@level1name=N'hx_td_LLpay_re_cash', @level2type=N'COLUMN',@level2name=N'htype'
GO
/****** Object:  View [dbo].[V_LLPay_Re]    Script Date: 09/27/2016 10:30:13 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE VIEW [dbo].[V_LLPay_Re]
AS
SELECT     dbo.hx_td_LLpay_Recharge.Rechargeid, dbo.hx_td_LLpay_Recharge.UsrId, dbo.hx_td_LLpay_Recharge.no_order, dbo.hx_td_LLpay_Recharge.ordertime, 
                      dbo.hx_td_LLpay_Recharge.info_order, dbo.hx_td_LLpay_Recharge.money_order, dbo.hx_td_LLpay_Recharge.BankCode, dbo.hx_td_LLpay_Recharge.card_no, 
                      dbo.hx_td_LLpay_Recharge.ReState, dbo.hx_td_LLpay_Recharge.oid_paybill, dbo.hx_td_LLpay_re_cash.re_cashid, dbo.hx_td_LLpay_re_cash.OrdId, 
                      dbo.hx_td_LLpay_re_cash.TransAmt, dbo.hx_td_LLpay_re_cash.h_state, dbo.hx_td_LLpay_re_cash.htype, dbo.hx_member_table.registerid, 
                      dbo.hx_td_LLpay_re_cash.OrdTime, dbo.hx_member_table.username, dbo.hx_member_table.realname
FROM         dbo.hx_td_LLpay_Recharge INNER JOIN
                      dbo.hx_td_LLpay_re_cash ON dbo.hx_td_LLpay_Recharge.no_order = dbo.hx_td_LLpay_re_cash.no_order INNER JOIN
                      dbo.hx_member_table ON dbo.hx_td_LLpay_re_cash.Usrid = dbo.hx_member_table.registerid
WHERE     (dbo.hx_td_LLpay_re_cash.htype = 0)
GO
EXEC sys.sp_addextendedproperty @name=N'MS_DiagramPane1', @value=N'[0E232FF0-B466-11cf-A24F-00AA00A3EFFF, 1.00]
Begin DesignProperties = 
   Begin PaneConfigurations = 
      Begin PaneConfiguration = 0
         NumPanes = 4
         Configuration = "(H (1[41] 4[20] 2[10] 3) )"
      End
      Begin PaneConfiguration = 1
         NumPanes = 3
         Configuration = "(H (1 [50] 4 [25] 3))"
      End
      Begin PaneConfiguration = 2
         NumPanes = 3
         Configuration = "(H (1 [50] 2 [25] 3))"
      End
      Begin PaneConfiguration = 3
         NumPanes = 3
         Configuration = "(H (4 [30] 2 [40] 3))"
      End
      Begin PaneConfiguration = 4
         NumPanes = 2
         Configuration = "(H (1 [56] 3))"
      End
      Begin PaneConfiguration = 5
         NumPanes = 2
         Configuration = "(H (2 [66] 3))"
      End
      Begin PaneConfiguration = 6
         NumPanes = 2
         Configuration = "(H (4 [50] 3))"
      End
      Begin PaneConfiguration = 7
         NumPanes = 1
         Configuration = "(V (3))"
      End
      Begin PaneConfiguration = 8
         NumPanes = 3
         Configuration = "(H (1[56] 4[18] 2) )"
      End
      Begin PaneConfiguration = 9
         NumPanes = 2
         Configuration = "(H (1 [75] 4))"
      End
      Begin PaneConfiguration = 10
         NumPanes = 2
         Configuration = "(H (1[66] 2) )"
      End
      Begin PaneConfiguration = 11
         NumPanes = 2
         Configuration = "(H (4 [60] 2))"
      End
      Begin PaneConfiguration = 12
         NumPanes = 1
         Configuration = "(H (1) )"
      End
      Begin PaneConfiguration = 13
         NumPanes = 1
         Configuration = "(V (4))"
      End
      Begin PaneConfiguration = 14
         NumPanes = 1
         Configuration = "(V (2))"
      End
      ActivePaneConfig = 0
   End
   Begin DiagramPane = 
      Begin Origin = 
         Top = 0
         Left = 0
      End
      Begin Tables = 
         Begin Table = "hx_td_LLpay_Recharge"
            Begin Extent = 
               Top = 5
               Left = 56
               Bottom = 209
               Right = 200
            End
            DisplayFlags = 280
            TopColumn = 0
         End
         Begin Table = "hx_td_LLpay_re_cash"
            Begin Extent = 
               Top = 7
               Left = 323
               Bottom = 211
               Right = 565
            End
            DisplayFlags = 280
            TopColumn = 0
         End
         Begin Table = "hx_member_table"
            Begin Extent = 
               Top = 6
               Left = 668
               Bottom = 193
               Right = 855
            End
            DisplayFlags = 280
            TopColumn = 0
         End
      End
   End
   Begin SQLPane = 
   End
   Begin DataPane = 
      Begin ParameterDefaults = ""
      End
      Begin ColumnWidths = 17
         Width = 284
         Width = 1500
         Width = 1500
         Width = 1500
         Width = 1500
         Width = 1500
         Width = 1500
         Width = 1500
         Width = 1500
         Width = 1500
         Width = 1500
         Width = 1500
         Width = 1500
         Width = 1500
         Width = 1500
         Width = 1500
         Width = 1500
      End
   End
   Begin CriteriaPane = 
      Begin ColumnWidths = 11
         Column = 1440
         Alias = 900
         Table = 1170
         Output = 720
         Append = 1400
         NewValue = 1170
         SortType = 1350
         SortOrder = 1410
         GroupBy = 1350
         Filter = 1350
         Or = 1350
         Or = 1350
         Or = 1350
      End
   End
End
' , @level0type=N'SCHEMA',@level0name=N'dbo', @level1type=N'VIEW',@level1name=N'V_LLPay_Re'
GO
EXEC sys.sp_addextendedproperty @name=N'MS_DiagramPaneCount', @value=1 , @level0type=N'SCHEMA',@level0name=N'dbo', @level1type=N'VIEW',@level1name=N'V_LLPay_Re'
GO
/****** Object:  Table [dbo].[hx_td_LLpay_city]    Script Date: 09/27/2016 10:30:13 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
SET ANSI_PADDING ON
GO
CREATE TABLE [dbo].[hx_td_LLpay_city](
	[cityid] [int] IDENTITY(1,1) NOT NULL,
	[Province] [varchar](50) NULL,
	[cityname] [varchar](50) NULL,
	[Citycode] [int] NULL,
 CONSTRAINT [PK_hx_td_LLpay_city] PRIMARY KEY CLUSTERED 
(
	[cityid] ASC
)WITH (PAD_INDEX  = OFF, STATISTICS_NORECOMPUTE  = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS  = ON, ALLOW_PAGE_LOCKS  = ON) ON [PRIMARY]
) ON [PRIMARY]
GO
SET ANSI_PADDING OFF
GO
/****** Object:  Table [dbo].[hx_td_LLPay_bindCard]    Script Date: 09/27/2016 10:30:13 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
SET ANSI_PADDING OFF
GO
CREATE TABLE [dbo].[hx_td_LLPay_bindCard](
	[bindCardid] [int] IDENTITY(1,1) NOT NULL,
	[Usrid] [int] NULL,
	[BankCard] [varchar](100) NULL,
	[BankCode] [varchar](100) NULL,
	[Bindtime] [datetime] NULL,
	[Re_Amt] [decimal](18, 2) NULL,
	[Quota] [decimal](18, 2) NULL,
	[Citycode] [varchar](50) NULL,
	[branch] [varchar](100) NULL,
	[no_agree] [varchar](300) NULL,
	[cardstate] [int] NULL,
	[province_code] [varchar](100) NULL,
 CONSTRAINT [PK_HX_TD_LLPAY_BINDCARD] PRIMARY KEY CLUSTERED 
(
	[bindCardid] ASC
)WITH (PAD_INDEX  = OFF, STATISTICS_NORECOMPUTE  = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS  = ON, ALLOW_PAGE_LOCKS  = ON) ON [PRIMARY]
) ON [PRIMARY]
GO
SET ANSI_PADDING OFF
GO
CREATE NONCLUSTERED INDEX [IX_hx_td_LLPay_bindCard] ON [dbo].[hx_td_LLPay_bindCard] 
(
	[BankCode] ASC
)WITH (PAD_INDEX  = OFF, STATISTICS_NORECOMPUTE  = OFF, SORT_IN_TEMPDB = OFF, IGNORE_DUP_KEY = OFF, DROP_EXISTING = OFF, ONLINE = OFF, ALLOW_ROW_LOCKS  = ON, ALLOW_PAGE_LOCKS  = ON) ON [PRIMARY]
GO
/****** Object:  View [dbo].[ViewUserInviteInfor]    Script Date: 09/27/2016 10:30:13 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE VIEW [dbo].[ViewUserInviteInfor]
AS
SELECT DISTINCT 
                      invitationid, InviteId, InviteName, InviteRealName, InvitedId, InvitedName, InvitedRealName, InviteCode, CreatedOn, InvestedOn, InvestAmount, OrderId, BorrowTitle, 
                      DeadLine, DeadLineNumber, (CASE WHEN IsBindedCard = 0 AND NOT EXISTS
                          (SELECT     cardstate
                            FROM          [hx_td_LLPay_bindCard] lb
                            WHERE      (lb.cardstate = 1 OR
                                                   lb.cardstate = 0) AND lb.Usrid = InvitedId) THEN 0 ELSE 1 END) AS IsBindedCard
FROM         (SELECT     ui.invitationid, ui.Invpeopleid AS InviteId, imt.username AS InviteName, imt.realname AS InviteRealName, mt.registerid AS InvitedId, 
                                              mt.username AS InvitedName, mt.realname AS InvitedRealName, ui.invcode AS InviteCode, ui.invtime AS CreatedOn, br.invest_time AS InvestedOn, 
                                              br.investment_amount AS InvestAmount, br.OrdId AS OrderId, bt.borrowing_title AS BorrowTitle, CONVERT(VARCHAR(19), bt.life_of_loan) 
                                              + CASE WHEN bt.unit_day = 1 THEN '月' WHEN bt.unit_day = 3 THEN '天' END AS DeadLine, 
                                              (CASE WHEN bt.unit_day = 3 THEN life_of_loan WHEN bt.unit_day = 1 THEN life_of_loan * 30 END) AS DeadLineNumber, 
                                              (CASE WHEN bc.UsrBindCardID IS NULL THEN 0 ELSE 1 END) AS IsBindedCard
                       FROM          dbo.hx_member_table AS mt WITH (NOLOCK) RIGHT OUTER JOIN
                                              dbo.hx_td_Userinvitation AS ui WITH (NOLOCK) ON mt.registerid = ui.invpersonid LEFT OUTER JOIN
                                              dbo.hx_UsrBindCardC AS bc WITH (NOLOCK) ON bc.UsrCustId = mt.UsrCustId AND bc.defCard = 1 LEFT OUTER JOIN
                                              dbo.hx_Bid_records AS br ON br.investor_registerid = mt.registerid AND br.bid_records_id =
                                                  (SELECT     MIN(bid_records_id) AS Expr1
                                                    FROM          dbo.hx_Bid_records AS b2
                                                    WHERE      (investor_registerid = br.investor_registerid) AND (ordstate = 1)) LEFT OUTER JOIN
                                              dbo.hx_borrowing_target AS bt WITH (NOLOCK) ON bt.targetid = br.targetid INNER JOIN
                                              dbo.hx_member_table AS imt WITH (NOLOCK) ON imt.registerid = ui.Invpeopleid) AS abc
GO
EXEC sys.sp_addextendedproperty @name=N'MS_DiagramPane1', @value=N'[0E232FF0-B466-11cf-A24F-00AA00A3EFFF, 1.00]
Begin DesignProperties = 
   Begin PaneConfigurations = 
      Begin PaneConfiguration = 0
         NumPanes = 4
         Configuration = "(H (1[21] 4[19] 2[50] 3) )"
      End
      Begin PaneConfiguration = 1
         NumPanes = 3
         Configuration = "(H (1 [50] 4 [25] 3))"
      End
      Begin PaneConfiguration = 2
         NumPanes = 3
         Configuration = "(H (1 [50] 2 [25] 3))"
      End
      Begin PaneConfiguration = 3
         NumPanes = 3
         Configuration = "(H (4 [30] 2 [40] 3))"
      End
      Begin PaneConfiguration = 4
         NumPanes = 2
         Configuration = "(H (1 [56] 3))"
      End
      Begin PaneConfiguration = 5
         NumPanes = 2
         Configuration = "(H (2 [66] 3))"
      End
      Begin PaneConfiguration = 6
         NumPanes = 2
         Configuration = "(H (4 [50] 3))"
      End
      Begin PaneConfiguration = 7
         NumPanes = 1
         Configuration = "(V (3))"
      End
      Begin PaneConfiguration = 8
         NumPanes = 3
         Configuration = "(H (1[56] 4[18] 2) )"
      End
      Begin PaneConfiguration = 9
         NumPanes = 2
         Configuration = "(H (1 [75] 4))"
      End
      Begin PaneConfiguration = 10
         NumPanes = 2
         Configuration = "(H (1[66] 2) )"
      End
      Begin PaneConfiguration = 11
         NumPanes = 2
         Configuration = "(H (4 [60] 2))"
      End
      Begin PaneConfiguration = 12
         NumPanes = 1
         Configuration = "(H (1) )"
      End
      Begin PaneConfiguration = 13
         NumPanes = 1
         Configuration = "(V (4))"
      End
      Begin PaneConfiguration = 14
         NumPanes = 1
         Configuration = "(V (2))"
      End
      ActivePaneConfig = 0
   End
   Begin DiagramPane = 
      Begin Origin = 
         Top = 0
         Left = 0
      End
      Begin Tables = 
         Begin Table = "abc"
            Begin Extent = 
               Top = 6
               Left = 38
               Bottom = 114
               Right = 200
            End
            DisplayFlags = 280
            TopColumn = 0
         End
      End
   End
   Begin SQLPane = 
   End
   Begin DataPane = 
      Begin ParameterDefaults = ""
      End
      Begin ColumnWidths = 14
         Width = 284
         Width = 1500
         Width = 1500
         Width = 1500
         Width = 1500
         Width = 1500
         Width = 1500
         Width = 1500
         Width = 1500
         Width = 1500
         Width = 1500
         Width = 1500
         Width = 1500
         Width = 1500
      End
   End
   Begin CriteriaPane = 
      Begin ColumnWidths = 11
         Column = 1440
         Alias = 900
         Table = 1170
         Output = 720
         Append = 1400
         NewValue = 1170
         SortType = 1350
         SortOrder = 1410
         GroupBy = 1350
         Filter = 1350
         Or = 1350
         Or = 1350
         Or = 1350
      End
   End
End
' , @level0type=N'SCHEMA',@level0name=N'dbo', @level1type=N'VIEW',@level1name=N'ViewUserInviteInfor'
GO
EXEC sys.sp_addextendedproperty @name=N'MS_DiagramPaneCount', @value=1 , @level0type=N'SCHEMA',@level0name=N'dbo', @level1type=N'VIEW',@level1name=N'ViewUserInviteInfor'
GO
/****** Object:  Table [dbo].[hx_td_LLBack]    Script Date: 09/27/2016 10:30:13 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
SET ANSI_PADDING ON
GO
CREATE TABLE [dbo].[hx_td_LLBack](
	[LLbankid] [int] IDENTITY(1,1) NOT NULL,
	[BankName] [varchar](100) NULL,
	[BankCode] [varchar](100) NULL,
	[cardType] [varchar](100) NULL,
	[CardImage] [varchar](100) NULL,
 CONSTRAINT [PK_HX_TD_LLBACK] PRIMARY KEY CLUSTERED 
(
	[LLbankid] ASC
)WITH (PAD_INDEX  = OFF, STATISTICS_NORECOMPUTE  = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS  = ON, ALLOW_PAGE_LOCKS  = ON) ON [PRIMARY]
) ON [PRIMARY]
GO
SET ANSI_PADDING OFF
GO
CREATE NONCLUSTERED INDEX [IX_hx_td_LLBack] ON [dbo].[hx_td_LLBack] 
(
	[BankCode] ASC
)WITH (PAD_INDEX  = OFF, STATISTICS_NORECOMPUTE  = OFF, SORT_IN_TEMPDB = OFF, IGNORE_DUP_KEY = OFF, DROP_EXISTING = OFF, ONLINE = OFF, ALLOW_ROW_LOCKS  = ON, ALLOW_PAGE_LOCKS  = ON) ON [PRIMARY]
GO
/****** Object:  View [dbo].[V_LLBack_Card_List]    Script Date: 09/27/2016 10:30:13 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE VIEW [dbo].[V_LLBack_Card_List]
AS
SELECT     dbo.hx_td_LLPay_bindCard.BankCode, dbo.hx_td_LLPay_bindCard.bindCardid, dbo.hx_td_LLPay_bindCard.Usrid, dbo.hx_td_LLPay_bindCard.BankCard, 
                      dbo.hx_td_LLPay_bindCard.Bindtime, dbo.hx_td_LLPay_bindCard.Re_Amt, dbo.hx_td_LLPay_bindCard.Quota, dbo.hx_td_LLPay_bindCard.Citycode, 
                      dbo.hx_td_LLPay_bindCard.branch, dbo.hx_td_LLPay_bindCard.no_agree, dbo.hx_td_LLPay_bindCard.cardstate, dbo.hx_td_LLBack.BankName, 
                      dbo.hx_td_LLBack.CardImage, dbo.hx_member_table.registerid, dbo.hx_member_table.realname, dbo.hx_td_LLPay_bindCard.province_code
FROM         dbo.hx_td_LLBack INNER JOIN
                      dbo.hx_td_LLPay_bindCard ON dbo.hx_td_LLBack.BankCode = dbo.hx_td_LLPay_bindCard.BankCode INNER JOIN
                      dbo.hx_member_table ON dbo.hx_td_LLPay_bindCard.Usrid = dbo.hx_member_table.registerid
GO
EXEC sys.sp_addextendedproperty @name=N'MS_DiagramPane1', @value=N'[0E232FF0-B466-11cf-A24F-00AA00A3EFFF, 1.00]
Begin DesignProperties = 
   Begin PaneConfigurations = 
      Begin PaneConfiguration = 0
         NumPanes = 4
         Configuration = "(H (1[41] 4[20] 2[11] 3) )"
      End
      Begin PaneConfiguration = 1
         NumPanes = 3
         Configuration = "(H (1 [50] 4 [25] 3))"
      End
      Begin PaneConfiguration = 2
         NumPanes = 3
         Configuration = "(H (1 [50] 2 [25] 3))"
      End
      Begin PaneConfiguration = 3
         NumPanes = 3
         Configuration = "(H (4 [30] 2 [40] 3))"
      End
      Begin PaneConfiguration = 4
         NumPanes = 2
         Configuration = "(H (1 [56] 3))"
      End
      Begin PaneConfiguration = 5
         NumPanes = 2
         Configuration = "(H (2 [66] 3))"
      End
      Begin PaneConfiguration = 6
         NumPanes = 2
         Configuration = "(H (4 [50] 3))"
      End
      Begin PaneConfiguration = 7
         NumPanes = 1
         Configuration = "(V (3))"
      End
      Begin PaneConfiguration = 8
         NumPanes = 3
         Configuration = "(H (1[56] 4[18] 2) )"
      End
      Begin PaneConfiguration = 9
         NumPanes = 2
         Configuration = "(H (1 [75] 4))"
      End
      Begin PaneConfiguration = 10
         NumPanes = 2
         Configuration = "(H (1[66] 2) )"
      End
      Begin PaneConfiguration = 11
         NumPanes = 2
         Configuration = "(H (4 [60] 2))"
      End
      Begin PaneConfiguration = 12
         NumPanes = 1
         Configuration = "(H (1) )"
      End
      Begin PaneConfiguration = 13
         NumPanes = 1
         Configuration = "(V (4))"
      End
      Begin PaneConfiguration = 14
         NumPanes = 1
         Configuration = "(V (2))"
      End
      ActivePaneConfig = 0
   End
   Begin DiagramPane = 
      Begin Origin = 
         Top = 0
         Left = 0
      End
      Begin Tables = 
         Begin Table = "hx_td_LLBack"
            Begin Extent = 
               Top = 6
               Left = 38
               Bottom = 147
               Right = 171
            End
            DisplayFlags = 280
            TopColumn = 0
         End
         Begin Table = "hx_td_LLPay_bindCard"
            Begin Extent = 
               Top = 6
               Left = 209
               Bottom = 158
               Right = 342
            End
            DisplayFlags = 280
            TopColumn = 5
         End
         Begin Table = "hx_member_table"
            Begin Extent = 
               Top = 6
               Left = 380
               Bottom = 167
               Right = 567
            End
            DisplayFlags = 280
            TopColumn = 0
         End
      End
   End
   Begin SQLPane = 
   End
   Begin DataPane = 
      Begin ParameterDefaults = ""
      End
      Begin ColumnWidths = 18
         Width = 284
         Width = 1500
         Width = 1500
         Width = 1500
         Width = 1500
         Width = 1500
         Width = 1500
         Width = 1500
         Width = 1500
         Width = 1500
         Width = 1500
         Width = 1500
         Width = 1500
         Width = 1500
         Width = 1500
         Width = 1500
         Width = 1500
         Width = 1500
      End
   End
   Begin CriteriaPane = 
      Begin ColumnWidths = 11
         Column = 1440
         Alias = 2610
         Table = 1170
         Output = 720
         Append = 1400
         NewValue = 1170
         SortType = 1350
         SortOrder = 1410
         GroupBy = 1350
         Filter = 1350
         Or = 1350
         Or = 1350
         Or = 1350
      End
   End
End
' , @level0type=N'SCHEMA',@level0name=N'dbo', @level1type=N'VIEW',@level1name=N'V_LLBack_Card_List'
GO
EXEC sys.sp_addextendedproperty @name=N'MS_DiagramPaneCount', @value=1 , @level0type=N'SCHEMA',@level0name=N'dbo', @level1type=N'VIEW',@level1name=N'V_LLBack_Card_List'
GO
/****** Object:  Table [dbo].[hx_td_LL_cash]    Script Date: 09/27/2016 10:30:13 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
SET ANSI_PADDING ON
GO
CREATE TABLE [dbo].[hx_td_LL_cash](
	[LLcashid] [int] IDENTITY(1,1) NOT NULL,
	[no_order] [varchar](32) NULL,
	[dt_order] [varchar](32) NULL,
	[money_order] [decimal](18, 2) NULL,
	[acct_name] [varchar](100) NULL,
	[bank_code] [varchar](100) NULL,
	[province_code] [varchar](100) NULL,
	[city_code] [varchar](100) NULL,
	[brabank_name] [varchar](100) NULL,
	[ordertime] [datetime] NULL,
	[card_no] [varchar](100) NULL,
	[paystate] [int] NULL,
	[Usrid] [int] NULL,
	[OperTime] [datetime] NULL,
	[Remarks] [varchar](max) NULL,
 CONSTRAINT [PK_HX_TD_LL_CASH] PRIMARY KEY CLUSTERED 
(
	[LLcashid] ASC
)WITH (PAD_INDEX  = OFF, STATISTICS_NORECOMPUTE  = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS  = ON, ALLOW_PAGE_LOCKS  = ON) ON [PRIMARY]
) ON [PRIMARY]
GO
SET ANSI_PADDING OFF
GO
CREATE NONCLUSTERED INDEX [IX_hx_td_LL_cash] ON [dbo].[hx_td_LL_cash] 
(
	[Usrid] ASC
)WITH (PAD_INDEX  = OFF, STATISTICS_NORECOMPUTE  = OFF, SORT_IN_TEMPDB = OFF, IGNORE_DUP_KEY = OFF, DROP_EXISTING = OFF, ONLINE = OFF, ALLOW_ROW_LOCKS  = ON, ALLOW_PAGE_LOCKS  = ON) ON [PRIMARY]
GO
CREATE NONCLUSTERED INDEX [IX_hx_td_LL_cash_1] ON [dbo].[hx_td_LL_cash] 
(
	[bank_code] ASC
)WITH (PAD_INDEX  = OFF, STATISTICS_NORECOMPUTE  = OFF, SORT_IN_TEMPDB = OFF, IGNORE_DUP_KEY = OFF, DROP_EXISTING = OFF, ONLINE = OFF, ALLOW_ROW_LOCKS  = ON, ALLOW_PAGE_LOCKS  = ON) ON [PRIMARY]
GO
CREATE NONCLUSTERED INDEX [IX_hx_td_LL_cash_2] ON [dbo].[hx_td_LL_cash] 
(
	[no_order] ASC
)WITH (PAD_INDEX  = OFF, STATISTICS_NORECOMPUTE  = OFF, SORT_IN_TEMPDB = OFF, IGNORE_DUP_KEY = OFF, DROP_EXISTING = OFF, ONLINE = OFF, ALLOW_ROW_LOCKS  = ON, ALLOW_PAGE_LOCKS  = ON) ON [PRIMARY]
GO
EXEC sys.sp_addextendedproperty @name=N'MS_Description', @value=N'时间格式 YYYYMMDDH24MISS' , @level0type=N'SCHEMA',@level0name=N'dbo', @level1type=N'TABLE',@level1name=N'hx_td_LL_cash', @level2type=N'COLUMN',@level2name=N'dt_order'
GO
EXEC sys.sp_addextendedproperty @name=N'MS_Description', @value=N'0 默认  1成功  2失败' , @level0type=N'SCHEMA',@level0name=N'dbo', @level1type=N'TABLE',@level1name=N'hx_td_LL_cash', @level2type=N'COLUMN',@level2name=N'paystate'
GO
/****** Object:  View [dbo].[V_LL_Cash_User]    Script Date: 09/27/2016 10:30:13 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE VIEW [dbo].[V_LL_Cash_User]

AS
SELECT     dbo.hx_td_LL_cash.LLcashid, dbo.hx_td_LL_cash.no_order, dbo.hx_td_LL_cash.dt_order, dbo.hx_td_LL_cash.money_order, dbo.hx_td_LL_cash.acct_name, 

                      dbo.hx_td_LL_cash.province_code, dbo.hx_td_LL_cash.city_code, dbo.hx_td_LL_cash.brabank_name, dbo.hx_td_LL_cash.ordertime, dbo.hx_td_LL_cash.card_no, 

                      dbo.hx_td_LL_cash.paystate, dbo.hx_td_LL_cash.Usrid, dbo.hx_member_table.registerid, dbo.hx_member_table.username, dbo.hx_member_table.mobile, 

                      dbo.hx_td_LLBack.BankName, dbo.hx_td_LL_cash.bank_code, dbo.hx_td_LL_cash.OperTime, dbo.hx_td_LLpay_re_cash.h_state, 

                      dbo.hx_td_LLpay_re_cash.htype

FROM         dbo.hx_td_LL_cash INNER JOIN

                      dbo.hx_member_table ON dbo.hx_td_LL_cash.Usrid = dbo.hx_member_table.registerid INNER JOIN

                      dbo.hx_td_LLBack ON dbo.hx_td_LL_cash.bank_code = dbo.hx_td_LLBack.BankCode INNER JOIN

                      dbo.hx_td_LLpay_re_cash ON dbo.hx_td_LL_cash.no_order = dbo.hx_td_LLpay_re_cash.no_order and hx_td_LL_cash.ordertime=hx_td_LLpay_re_cash.OrdTime

WHERE     (dbo.hx_td_LLpay_re_cash.htype = 1)
GO
EXEC sys.sp_addextendedproperty @name=N'MS_DiagramPane1', @value=N'[0E232FF0-B466-11cf-A24F-00AA00A3EFFF, 1.00]
Begin DesignProperties = 
   Begin PaneConfigurations = 
      Begin PaneConfiguration = 0
         NumPanes = 4
         Configuration = "(H (1[40] 4[20] 2[20] 3) )"
      End
      Begin PaneConfiguration = 1
         NumPanes = 3
         Configuration = "(H (1 [50] 4 [25] 3))"
      End
      Begin PaneConfiguration = 2
         NumPanes = 3
         Configuration = "(H (1 [50] 2 [25] 3))"
      End
      Begin PaneConfiguration = 3
         NumPanes = 3
         Configuration = "(H (4 [30] 2 [40] 3))"
      End
      Begin PaneConfiguration = 4
         NumPanes = 2
         Configuration = "(H (1 [56] 3))"
      End
      Begin PaneConfiguration = 5
         NumPanes = 2
         Configuration = "(H (2 [66] 3))"
      End
      Begin PaneConfiguration = 6
         NumPanes = 2
         Configuration = "(H (4 [50] 3))"
      End
      Begin PaneConfiguration = 7
         NumPanes = 1
         Configuration = "(V (3))"
      End
      Begin PaneConfiguration = 8
         NumPanes = 3
         Configuration = "(H (1[56] 4[18] 2) )"
      End
      Begin PaneConfiguration = 9
         NumPanes = 2
         Configuration = "(H (1 [75] 4))"
      End
      Begin PaneConfiguration = 10
         NumPanes = 2
         Configuration = "(H (1[66] 2) )"
      End
      Begin PaneConfiguration = 11
         NumPanes = 2
         Configuration = "(H (4 [60] 2))"
      End
      Begin PaneConfiguration = 12
         NumPanes = 1
         Configuration = "(H (1) )"
      End
      Begin PaneConfiguration = 13
         NumPanes = 1
         Configuration = "(V (4))"
      End
      Begin PaneConfiguration = 14
         NumPanes = 1
         Configuration = "(V (2))"
      End
      ActivePaneConfig = 0
   End
   Begin DiagramPane = 
      Begin Origin = 
         Top = 0
         Left = 0
      End
      Begin Tables = 
         Begin Table = "hx_td_LL_cash"
            Begin Extent = 
               Top = 6
               Left = 254
               Bottom = 191
               Right = 411
            End
            DisplayFlags = 280
            TopColumn = 5
         End
         Begin Table = "hx_member_table"
            Begin Extent = 
               Top = 14
               Left = 666
               Bottom = 195
               Right = 853
            End
            DisplayFlags = 280
            TopColumn = 0
         End
         Begin Table = "hx_td_LLBack"
            Begin Extent = 
               Top = 6
               Left = 38
               Bottom = 114
               Right = 171
            End
            DisplayFlags = 280
            TopColumn = 0
         End
         Begin Table = "hx_td_LLpay_re_cash"
            Begin Extent = 
               Top = 6
               Left = 449
               Bottom = 192
               Right = 582
            End
            DisplayFlags = 280
            TopColumn = 1
         End
      End
   End
   Begin SQLPane = 
   End
   Begin DataPane = 
      Begin ParameterDefaults = ""
      End
      Begin ColumnWidths = 21
         Width = 284
         Width = 1500
         Width = 1500
         Width = 1500
         Width = 1500
         Width = 1500
         Width = 1500
         Width = 1500
         Width = 1500
         Width = 1500
         Width = 1500
         Width = 1500
         Width = 1500
         Width = 1500
         Width = 1500
         Width = 1500
         Width = 1500
         Width = 1500
         Width = 1500
         Width = 1500
         Width = 1500
      End
   End
   Begin CriteriaPane = 
      Begin ColumnWidths = 11
         Co' , @level0type=N'SCHEMA',@level0name=N'dbo', @level1type=N'VIEW',@level1name=N'V_LL_Cash_User'
GO
EXEC sys.sp_addextendedproperty @name=N'MS_DiagramPane2', @value=N'lumn = 1440
         Alias = 900
         Table = 1170
         Output = 720
         Append = 1400
         NewValue = 1170
         SortType = 1350
         SortOrder = 1410
         GroupBy = 1350
         Filter = 1350
         Or = 1350
         Or = 1350
         Or = 1350
      End
   End
End
' , @level0type=N'SCHEMA',@level0name=N'dbo', @level1type=N'VIEW',@level1name=N'V_LL_Cash_User'
GO
EXEC sys.sp_addextendedproperty @name=N'MS_DiagramPaneCount', @value=2 , @level0type=N'SCHEMA',@level0name=N'dbo', @level1type=N'VIEW',@level1name=N'V_LL_Cash_User'
GO
/****** Object:  Table [dbo].[hx_td_Links]    Script Date: 09/27/2016 10:30:13 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
SET ANSI_PADDING ON
GO
CREATE TABLE [dbo].[hx_td_Links](
	[Linkid] [int] IDENTITY(1,1) NOT NULL,
	[Linkname] [varchar](100) NULL,
	[LinkUrl] [varchar](100) NULL,
	[LinkType] [int] NULL,
	[LinkLogo] [varchar](300) NULL,
	[createtime] [datetime] NULL,
	[Linkstate] [int] NULL
) ON [PRIMARY]
GO
SET ANSI_PADDING OFF
GO
/****** Object:  View [dbo].[V_hx_Bid_records_borrowing_target_uc]    Script Date: 09/27/2016 10:30:13 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE VIEW [dbo].[V_hx_Bid_records_borrowing_target_uc]
AS
SELECT DISTINCT 
                      dbo.hx_borrowing_target.borrowing_title, dbo.hx_Bid_records.bid_records_id, dbo.hx_Bid_records.borrower_registerid, dbo.hx_Bid_records.targetid, 
                      dbo.hx_Bid_records.loan_number, dbo.hx_Bid_records.annual_interest_rate, dbo.hx_Bid_records.current_period, dbo.hx_Bid_records.investment_amount, 
                      dbo.hx_Bid_records.value_date, dbo.hx_Bid_records.investment_maturity, dbo.hx_Bid_records.invest_time, dbo.hx_Bid_records.invest_state, 
                      dbo.hx_Bid_records.flow_return, dbo.hx_Bid_records.repayment_amount, dbo.hx_Bid_records.repayment_period, dbo.hx_Bid_records.investor_registerid, 
                      dbo.hx_Bid_records.payment_status, dbo.hx_Bid_records.withoutinterest, dbo.hx_Bid_records.haveinterest, dbo.hx_member_table.username, 
                      dbo.hx_member_table.realname, dbo.hx_member_table.registerid, dbo.hx_borrowing_target.payment_options, dbo.hx_Bid_records.contractid, 
                      dbo.hx_Bid_records.contractpath, dbo.hx_borrowing_target.life_of_loan, dbo.hx_borrowing_target.unit_day, dbo.hx_member_table.mobile, 
                      dbo.hx_member_table.UsrCustId, dbo.hx_td_frozen.FrozenidAmount, dbo.hx_td_frozen.FrozenidNo, dbo.hx_td_frozen.FrozenState, dbo.hx_td_frozen.FreezeTrxId, 
                      hx_member_table_1.UsrCustId AS borrUsrCustid, dbo.hx_member_table.available_balance, dbo.hx_borrowing_target.tender_state, 
                      dbo.hx_Bid_records.invitationcode, hx_member_table_1.realname AS borrealname, hx_member_table_1.username AS borusername, dbo.hx_Bid_records.OrdId, 
                      dbo.hx_borrowing_target.borrowing_balance, dbo.hx_Bid_records.ordstate, dbo.hx_member_table.frozen_sum
FROM         dbo.hx_borrowing_target INNER JOIN
                      dbo.hx_Bid_records ON dbo.hx_borrowing_target.targetid = dbo.hx_Bid_records.targetid INNER JOIN
                      dbo.hx_member_table ON dbo.hx_Bid_records.investor_registerid = dbo.hx_member_table.registerid INNER JOIN
                      dbo.hx_member_table AS hx_member_table_1 ON dbo.hx_Bid_records.borrower_registerid = hx_member_table_1.registerid INNER JOIN
                      dbo.hx_td_frozen ON dbo.hx_Bid_records.investor_registerid = dbo.hx_td_frozen.MBT_Registerid AND 
                      dbo.hx_Bid_records.bid_records_id = dbo.hx_td_frozen.bid_records_id
WHERE     (dbo.hx_Bid_records.ordstate = 0)
GO
EXEC sys.sp_addextendedproperty @name=N'MS_DiagramPane1', @value=N'[0E232FF0-B466-11cf-A24F-00AA00A3EFFF, 1.00]
Begin DesignProperties = 
   Begin PaneConfigurations = 
      Begin PaneConfiguration = 0
         NumPanes = 4
         Configuration = "(H (1[36] 4[25] 2[14] 3) )"
      End
      Begin PaneConfiguration = 1
         NumPanes = 3
         Configuration = "(H (1 [50] 4 [25] 3))"
      End
      Begin PaneConfiguration = 2
         NumPanes = 3
         Configuration = "(H (1 [50] 2 [25] 3))"
      End
      Begin PaneConfiguration = 3
         NumPanes = 3
         Configuration = "(H (4 [30] 2 [40] 3))"
      End
      Begin PaneConfiguration = 4
         NumPanes = 2
         Configuration = "(H (1 [56] 3))"
      End
      Begin PaneConfiguration = 5
         NumPanes = 2
         Configuration = "(H (2 [66] 3))"
      End
      Begin PaneConfiguration = 6
         NumPanes = 2
         Configuration = "(H (4 [50] 3))"
      End
      Begin PaneConfiguration = 7
         NumPanes = 1
         Configuration = "(V (3))"
      End
      Begin PaneConfiguration = 8
         NumPanes = 3
         Configuration = "(H (1[56] 4[18] 2) )"
      End
      Begin PaneConfiguration = 9
         NumPanes = 2
         Configuration = "(H (1 [75] 4))"
      End
      Begin PaneConfiguration = 10
         NumPanes = 2
         Configuration = "(H (1[66] 2) )"
      End
      Begin PaneConfiguration = 11
         NumPanes = 2
         Configuration = "(H (4 [60] 2))"
      End
      Begin PaneConfiguration = 12
         NumPanes = 1
         Configuration = "(H (1) )"
      End
      Begin PaneConfiguration = 13
         NumPanes = 1
         Configuration = "(V (4))"
      End
      Begin PaneConfiguration = 14
         NumPanes = 1
         Configuration = "(V (2))"
      End
      ActivePaneConfig = 0
   End
   Begin DiagramPane = 
      Begin Origin = 
         Top = -192
         Left = -271
      End
      Begin Tables = 
         Begin Table = "hx_borrowing_target"
            Begin Extent = 
               Top = 18
               Left = 20
               Bottom = 191
               Right = 283
            End
            DisplayFlags = 280
            TopColumn = 8
         End
         Begin Table = "hx_Bid_records"
            Begin Extent = 
               Top = 76
               Left = 356
               Bottom = 275
               Right = 537
            End
            DisplayFlags = 280
            TopColumn = 13
         End
         Begin Table = "hx_member_table"
            Begin Extent = 
               Top = 207
               Left = 605
               Bottom = 393
               Right = 792
            End
            DisplayFlags = 280
            TopColumn = 14
         End
         Begin Table = "hx_member_table_1"
            Begin Extent = 
               Top = 0
               Left = 633
               Bottom = 108
               Right = 820
            End
            DisplayFlags = 280
            TopColumn = 0
         End
         Begin Table = "hx_td_frozen"
            Begin Extent = 
               Top = 106
               Left = 731
               Bottom = 214
               Right = 889
            End
            DisplayFlags = 280
            TopColumn = 6
         End
      End
   End
   Begin SQLPane = 
   End
   Begin DataPane = 
      Begin ParameterDefaults = ""
      End
      Begin ColumnWidths = 39
         Width = 284
         Width = 1995
         Width = 1500
         Width = 1500
         Width = 1500
         Width = 1500
         Width = 1500
         Width = 1500
         Width = 1500
         Width = 1500
         Width = 1500
         Width = 1500
         ' , @level0type=N'SCHEMA',@level0name=N'dbo', @level1type=N'VIEW',@level1name=N'V_hx_Bid_records_borrowing_target_uc'
GO
EXEC sys.sp_addextendedproperty @name=N'MS_DiagramPane2', @value=N'Width = 1500
         Width = 1500
         Width = 1500
         Width = 1500
         Width = 1500
         Width = 1500
         Width = 1500
         Width = 1500
         Width = 1500
         Width = 1500
         Width = 1500
         Width = 1500
         Width = 1500
         Width = 1500
         Width = 1500
         Width = 1500
         Width = 1500
         Width = 1500
         Width = 1500
         Width = 1500
         Width = 1500
         Width = 1500
         Width = 1500
         Width = 1500
         Width = 1500
         Width = 1500
         Width = 1500
      End
   End
   Begin CriteriaPane = 
      Begin ColumnWidths = 11
         Column = 1440
         Alias = 2745
         Table = 2085
         Output = 720
         Append = 1400
         NewValue = 1170
         SortType = 1350
         SortOrder = 1410
         GroupBy = 1350
         Filter = 1350
         Or = 1350
         Or = 1350
         Or = 1350
      End
   End
End
' , @level0type=N'SCHEMA',@level0name=N'dbo', @level1type=N'VIEW',@level1name=N'V_hx_Bid_records_borrowing_target_uc'
GO
EXEC sys.sp_addextendedproperty @name=N'MS_DiagramPaneCount', @value=2 , @level0type=N'SCHEMA',@level0name=N'dbo', @level1type=N'VIEW',@level1name=N'V_hx_Bid_records_borrowing_target_uc'
GO
/****** Object:  View [dbo].[V_Bid_Frozen]    Script Date: 09/27/2016 10:30:13 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE VIEW [dbo].[V_Bid_Frozen]
AS
SELECT     dbo.hx_Bid_records.bid_records_id, dbo.hx_Bid_records.OrdId, dbo.hx_Bid_records.ordstate, dbo.hx_td_frozen.Frozenid, dbo.hx_td_frozen.UsrCustId, 
                      dbo.hx_td_frozen.FreezeTrxId, dbo.hx_td_frozen.FrozenState, dbo.hx_td_frozen.FrozenidNo, dbo.hx_td_frozen.targetid
FROM         dbo.hx_Bid_records INNER JOIN
                      dbo.hx_td_frozen ON dbo.hx_Bid_records.bid_records_id = dbo.hx_td_frozen.bid_records_id
GO
EXEC sys.sp_addextendedproperty @name=N'MS_DiagramPane1', @value=N'[0E232FF0-B466-11cf-A24F-00AA00A3EFFF, 1.00]
Begin DesignProperties = 
   Begin PaneConfigurations = 
      Begin PaneConfiguration = 0
         NumPanes = 4
         Configuration = "(H (1[21] 4[29] 2[2] 3) )"
      End
      Begin PaneConfiguration = 1
         NumPanes = 3
         Configuration = "(H (1 [50] 4 [25] 3))"
      End
      Begin PaneConfiguration = 2
         NumPanes = 3
         Configuration = "(H (1 [50] 2 [25] 3))"
      End
      Begin PaneConfiguration = 3
         NumPanes = 3
         Configuration = "(H (4 [30] 2 [40] 3))"
      End
      Begin PaneConfiguration = 4
         NumPanes = 2
         Configuration = "(H (1 [56] 3))"
      End
      Begin PaneConfiguration = 5
         NumPanes = 2
         Configuration = "(H (2 [66] 3))"
      End
      Begin PaneConfiguration = 6
         NumPanes = 2
         Configuration = "(H (4 [50] 3))"
      End
      Begin PaneConfiguration = 7
         NumPanes = 1
         Configuration = "(V (3))"
      End
      Begin PaneConfiguration = 8
         NumPanes = 3
         Configuration = "(H (1[56] 4[18] 2) )"
      End
      Begin PaneConfiguration = 9
         NumPanes = 2
         Configuration = "(H (1 [75] 4))"
      End
      Begin PaneConfiguration = 10
         NumPanes = 2
         Configuration = "(H (1[66] 2) )"
      End
      Begin PaneConfiguration = 11
         NumPanes = 2
         Configuration = "(H (4 [60] 2))"
      End
      Begin PaneConfiguration = 12
         NumPanes = 1
         Configuration = "(H (1) )"
      End
      Begin PaneConfiguration = 13
         NumPanes = 1
         Configuration = "(V (4))"
      End
      Begin PaneConfiguration = 14
         NumPanes = 1
         Configuration = "(V (2))"
      End
      ActivePaneConfig = 0
   End
   Begin DiagramPane = 
      Begin Origin = 
         Top = 0
         Left = 0
      End
      Begin Tables = 
         Begin Table = "hx_Bid_records"
            Begin Extent = 
               Top = 6
               Left = 38
               Bottom = 203
               Right = 219
            End
            DisplayFlags = 280
            TopColumn = 13
         End
         Begin Table = "hx_td_frozen"
            Begin Extent = 
               Top = 6
               Left = 257
               Bottom = 179
               Right = 415
            End
            DisplayFlags = 280
            TopColumn = 2
         End
      End
   End
   Begin SQLPane = 
   End
   Begin DataPane = 
      Begin ParameterDefaults = ""
      End
      Begin ColumnWidths = 9
         Width = 284
         Width = 1500
         Width = 1500
         Width = 1500
         Width = 1500
         Width = 1500
         Width = 1500
         Width = 1500
         Width = 1500
      End
   End
   Begin CriteriaPane = 
      Begin ColumnWidths = 11
         Column = 1440
         Alias = 900
         Table = 1170
         Output = 720
         Append = 1400
         NewValue = 1170
         SortType = 1350
         SortOrder = 1410
         GroupBy = 1350
         Filter = 1350
         Or = 1350
         Or = 1350
         Or = 1350
      End
   End
End
' , @level0type=N'SCHEMA',@level0name=N'dbo', @level1type=N'VIEW',@level1name=N'V_Bid_Frozen'
GO
EXEC sys.sp_addextendedproperty @name=N'MS_DiagramPaneCount', @value=1 , @level0type=N'SCHEMA',@level0name=N'dbo', @level1type=N'VIEW',@level1name=N'V_Bid_Frozen'
GO
/****** Object:  StoredProcedure [dbo].[prRepayment]    Script Date: 09/27/2016 10:30:13 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE PROC [dbo].[prRepayment]



@recordId int,

@amt decimal(18,2)

 as

BEGIN



DECLARE @ordId DECIMAL(20)

DECLARE @targetId int

DECLARE @subOrdId VARCHAR(50)



DECLARE @inCustId VARCHAR(50)

DECLARE @outCustId VARCHAR(50)



DECLARE @unFreezeOrdId VARCHAR(50)



DECLARE @freezeTrxId VARCHAR(50)

DECLARE @loanOrdId VARCHAR(50)

DECLARE @loanDate DATETIME

select @ordId=OrdId,@targetId=targetid from hx_Bid_records where bid_records_id= @recordId



select @unFreezeOrdId=FrozenidNo,@freezeTrxId=FreezeTrxId from dbo.hx_td_frozen where bid_records_id=@recordId 

SELECT @loanOrdId=LoanOrdId,@loanDate=LoanDate FROM dbo.hx_td_Loan_records WHERE bid_records_id=@recordId



 





DECLARE @free DECIMAL(10,2) 

 

SELECT @free=Free,@inCustId=InCustId,@outCustId=OutCustId FROM hx_td_Loan_records WHERE targetid=@targetId AND LoanAMT=@amt

 

print '================================='

print @loanOrdId

print '================================='

if(@loanOrdId is null or @loanOrdId='' )

begin

	print '暂时无放款数据,生成放款数据'

 

	SELECT @loanOrdId=FrozenidNo,@loanDate=FrozenDate FROM dbo.hx_td_frozen WHERE bid_records_id=@recordId

	IF(@free IS NULL )

	BEGIN 

		print '无放款记录'

	END

	PRINT @free

	INSERT INTO [dbo].[hx_td_Loan_records]

           ([targetid]

           ,[bid_records_id]

           ,[InCustId]

           ,[OutCustId]

           ,[LoanAMT]

           ,[LoanOrdId]

           ,[LoanDate]

           ,[Free]

           ,[DivDetails]

           ,[SubOrdid]

           ,[SubOrdDate]

           ,[unFreezeOrdId]

           ,[FreezeTrxId]

           ,[bid_orderid])

     VALUES

           (@targetId

           ,@recordId

           ,@inCustId

           ,@outCustId

           ,@amt

           ,@loanOrdId

           ,@loanDate

           ,@free

           ,''

           ,@ordId

           ,@loanDate

           ,@unFreezeOrdId

           ,@freezeTrxId

           ,@ordId)



	PRINT 'targetId：'+CAST(@targetId AS NVARCHAR(50))

	PRINT '入账商户号：'+@inCustId

	PRINT '出账商户号：'+@outCustId

	PRINT '订单号：'+CAST(@ordId AS NVARCHAR(50))

	PRINT '唯一冻结标识：'+CAST(@freezeTrxId AS NVARCHAR(50))

	PRINT '解冻号：'+CAST(@unFreezeOrdId AS NVARCHAR(50))

	PRINT '放款号：'+CAST(@loanOrdId AS NVARCHAR(50))

	PRINT '放款时间：'+CAST(@loanDate AS NVARCHAR(50))

	PRINT 'subOrdid=订单号 unFreezeOrdId=解冻号,FreezeTrxId=唯一冻结标识,bid_orderid=订单号'

end



else

begin

PRINT '存在放款记录，去放款'

end

end
GO
/****** Object:  Table [dbo].[hx_td_department_child]    Script Date: 09/27/2016 10:30:13 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE TABLE [dbo].[hx_td_department_child](
	[id] [int] IDENTITY(1,1) NOT NULL,
	[department_id] [int] NULL,
	[menu_id] [int] NULL,
	[isread] [int] NULL,
	[isadd] [int] NULL,
	[isedit] [int] NULL,
	[isdelete] [int] NULL,
 CONSTRAINT [PK_hx_td_department_child] PRIMARY KEY CLUSTERED 
(
	[id] ASC
)WITH (PAD_INDEX  = OFF, STATISTICS_NORECOMPUTE  = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS  = ON, ALLOW_PAGE_LOCKS  = ON) ON [PRIMARY]
) ON [PRIMARY]
GO
/****** Object:  Table [dbo].[hx_td_department]    Script Date: 09/27/2016 10:30:13 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
SET ANSI_PADDING ON
GO
CREATE TABLE [dbo].[hx_td_department](
	[department_id] [int] IDENTITY(1,1) NOT NULL,
	[department_name] [varchar](20) NULL,
	[parentid] [int] NULL,
	[parentpath] [varchar](50) NULL,
	[depath] [int] NULL,
	[rootid] [int] NULL,
	[child] [int] NULL,
	[previd] [int] NULL,
	[nextid] [int] NULL,
	[orderid] [int] NULL,
	[createtime] [datetime] NULL,
 CONSTRAINT [PK_hx_td_department] PRIMARY KEY CLUSTERED 
(
	[department_id] ASC
)WITH (PAD_INDEX  = OFF, STATISTICS_NORECOMPUTE  = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS  = ON, ALLOW_PAGE_LOCKS  = ON) ON [PRIMARY]
) ON [PRIMARY]
GO
SET ANSI_PADDING OFF
GO
/****** Object:  Table [dbo].[hx_td_Bank]    Script Date: 09/27/2016 10:30:13 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
SET ANSI_PADDING ON
GO
CREATE TABLE [dbo].[hx_td_Bank](
	[Bankid] [int] IDENTITY(1,1) NOT NULL,
	[BankName] [varchar](50) NULL,
	[OpenBankId] [varchar](50) NULL,
 CONSTRAINT [PK_HX_TD_BANK] PRIMARY KEY CLUSTERED 
(
	[Bankid] ASC
)WITH (PAD_INDEX  = OFF, STATISTICS_NORECOMPUTE  = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS  = ON, ALLOW_PAGE_LOCKS  = ON) ON [PRIMARY]
) ON [PRIMARY]
GO
SET ANSI_PADDING OFF
GO
CREATE NONCLUSTERED INDEX [IX_hx_td_Bank] ON [dbo].[hx_td_Bank] 
(
	[OpenBankId] ASC
)WITH (PAD_INDEX  = OFF, STATISTICS_NORECOMPUTE  = OFF, SORT_IN_TEMPDB = OFF, IGNORE_DUP_KEY = OFF, DROP_EXISTING = OFF, ONLINE = OFF, ALLOW_ROW_LOCKS  = ON, ALLOW_PAGE_LOCKS  = ON) ON [PRIMARY]
GO
/****** Object:  View [dbo].[V_UsrBindCardBank]    Script Date: 09/27/2016 10:30:13 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE VIEW [dbo].[V_UsrBindCardBank]
AS
SELECT     dbo.hx_UsrBindCardC.UsrBindCardID, dbo.hx_UsrBindCardC.UsrCustId, dbo.hx_UsrBindCardC.OpenAcctId, dbo.hx_UsrBindCardC.OpenBankId, 
                      dbo.hx_UsrBindCardC.defCard, dbo.hx_td_Bank.BankName, dbo.hx_td_Bank.OpenBankId AS Expr1, dbo.hx_member_table.username, 
                      dbo.hx_member_table.realname, dbo.hx_member_table.registerid
FROM         dbo.hx_UsrBindCardC INNER JOIN
                      dbo.hx_td_Bank ON dbo.hx_UsrBindCardC.OpenBankId = dbo.hx_td_Bank.OpenBankId INNER JOIN
                      dbo.hx_member_table ON dbo.hx_UsrBindCardC.UsrCustId = dbo.hx_member_table.UsrCustId
GO
EXEC sys.sp_addextendedproperty @name=N'MS_DiagramPane1', @value=N'[0E232FF0-B466-11cf-A24F-00AA00A3EFFF, 1.00]
Begin DesignProperties = 
   Begin PaneConfigurations = 
      Begin PaneConfiguration = 0
         NumPanes = 4
         Configuration = "(H (1[40] 4[20] 2[20] 3) )"
      End
      Begin PaneConfiguration = 1
         NumPanes = 3
         Configuration = "(H (1 [50] 4 [25] 3))"
      End
      Begin PaneConfiguration = 2
         NumPanes = 3
         Configuration = "(H (1 [50] 2 [25] 3))"
      End
      Begin PaneConfiguration = 3
         NumPanes = 3
         Configuration = "(H (4 [30] 2 [40] 3))"
      End
      Begin PaneConfiguration = 4
         NumPanes = 2
         Configuration = "(H (1 [56] 3))"
      End
      Begin PaneConfiguration = 5
         NumPanes = 2
         Configuration = "(H (2 [66] 3))"
      End
      Begin PaneConfiguration = 6
         NumPanes = 2
         Configuration = "(H (4 [50] 3))"
      End
      Begin PaneConfiguration = 7
         NumPanes = 1
         Configuration = "(V (3))"
      End
      Begin PaneConfiguration = 8
         NumPanes = 3
         Configuration = "(H (1[56] 4[18] 2) )"
      End
      Begin PaneConfiguration = 9
         NumPanes = 2
         Configuration = "(H (1 [75] 4))"
      End
      Begin PaneConfiguration = 10
         NumPanes = 2
         Configuration = "(H (1[66] 2) )"
      End
      Begin PaneConfiguration = 11
         NumPanes = 2
         Configuration = "(H (4 [60] 2))"
      End
      Begin PaneConfiguration = 12
         NumPanes = 1
         Configuration = "(H (1) )"
      End
      Begin PaneConfiguration = 13
         NumPanes = 1
         Configuration = "(V (4))"
      End
      Begin PaneConfiguration = 14
         NumPanes = 1
         Configuration = "(V (2))"
      End
      ActivePaneConfig = 0
   End
   Begin DiagramPane = 
      Begin Origin = 
         Top = 0
         Left = 0
      End
      Begin Tables = 
         Begin Table = "hx_UsrBindCardC"
            Begin Extent = 
               Top = 6
               Left = 38
               Bottom = 175
               Right = 188
            End
            DisplayFlags = 280
            TopColumn = 1
         End
         Begin Table = "hx_td_Bank"
            Begin Extent = 
               Top = 6
               Left = 226
               Bottom = 158
               Right = 361
            End
            DisplayFlags = 280
            TopColumn = 0
         End
         Begin Table = "hx_member_table"
            Begin Extent = 
               Top = 6
               Left = 399
               Bottom = 205
               Right = 586
            End
            DisplayFlags = 280
            TopColumn = 0
         End
      End
   End
   Begin SQLPane = 
   End
   Begin DataPane = 
      Begin ParameterDefaults = ""
      End
      Begin ColumnWidths = 10
         Width = 284
         Width = 1500
         Width = 1875
         Width = 1500
         Width = 1500
         Width = 1500
         Width = 1500
         Width = 1500
         Width = 1500
         Width = 1500
      End
   End
   Begin CriteriaPane = 
      Begin ColumnWidths = 11
         Column = 1440
         Alias = 900
         Table = 1170
         Output = 720
         Append = 1400
         NewValue = 1170
         SortType = 1350
         SortOrder = 1410
         GroupBy = 1350
         Filter = 1350
         Or = 1350
         Or = 1350
         Or = 1350
      End
   End
End
' , @level0type=N'SCHEMA',@level0name=N'dbo', @level1type=N'VIEW',@level1name=N'V_UsrBindCardBank'
GO
EXEC sys.sp_addextendedproperty @name=N'MS_DiagramPaneCount', @value=1 , @level0type=N'SCHEMA',@level0name=N'dbo', @level1type=N'VIEW',@level1name=N'V_UsrBindCardBank'
GO
/****** Object:  View [dbo].[V_UserCash_Bank]    Script Date: 09/27/2016 10:30:13 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE VIEW [dbo].[V_UserCash_Bank]
AS
SELECT     dbo.hx_td_UserCash.UserCashId, dbo.hx_td_UserCash.registerid, dbo.hx_td_UserCash.UsrCustId, dbo.hx_td_UserCash.TransAmt, dbo.hx_td_UserCash.FeeAmt, 
                      dbo.hx_td_UserCash.OrdId, dbo.hx_td_UserCash.OrdIdTime, dbo.hx_td_UserCash.OrdIdState, dbo.hx_td_UserCash.OperTime, dbo.hx_td_UserCash.Reason, 
                      dbo.hx_td_UserCash.Remarks, dbo.hx_td_UserCash.TransState, dbo.hx_td_UserCash.OpenAcctId, dbo.hx_td_UserCash.OpenBankId, 
                      dbo.hx_member_table.username, dbo.hx_td_Bank.BankName, dbo.hx_member_table.realname, dbo.hx_member_table.available_balance, 
                      dbo.hx_member_table.usertypes, dbo.hx_td_UserCash.FeeObjFlag
FROM         dbo.hx_td_UserCash INNER JOIN
                      dbo.hx_member_table ON dbo.hx_td_UserCash.registerid = dbo.hx_member_table.registerid INNER JOIN
                      dbo.hx_td_Bank ON dbo.hx_td_UserCash.OpenBankId = dbo.hx_td_Bank.OpenBankId
GO
EXEC sys.sp_addextendedproperty @name=N'MS_DiagramPane1', @value=N'[0E232FF0-B466-11cf-A24F-00AA00A3EFFF, 1.00]
Begin DesignProperties = 
   Begin PaneConfigurations = 
      Begin PaneConfiguration = 0
         NumPanes = 4
         Configuration = "(H (1[58] 4[4] 2[8] 3) )"
      End
      Begin PaneConfiguration = 1
         NumPanes = 3
         Configuration = "(H (1 [50] 4 [25] 3))"
      End
      Begin PaneConfiguration = 2
         NumPanes = 3
         Configuration = "(H (1 [50] 2 [25] 3))"
      End
      Begin PaneConfiguration = 3
         NumPanes = 3
         Configuration = "(H (4 [30] 2 [40] 3))"
      End
      Begin PaneConfiguration = 4
         NumPanes = 2
         Configuration = "(H (1 [56] 3))"
      End
      Begin PaneConfiguration = 5
         NumPanes = 2
         Configuration = "(H (2 [66] 3))"
      End
      Begin PaneConfiguration = 6
         NumPanes = 2
         Configuration = "(H (4 [50] 3))"
      End
      Begin PaneConfiguration = 7
         NumPanes = 1
         Configuration = "(V (3))"
      End
      Begin PaneConfiguration = 8
         NumPanes = 3
         Configuration = "(H (1[56] 4[18] 2) )"
      End
      Begin PaneConfiguration = 9
         NumPanes = 2
         Configuration = "(H (1 [75] 4))"
      End
      Begin PaneConfiguration = 10
         NumPanes = 2
         Configuration = "(H (1[66] 2) )"
      End
      Begin PaneConfiguration = 11
         NumPanes = 2
         Configuration = "(H (4 [60] 2))"
      End
      Begin PaneConfiguration = 12
         NumPanes = 1
         Configuration = "(H (1) )"
      End
      Begin PaneConfiguration = 13
         NumPanes = 1
         Configuration = "(V (4))"
      End
      Begin PaneConfiguration = 14
         NumPanes = 1
         Configuration = "(V (2))"
      End
      ActivePaneConfig = 0
   End
   Begin DiagramPane = 
      Begin Origin = 
         Top = 0
         Left = 0
      End
      Begin Tables = 
         Begin Table = "hx_td_UserCash"
            Begin Extent = 
               Top = 6
               Left = 38
               Bottom = 174
               Right = 183
            End
            DisplayFlags = 280
            TopColumn = 7
         End
         Begin Table = "hx_member_table"
            Begin Extent = 
               Top = 0
               Left = 484
               Bottom = 159
               Right = 671
            End
            DisplayFlags = 280
            TopColumn = 18
         End
         Begin Table = "hx_td_Bank"
            Begin Extent = 
               Top = 91
               Left = 329
               Bottom = 218
               Right = 468
            End
            DisplayFlags = 280
            TopColumn = 0
         End
      End
   End
   Begin SQLPane = 
   End
   Begin DataPane = 
      Begin ParameterDefaults = ""
      End
      Begin ColumnWidths = 18
         Width = 284
         Width = 1500
         Width = 1500
         Width = 1500
         Width = 1500
         Width = 1500
         Width = 1500
         Width = 1500
         Width = 1500
         Width = 1500
         Width = 1500
         Width = 1500
         Width = 1500
         Width = 1500
         Width = 1500
         Width = 1500
         Width = 1500
         Width = 1500
      End
   End
   Begin CriteriaPane = 
      Begin ColumnWidths = 11
         Column = 1440
         Alias = 900
         Table = 1170
         Output = 720
         Append = 1400
         NewValue = 1170
         SortType = 1350
         SortOrder = 1410
         GroupBy = 1350
         Filter = 1350
         Or = 1350
         Or = 1350
         Or = 1350
      End
   End
End
' , @level0type=N'SCHEMA',@level0name=N'dbo', @level1type=N'VIEW',@level1name=N'V_UserCash_Bank'
GO
EXEC sys.sp_addextendedproperty @name=N'MS_DiagramPaneCount', @value=1 , @level0type=N'SCHEMA',@level0name=N'dbo', @level1type=N'VIEW',@level1name=N'V_UserCash_Bank'
GO
/****** Object:  Table [dbo].[hx_td_adminuser]    Script Date: 09/27/2016 10:30:13 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
SET ANSI_PADDING ON
GO
CREATE TABLE [dbo].[hx_td_adminuser](
	[adminuserid] [int] IDENTITY(1,1) NOT NULL,
	[adminuser] [varchar](50) NULL,
	[userpass] [varchar](50) NULL,
	[state] [int] NULL,
	[datetime] [datetime] NULL,
	[trueName] [varchar](50) NULL,
	[email] [varchar](50) NULL,
	[province] [varchar](20) NULL,
	[city] [varchar](20) NULL,
	[tel] [varchar](20) NULL,
	[phone_number] [varchar](20) NULL,
	[lastLoginTime] [datetime] NULL,
	[lastLoginIP] [varchar](50) NULL,
	[loginTimes] [int] NULL,
	[worknum] [varchar](50) NULL,
	[sex] [varchar](10) NULL,
	[department_id] [int] NULL,
	[area_id] [int] NULL,
 CONSTRAINT [PK_adminuser] PRIMARY KEY CLUSTERED 
(
	[adminuserid] ASC
)WITH (PAD_INDEX  = OFF, STATISTICS_NORECOMPUTE  = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS  = ON, ALLOW_PAGE_LOCKS  = ON) ON [PRIMARY]
) ON [PRIMARY]
GO
SET ANSI_PADDING OFF
GO
CREATE NONCLUSTERED INDEX [IX_hx_td_adminuser] ON [dbo].[hx_td_adminuser] 
(
	[department_id] ASC
)WITH (PAD_INDEX  = OFF, STATISTICS_NORECOMPUTE  = OFF, SORT_IN_TEMPDB = OFF, IGNORE_DUP_KEY = OFF, DROP_EXISTING = OFF, ONLINE = OFF, ALLOW_ROW_LOCKS  = ON, ALLOW_PAGE_LOCKS  = ON) ON [PRIMARY]
GO
/****** Object:  View [dbo].[V_Phone_records]    Script Date: 09/27/2016 10:30:13 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE VIEW [dbo].[V_Phone_records]
AS
SELECT     dbo.hx_td_Phone_records.recordsid, dbo.hx_td_Phone_records.recordcontext, dbo.hx_td_Phone_records.recordtime, dbo.hx_td_Phone_records.registerid, 
                      dbo.hx_td_Phone_records.adminid, dbo.hx_member_table.username, dbo.hx_member_table.realname, dbo.hx_td_adminuser.adminuser
FROM         dbo.hx_td_Phone_records INNER JOIN
                      dbo.hx_member_table ON dbo.hx_td_Phone_records.registerid = dbo.hx_member_table.registerid INNER JOIN
                      dbo.hx_td_adminuser ON dbo.hx_td_Phone_records.adminid = dbo.hx_td_adminuser.adminuserid
GO
EXEC sys.sp_addextendedproperty @name=N'MS_DiagramPane1', @value=N'[0E232FF0-B466-11cf-A24F-00AA00A3EFFF, 1.00]
Begin DesignProperties = 
   Begin PaneConfigurations = 
      Begin PaneConfiguration = 0
         NumPanes = 4
         Configuration = "(H (1[40] 4[20] 2[20] 3) )"
      End
      Begin PaneConfiguration = 1
         NumPanes = 3
         Configuration = "(H (1 [50] 4 [25] 3))"
      End
      Begin PaneConfiguration = 2
         NumPanes = 3
         Configuration = "(H (1 [50] 2 [25] 3))"
      End
      Begin PaneConfiguration = 3
         NumPanes = 3
         Configuration = "(H (4 [30] 2 [40] 3))"
      End
      Begin PaneConfiguration = 4
         NumPanes = 2
         Configuration = "(H (1 [56] 3))"
      End
      Begin PaneConfiguration = 5
         NumPanes = 2
         Configuration = "(H (2 [66] 3))"
      End
      Begin PaneConfiguration = 6
         NumPanes = 2
         Configuration = "(H (4 [50] 3))"
      End
      Begin PaneConfiguration = 7
         NumPanes = 1
         Configuration = "(V (3))"
      End
      Begin PaneConfiguration = 8
         NumPanes = 3
         Configuration = "(H (1[56] 4[18] 2) )"
      End
      Begin PaneConfiguration = 9
         NumPanes = 2
         Configuration = "(H (1 [75] 4))"
      End
      Begin PaneConfiguration = 10
         NumPanes = 2
         Configuration = "(H (1[66] 2) )"
      End
      Begin PaneConfiguration = 11
         NumPanes = 2
         Configuration = "(H (4 [60] 2))"
      End
      Begin PaneConfiguration = 12
         NumPanes = 1
         Configuration = "(H (1) )"
      End
      Begin PaneConfiguration = 13
         NumPanes = 1
         Configuration = "(V (4))"
      End
      Begin PaneConfiguration = 14
         NumPanes = 1
         Configuration = "(V (2))"
      End
      ActivePaneConfig = 0
   End
   Begin DiagramPane = 
      Begin Origin = 
         Top = 0
         Left = 0
      End
      Begin Tables = 
         Begin Table = "hx_td_Phone_records"
            Begin Extent = 
               Top = 6
               Left = 38
               Bottom = 162
               Right = 260
            End
            DisplayFlags = 280
            TopColumn = 0
         End
         Begin Table = "hx_member_table"
            Begin Extent = 
               Top = 0
               Left = 363
               Bottom = 154
               Right = 550
            End
            DisplayFlags = 280
            TopColumn = 0
         End
         Begin Table = "hx_td_adminuser"
            Begin Extent = 
               Top = 93
               Left = 698
               Bottom = 261
               Right = 850
            End
            DisplayFlags = 280
            TopColumn = 10
         End
      End
   End
   Begin SQLPane = 
   End
   Begin DataPane = 
      Begin ParameterDefaults = ""
      End
      Begin ColumnWidths = 9
         Width = 284
         Width = 1500
         Width = 1500
         Width = 1500
         Width = 1500
         Width = 1500
         Width = 1500
         Width = 1500
         Width = 1500
      End
   End
   Begin CriteriaPane = 
      Begin ColumnWidths = 11
         Column = 1440
         Alias = 900
         Table = 1170
         Output = 720
         Append = 1400
         NewValue = 1170
         SortType = 1350
         SortOrder = 1410
         GroupBy = 1350
         Filter = 1350
         Or = 1350
         Or = 1350
         Or = 1350
      End
   End
End
' , @level0type=N'SCHEMA',@level0name=N'dbo', @level1type=N'VIEW',@level1name=N'V_Phone_records'
GO
EXEC sys.sp_addextendedproperty @name=N'MS_DiagramPaneCount', @value=1 , @level0type=N'SCHEMA',@level0name=N'dbo', @level1type=N'VIEW',@level1name=N'V_Phone_records'
GO
/****** Object:  View [dbo].[V_borrowing_target_review]    Script Date: 09/27/2016 10:30:13 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE VIEW [dbo].[V_borrowing_target_review]
AS
SELECT     dbo.hx_borrowing_target.targetid, dbo.hx_borrowing_target.borrower_registerid, dbo.hx_borrowing_target.loan_number, dbo.hx_borrowing_target.borrowing_title, 
                      dbo.hx_borrowing_target.borrowing_thumbnail, dbo.hx_borrowing_target.project_type_id, dbo.hx_borrowing_target.annual_interest_rate, 
                      dbo.hx_borrowing_target.borrowing_balance, dbo.hx_borrowing_target.life_of_loan, dbo.hx_borrowing_target.unit_day, dbo.hx_borrowing_target.release_date, 
                      dbo.hx_borrowing_target.value_date, dbo.hx_borrowing_target.month_payment_date, dbo.hx_borrowing_target.repayment_date, dbo.hx_borrowing_target.minimum, 
                      dbo.hx_borrowing_target.maxmum, dbo.hx_borrowing_target.companyid, dbo.hx_borrowing_target.guarantee_way_id, dbo.hx_borrowing_target.payment_options, 
                      dbo.hx_borrowing_target.end_time, dbo.hx_borrowing_target.service_charge, dbo.hx_borrowing_target.loan_management_fee, 
                      dbo.hx_borrowing_target.investors_management_fee, dbo.hx_borrowing_target.ordinary_overdue_management_fees, 
                      dbo.hx_borrowing_target.seriously_overdue_management_fees, dbo.hx_borrowing_target.ordinary_overdue_penalty, 
                      dbo.hx_borrowing_target.seriously_overdue_penalty, dbo.hx_borrowing_target.transfer_Expenses, dbo.hx_borrowing_target.fundraising_amount, 
                      dbo.hx_borrowing_target.full_scale_loan, dbo.hx_borrowing_target.flow_return, dbo.hx_borrowing_target.recommend, dbo.hx_borrowing_target.sys_time, 
                      dbo.hx_borrowing_target.repaymentperiods, dbo.hx_td_reviewremarks.reviewid, dbo.hx_td_reviewremarks.reviewremarks, dbo.hx_td_reviewremarks.reviewtime, 
                      dbo.hx_td_reviewremarks.admin_operator, dbo.hx_td_adminuser.adminuserid, dbo.hx_td_adminuser.trueName, dbo.hx_td_reviewremarks.tender_state
FROM         dbo.hx_borrowing_target INNER JOIN
                      dbo.hx_td_reviewremarks ON dbo.hx_borrowing_target.targetid = dbo.hx_td_reviewremarks.targetid INNER JOIN
                      dbo.hx_td_adminuser ON dbo.hx_td_reviewremarks.admin_operator = dbo.hx_td_adminuser.adminuserid
GO
EXEC sys.sp_addextendedproperty @name=N'MS_DiagramPane1', @value=N'[0E232FF0-B466-11cf-A24F-00AA00A3EFFF, 1.00]
Begin DesignProperties = 
   Begin PaneConfigurations = 
      Begin PaneConfiguration = 0
         NumPanes = 4
         Configuration = "(H (1[41] 4[20] 2[14] 3) )"
      End
      Begin PaneConfiguration = 1
         NumPanes = 3
         Configuration = "(H (1 [50] 4 [25] 3))"
      End
      Begin PaneConfiguration = 2
         NumPanes = 3
         Configuration = "(H (1 [50] 2 [25] 3))"
      End
      Begin PaneConfiguration = 3
         NumPanes = 3
         Configuration = "(H (4 [30] 2 [40] 3))"
      End
      Begin PaneConfiguration = 4
         NumPanes = 2
         Configuration = "(H (1 [56] 3))"
      End
      Begin PaneConfiguration = 5
         NumPanes = 2
         Configuration = "(H (2 [66] 3))"
      End
      Begin PaneConfiguration = 6
         NumPanes = 2
         Configuration = "(H (4 [50] 3))"
      End
      Begin PaneConfiguration = 7
         NumPanes = 1
         Configuration = "(V (3))"
      End
      Begin PaneConfiguration = 8
         NumPanes = 3
         Configuration = "(H (1[56] 4[18] 2) )"
      End
      Begin PaneConfiguration = 9
         NumPanes = 2
         Configuration = "(H (1 [75] 4))"
      End
      Begin PaneConfiguration = 10
         NumPanes = 2
         Configuration = "(H (1[66] 2) )"
      End
      Begin PaneConfiguration = 11
         NumPanes = 2
         Configuration = "(H (4 [60] 2))"
      End
      Begin PaneConfiguration = 12
         NumPanes = 1
         Configuration = "(H (1) )"
      End
      Begin PaneConfiguration = 13
         NumPanes = 1
         Configuration = "(V (4))"
      End
      Begin PaneConfiguration = 14
         NumPanes = 1
         Configuration = "(V (2))"
      End
      ActivePaneConfig = 0
   End
   Begin DiagramPane = 
      Begin Origin = 
         Top = 0
         Left = 0
      End
      Begin Tables = 
         Begin Table = "hx_borrowing_target"
            Begin Extent = 
               Top = 6
               Left = 38
               Bottom = 179
               Right = 301
            End
            DisplayFlags = 280
            TopColumn = 24
         End
         Begin Table = "hx_td_reviewremarks"
            Begin Extent = 
               Top = 6
               Left = 339
               Bottom = 172
               Right = 495
            End
            DisplayFlags = 280
            TopColumn = 0
         End
         Begin Table = "hx_td_adminuser"
            Begin Extent = 
               Top = 6
               Left = 533
               Bottom = 143
               Right = 685
            End
            DisplayFlags = 280
            TopColumn = 0
         End
      End
   End
   Begin SQLPane = 
   End
   Begin DataPane = 
      Begin ParameterDefaults = ""
      End
      Begin ColumnWidths = 9
         Width = 284
         Width = 1500
         Width = 1500
         Width = 1500
         Width = 1500
         Width = 1500
         Width = 1500
         Width = 1500
         Width = 1500
      End
   End
   Begin CriteriaPane = 
      Begin ColumnWidths = 11
         Column = 1440
         Alias = 900
         Table = 1170
         Output = 720
         Append = 1400
         NewValue = 1170
         SortType = 1350
         SortOrder = 1410
         GroupBy = 1350
         Filter = 1350
         Or = 1350
         Or = 1350
         Or = 1350
      End
   End
End
' , @level0type=N'SCHEMA',@level0name=N'dbo', @level1type=N'VIEW',@level1name=N'V_borrowing_target_review'
GO
EXEC sys.sp_addextendedproperty @name=N'MS_DiagramPaneCount', @value=1 , @level0type=N'SCHEMA',@level0name=N'dbo', @level1type=N'VIEW',@level1name=N'V_borrowing_target_review'
GO
/****** Object:  Table [dbo].[hx_td_admin_role]    Script Date: 09/27/2016 10:30:13 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE TABLE [dbo].[hx_td_admin_role](
	[id] [int] IDENTITY(1,1) NOT NULL,
	[department_id] [int] NULL,
	[menu_id] [int] NULL,
	[isread] [int] NULL,
	[isadd] [int] NULL,
	[isedit] [int] NULL,
	[isdelete] [int] NULL,
	[adminuserid] [int] NULL
) ON [PRIMARY]
GO
CREATE NONCLUSTERED INDEX [IX_hx_td_admin_role] ON [dbo].[hx_td_admin_role] 
(
	[menu_id] ASC
)WITH (PAD_INDEX  = OFF, STATISTICS_NORECOMPUTE  = OFF, SORT_IN_TEMPDB = OFF, IGNORE_DUP_KEY = OFF, DROP_EXISTING = OFF, ONLINE = OFF, ALLOW_ROW_LOCKS  = ON, ALLOW_PAGE_LOCKS  = ON) ON [PRIMARY]
GO
/****** Object:  Table [dbo].[hx_td_Ad]    Script Date: 09/27/2016 10:30:13 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
SET ANSI_PADDING ON
GO
CREATE TABLE [dbo].[hx_td_Ad](
	[Adid] [int] IDENTITY(1,1) NOT NULL,
	[AdName] [varchar](50) NULL,
	[Adcreatetime] [datetime] NULL,
	[AdState] [int] NULL,
	[AdTypeId] [int] NULL,
	[AdPath] [varchar](100) NULL,
	[AdLink] [varchar](100) NULL,
 CONSTRAINT [PK_HX_TD_AD] PRIMARY KEY CLUSTERED 
(
	[Adid] ASC
)WITH (PAD_INDEX  = OFF, STATISTICS_NORECOMPUTE  = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS  = ON, ALLOW_PAGE_LOCKS  = ON) ON [PRIMARY]
) ON [PRIMARY]
GO
SET ANSI_PADDING OFF
GO
CREATE NONCLUSTERED INDEX [IX_hx_td_Ad] ON [dbo].[hx_td_Ad] 
(
	[AdTypeId] ASC
)WITH (PAD_INDEX  = OFF, STATISTICS_NORECOMPUTE  = OFF, SORT_IN_TEMPDB = OFF, IGNORE_DUP_KEY = OFF, DROP_EXISTING = OFF, ONLINE = OFF, ALLOW_ROW_LOCKS  = ON, ALLOW_PAGE_LOCKS  = ON) ON [PRIMARY]
GO
EXEC sys.sp_addextendedproperty @name=N'MS_Description', @value=N'0 默认 (有效)  1下架(无效)' , @level0type=N'SCHEMA',@level0name=N'dbo', @level1type=N'TABLE',@level1name=N'hx_td_Ad', @level2type=N'COLUMN',@level2name=N'AdState'
GO
/****** Object:  Table [dbo].[hx_td_about_news]    Script Date: 09/27/2016 10:30:13 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
SET ANSI_PADDING ON
GO
CREATE TABLE [dbo].[hx_td_about_news](
	[newid] [int] IDENTITY(1,1) NOT NULL,
	[web_Type_menu_id] [int] NULL,
	[News_title] [varchar](300) NULL,
	[News_Key] [varchar](100) NULL,
	[news_Des] [varchar](100) NULL,
	[context] [varchar](max) NULL,
	[createtime] [datetime] NULL,
	[adminuserid] [int] NULL,
	[comm] [int] NULL,
	[listcomm] [int] NULL
) ON [PRIMARY]
GO
SET ANSI_PADDING OFF
GO
CREATE NONCLUSTERED INDEX [IX_hx_td_about_news] ON [dbo].[hx_td_about_news] 
(
	[web_Type_menu_id] ASC
)WITH (PAD_INDEX  = OFF, STATISTICS_NORECOMPUTE  = OFF, SORT_IN_TEMPDB = OFF, IGNORE_DUP_KEY = OFF, DROP_EXISTING = OFF, ONLINE = OFF, ALLOW_ROW_LOCKS  = ON, ALLOW_PAGE_LOCKS  = ON) ON [PRIMARY]
GO
/****** Object:  Table [dbo].[hx_repayment_plan]    Script Date: 09/27/2016 10:30:13 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
SET ANSI_PADDING ON
GO
CREATE TABLE [dbo].[hx_repayment_plan](
	[repayment_plan_id] [int] IDENTITY(1,1) NOT NULL,
	[borrower_registerid] [int] NULL,
	[BorrUsrCustId] [varchar](50) NULL,
	[targetid] [int] NULL,
	[current_period] [int] NULL,
	[repayment_period] [datetime] NULL,
	[repayment_type] [int] NULL,
	[repayment_amount] [numeric](38, 2) NULL,
	[actual_amount_repayment] [numeric](38, 2) NULL,
	[repayment_state] [int] NULL,
	[createtime] [datetime] NULL,
	[interestpayment] [numeric](38, 2) NULL,
	[fees] [numeric](38, 2) NULL,
	[O_penalty] [numeric](38, 2) NULL,
	[shall_repayment] [numeric](38, 2) NULL,
	[pla_amt_generation] [numeric](38, 2) NULL,
	[Interest_spreads] [numeric](38, 2) NULL,
	[Rep_Remarks] [varchar](1000) NULL,
 CONSTRAINT [PK_HX_REPAYMENT_PLAN] PRIMARY KEY CLUSTERED 
(
	[repayment_plan_id] ASC
)WITH (PAD_INDEX  = OFF, STATISTICS_NORECOMPUTE  = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS  = ON, ALLOW_PAGE_LOCKS  = ON) ON [PRIMARY]
) ON [PRIMARY]
GO
SET ANSI_PADDING OFF
GO
CREATE NONCLUSTERED INDEX [IX_hx_repayment_plan] ON [dbo].[hx_repayment_plan] 
(
	[targetid] ASC
)WITH (PAD_INDEX  = OFF, STATISTICS_NORECOMPUTE  = OFF, SORT_IN_TEMPDB = OFF, IGNORE_DUP_KEY = OFF, DROP_EXISTING = OFF, ONLINE = OFF, ALLOW_ROW_LOCKS  = ON, ALLOW_PAGE_LOCKS  = ON) ON [PRIMARY]
GO
EXEC sys.sp_addextendedproperty @name=N'MS_Description', @value=N'1 利息
   2本金' , @level0type=N'SCHEMA',@level0name=N'dbo', @level1type=N'TABLE',@level1name=N'hx_repayment_plan', @level2type=N'COLUMN',@level2name=N'repayment_type'
GO
EXEC sys.sp_addextendedproperty @name=N'MS_Description', @value=N'0 未还款   1已还款   2逾期未还  3 平台代还 ' , @level0type=N'SCHEMA',@level0name=N'dbo', @level1type=N'TABLE',@level1name=N'hx_repayment_plan', @level2type=N'COLUMN',@level2name=N'repayment_state'
GO
EXEC sys.sp_addextendedproperty @name=N'MS_Description', @value=N'系统默认生成' , @level0type=N'SCHEMA',@level0name=N'dbo', @level1type=N'TABLE',@level1name=N'hx_repayment_plan', @level2type=N'COLUMN',@level2name=N'createtime'
GO
/****** Object:  View [dbo].[V_Repayment_plan_loan_records]    Script Date: 09/27/2016 10:30:13 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE VIEW [dbo].[V_Repayment_plan_loan_records]
AS
SELECT     dbo.hx_repayment_plan.repayment_plan_id, dbo.hx_repayment_plan.BorrUsrCustId, dbo.hx_repayment_plan.borrower_registerid, dbo.hx_repayment_plan.targetid, 
                      dbo.hx_repayment_plan.current_period, dbo.hx_repayment_plan.repayment_period, dbo.hx_repayment_plan.repayment_type, 
                      dbo.hx_repayment_plan.repayment_amount, dbo.hx_repayment_plan.actual_amount_repayment, dbo.hx_repayment_plan.repayment_state, 
                      dbo.hx_repayment_plan.createtime, dbo.hx_repayment_plan.interestpayment, dbo.hx_repayment_plan.fees, dbo.hx_repayment_plan.O_penalty, 
                      dbo.hx_repayment_plan.shall_repayment, dbo.hx_repayment_plan.pla_amt_generation, dbo.hx_repayment_plan.Interest_spreads, 
                      dbo.hx_repayment_plan.Rep_Remarks, dbo.hx_td_Loan_records.targetid AS Expr1, dbo.hx_td_Loan_records.Loan_records_id, 
                      dbo.hx_td_Loan_records.bid_records_id, dbo.hx_td_Loan_records.InCustId, dbo.hx_td_Loan_records.OutCustId, dbo.hx_td_Loan_records.LoanAMT, 
                      dbo.hx_td_Loan_records.LoanOrdId, dbo.hx_td_Loan_records.LoanDate, dbo.hx_td_Loan_records.SubOrdid, dbo.hx_td_Loan_records.SubOrdDate, 
                      dbo.hx_td_Loan_records.unFreezeOrdId, dbo.hx_td_Loan_records.FreezeTrxId, dbo.hx_Bid_records.investor_registerid, 
                      dbo.hx_member_table.available_balance
FROM         dbo.hx_repayment_plan INNER JOIN
                      dbo.hx_td_Loan_records ON dbo.hx_repayment_plan.targetid = dbo.hx_td_Loan_records.targetid INNER JOIN
                      dbo.hx_Bid_records ON dbo.hx_td_Loan_records.bid_records_id = dbo.hx_Bid_records.bid_records_id INNER JOIN
                      dbo.hx_member_table ON dbo.hx_Bid_records.investor_registerid = dbo.hx_member_table.registerid
GO
EXEC sys.sp_addextendedproperty @name=N'MS_DiagramPane1', @value=N'[0E232FF0-B466-11cf-A24F-00AA00A3EFFF, 1.00]
Begin DesignProperties = 
   Begin PaneConfigurations = 
      Begin PaneConfiguration = 0
         NumPanes = 4
         Configuration = "(H (1[43] 4[21] 2[3] 3) )"
      End
      Begin PaneConfiguration = 1
         NumPanes = 3
         Configuration = "(H (1 [50] 4 [25] 3))"
      End
      Begin PaneConfiguration = 2
         NumPanes = 3
         Configuration = "(H (1 [50] 2 [25] 3))"
      End
      Begin PaneConfiguration = 3
         NumPanes = 3
         Configuration = "(H (4 [30] 2 [40] 3))"
      End
      Begin PaneConfiguration = 4
         NumPanes = 2
         Configuration = "(H (1 [56] 3))"
      End
      Begin PaneConfiguration = 5
         NumPanes = 2
         Configuration = "(H (2 [66] 3))"
      End
      Begin PaneConfiguration = 6
         NumPanes = 2
         Configuration = "(H (4 [50] 3))"
      End
      Begin PaneConfiguration = 7
         NumPanes = 1
         Configuration = "(V (3))"
      End
      Begin PaneConfiguration = 8
         NumPanes = 3
         Configuration = "(H (1[56] 4[18] 2) )"
      End
      Begin PaneConfiguration = 9
         NumPanes = 2
         Configuration = "(H (1 [75] 4))"
      End
      Begin PaneConfiguration = 10
         NumPanes = 2
         Configuration = "(H (1[66] 2) )"
      End
      Begin PaneConfiguration = 11
         NumPanes = 2
         Configuration = "(H (4 [60] 2))"
      End
      Begin PaneConfiguration = 12
         NumPanes = 1
         Configuration = "(H (1) )"
      End
      Begin PaneConfiguration = 13
         NumPanes = 1
         Configuration = "(V (4))"
      End
      Begin PaneConfiguration = 14
         NumPanes = 1
         Configuration = "(V (2))"
      End
      ActivePaneConfig = 0
   End
   Begin DiagramPane = 
      Begin Origin = 
         Top = 0
         Left = 0
      End
      Begin Tables = 
         Begin Table = "hx_repayment_plan"
            Begin Extent = 
               Top = 6
               Left = 38
               Bottom = 174
               Right = 249
            End
            DisplayFlags = 280
            TopColumn = 1
         End
         Begin Table = "hx_td_Loan_records"
            Begin Extent = 
               Top = 6
               Left = 285
               Bottom = 147
               Right = 529
            End
            DisplayFlags = 280
            TopColumn = 8
         End
         Begin Table = "hx_Bid_records"
            Begin Extent = 
               Top = 6
               Left = 567
               Bottom = 114
               Right = 748
            End
            DisplayFlags = 280
            TopColumn = 14
         End
         Begin Table = "hx_member_table"
            Begin Extent = 
               Top = 21
               Left = 802
               Bottom = 129
               Right = 989
            End
            DisplayFlags = 280
            TopColumn = 15
         End
      End
   End
   Begin SQLPane = 
   End
   Begin DataPane = 
      Begin ParameterDefaults = ""
      End
      Begin ColumnWidths = 32
         Width = 284
         Width = 1500
         Width = 1500
         Width = 1500
         Width = 1500
         Width = 1500
         Width = 1500
         Width = 1500
         Width = 1500
         Width = 1500
         Width = 1500
         Width = 1500
         Width = 1500
         Width = 1500
         Width = 1500
         Width = 1500
         Width = 1500
         Width = 1500
         Width = 1500
         Width = 1500
         Width = 1500
         Width = 1500
         Width = 2805
         Width = 1500
         Wid' , @level0type=N'SCHEMA',@level0name=N'dbo', @level1type=N'VIEW',@level1name=N'V_Repayment_plan_loan_records'
GO
EXEC sys.sp_addextendedproperty @name=N'MS_DiagramPane2', @value=N'th = 1500
         Width = 1500
         Width = 1500
         Width = 1500
         Width = 1500
         Width = 1500
         Width = 1500
         Width = 1500
      End
   End
   Begin CriteriaPane = 
      Begin ColumnWidths = 11
         Column = 1440
         Alias = 900
         Table = 1170
         Output = 720
         Append = 1400
         NewValue = 1170
         SortType = 1350
         SortOrder = 1410
         GroupBy = 1350
         Filter = 1350
         Or = 1350
         Or = 1350
         Or = 1350
      End
   End
End
' , @level0type=N'SCHEMA',@level0name=N'dbo', @level1type=N'VIEW',@level1name=N'V_Repayment_plan_loan_records'
GO
EXEC sys.sp_addextendedproperty @name=N'MS_DiagramPaneCount', @value=2 , @level0type=N'SCHEMA',@level0name=N'dbo', @level1type=N'VIEW',@level1name=N'V_Repayment_plan_loan_records'
GO
/****** Object:  View [dbo].[V_borrow_repayment_plan]    Script Date: 09/27/2016 10:30:13 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE VIEW [dbo].[V_borrow_repayment_plan]
AS
SELECT     dbo.hx_borrowing_target.targetid, dbo.hx_borrowing_target.borrower_registerid, dbo.hx_borrowing_target.loan_number, dbo.hx_borrowing_target.borrowing_title, 
                      dbo.hx_borrowing_target.project_type_id, dbo.hx_borrowing_target.borrowing_thumbnail, dbo.hx_borrowing_target.annual_interest_rate, 
                      dbo.hx_borrowing_target.borrowing_balance, dbo.hx_borrowing_target.life_of_loan, dbo.hx_borrowing_target.unit_day, dbo.hx_borrowing_target.release_date, 
                      dbo.hx_borrowing_target.value_date, dbo.hx_borrowing_target.month_payment_date, dbo.hx_borrowing_target.repayment_date, dbo.hx_borrowing_target.minimum, 
                      dbo.hx_borrowing_target.maxmum, dbo.hx_borrowing_target.companyid, dbo.hx_borrowing_target.guarantee_way_id, dbo.hx_borrowing_target.payment_options, 
                      dbo.hx_borrowing_target.end_time, dbo.hx_borrowing_target.service_charge, dbo.hx_borrowing_target.loan_management_fee, 
                      dbo.hx_borrowing_target.investors_management_fee, dbo.hx_borrowing_target.ordinary_overdue_management_fees, 
                      dbo.hx_borrowing_target.seriously_overdue_management_fees, dbo.hx_borrowing_target.ordinary_overdue_penalty, 
                      dbo.hx_borrowing_target.seriously_overdue_penalty, dbo.hx_borrowing_target.transfer_Expenses, dbo.hx_borrowing_target.fundraising_amount, 
                      dbo.hx_borrowing_target.tender_state, dbo.hx_borrowing_target.full_scale_loan, dbo.hx_borrowing_target.flow_return, dbo.hx_borrowing_target.recommend, 
                      dbo.hx_borrowing_target.sys_time, dbo.hx_borrowing_target.repaymentperiods, dbo.hx_borrowing_target.reviewremarks, dbo.hx_borrowing_target.recheckremarks, 
                      dbo.hx_borrowing_target.guarantee_fee, dbo.hx_borrowing_target.consultingAMT, dbo.hx_borrowing_target.guaranteeAMT, dbo.hx_borrowing_target.B_Rates, 
                      dbo.hx_borrowing_target.H_Repayment_Amt, dbo.hx_borrowing_target.Repay_Time, dbo.hx_repayment_plan.repayment_plan_id, 
                      dbo.hx_repayment_plan.current_period, dbo.hx_repayment_plan.repayment_period, dbo.hx_repayment_plan.repayment_type, 
                      dbo.hx_repayment_plan.repayment_amount, dbo.hx_repayment_plan.actual_amount_repayment, dbo.hx_repayment_plan.repayment_state, 
                      dbo.hx_repayment_plan.createtime, dbo.hx_repayment_plan.interestpayment, dbo.hx_repayment_plan.fees, dbo.hx_repayment_plan.O_penalty, 
                      dbo.hx_member_table.username, dbo.hx_member_table.realname, dbo.hx_repayment_plan.shall_repayment, dbo.hx_member_table.available_balance
FROM         dbo.hx_borrowing_target INNER JOIN
                      dbo.hx_repayment_plan ON dbo.hx_borrowing_target.targetid = dbo.hx_repayment_plan.targetid INNER JOIN
                      dbo.hx_member_table ON dbo.hx_borrowing_target.borrower_registerid = dbo.hx_member_table.registerid
GO
EXEC sys.sp_addextendedproperty @name=N'MS_DiagramPane1', @value=N'[0E232FF0-B466-11cf-A24F-00AA00A3EFFF, 1.00]
Begin DesignProperties = 
   Begin PaneConfigurations = 
      Begin PaneConfiguration = 0
         NumPanes = 4
         Configuration = "(H (1[40] 4[20] 2[20] 3) )"
      End
      Begin PaneConfiguration = 1
         NumPanes = 3
         Configuration = "(H (1 [50] 4 [25] 3))"
      End
      Begin PaneConfiguration = 2
         NumPanes = 3
         Configuration = "(H (1 [50] 2 [25] 3))"
      End
      Begin PaneConfiguration = 3
         NumPanes = 3
         Configuration = "(H (4 [30] 2 [40] 3))"
      End
      Begin PaneConfiguration = 4
         NumPanes = 2
         Configuration = "(H (1 [56] 3))"
      End
      Begin PaneConfiguration = 5
         NumPanes = 2
         Configuration = "(H (2 [66] 3))"
      End
      Begin PaneConfiguration = 6
         NumPanes = 2
         Configuration = "(H (4 [50] 3))"
      End
      Begin PaneConfiguration = 7
         NumPanes = 1
         Configuration = "(V (3))"
      End
      Begin PaneConfiguration = 8
         NumPanes = 3
         Configuration = "(H (1[56] 4[18] 2) )"
      End
      Begin PaneConfiguration = 9
         NumPanes = 2
         Configuration = "(H (1 [75] 4))"
      End
      Begin PaneConfiguration = 10
         NumPanes = 2
         Configuration = "(H (1[66] 2) )"
      End
      Begin PaneConfiguration = 11
         NumPanes = 2
         Configuration = "(H (4 [60] 2))"
      End
      Begin PaneConfiguration = 12
         NumPanes = 1
         Configuration = "(H (1) )"
      End
      Begin PaneConfiguration = 13
         NumPanes = 1
         Configuration = "(V (4))"
      End
      Begin PaneConfiguration = 14
         NumPanes = 1
         Configuration = "(V (2))"
      End
      ActivePaneConfig = 0
   End
   Begin DiagramPane = 
      Begin Origin = 
         Top = 0
         Left = 0
      End
      Begin Tables = 
         Begin Table = "hx_borrowing_target"
            Begin Extent = 
               Top = 6
               Left = 38
               Bottom = 162
               Right = 301
            End
            DisplayFlags = 280
            TopColumn = 36
         End
         Begin Table = "hx_repayment_plan"
            Begin Extent = 
               Top = 6
               Left = 339
               Bottom = 151
               Right = 551
            End
            DisplayFlags = 280
            TopColumn = 8
         End
         Begin Table = "hx_member_table"
            Begin Extent = 
               Top = 6
               Left = 589
               Bottom = 162
               Right = 776
            End
            DisplayFlags = 280
            TopColumn = 10
         End
      End
   End
   Begin SQLPane = 
   End
   Begin DataPane = 
      Begin ParameterDefaults = ""
      End
      Begin ColumnWidths = 9
         Width = 284
         Width = 1500
         Width = 1500
         Width = 1500
         Width = 1500
         Width = 1500
         Width = 1500
         Width = 1500
         Width = 1500
      End
   End
   Begin CriteriaPane = 
      Begin ColumnWidths = 11
         Column = 1440
         Alias = 900
         Table = 1170
         Output = 720
         Append = 1400
         NewValue = 1170
         SortType = 1350
         SortOrder = 1410
         GroupBy = 1350
         Filter = 1350
         Or = 1350
         Or = 1350
         Or = 1350
      End
   End
End
' , @level0type=N'SCHEMA',@level0name=N'dbo', @level1type=N'VIEW',@level1name=N'V_borrow_repayment_plan'
GO
EXEC sys.sp_addextendedproperty @name=N'MS_DiagramPaneCount', @value=1 , @level0type=N'SCHEMA',@level0name=N'dbo', @level1type=N'VIEW',@level1name=N'V_borrow_repayment_plan'
GO
/****** Object:  Table [dbo].[hx_Recharge_history]    Script Date: 09/27/2016 10:30:13 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
SET ANSI_PADDING ON
GO
CREATE TABLE [dbo].[hx_Recharge_history](
	[recharge_history_id] [int] IDENTITY(1,1) NOT NULL,
	[membertable_registerid] [int] NULL,
	[recharge_amount] [numeric](38, 2) NULL,
	[recharge_time] [datetime] NULL,
	[account_amount] [numeric](38, 2) NULL,
	[order_No] [varchar](30) NULL,
	[recharge_condition] [int] NULL,
	[recharge_bank] [varchar](100) NULL,
 CONSTRAINT [PK_HX_RECHARGE_HISTORY] PRIMARY KEY CLUSTERED 
(
	[recharge_history_id] ASC
)WITH (PAD_INDEX  = OFF, STATISTICS_NORECOMPUTE  = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS  = ON, ALLOW_PAGE_LOCKS  = ON) ON [PRIMARY]
) ON [PRIMARY]
GO
SET ANSI_PADDING OFF
GO
CREATE NONCLUSTERED INDEX [IX_hx_Recharge_history] ON [dbo].[hx_Recharge_history] 
(
	[membertable_registerid] ASC
)WITH (PAD_INDEX  = OFF, STATISTICS_NORECOMPUTE  = OFF, SORT_IN_TEMPDB = OFF, IGNORE_DUP_KEY = OFF, DROP_EXISTING = OFF, ONLINE = OFF, ALLOW_ROW_LOCKS  = ON, ALLOW_PAGE_LOCKS  = ON) ON [PRIMARY]
GO
CREATE NONCLUSTERED INDEX [IX_hx_Recharge_history_1] ON [dbo].[hx_Recharge_history] 
(
	[recharge_bank] ASC
)WITH (PAD_INDEX  = OFF, STATISTICS_NORECOMPUTE  = OFF, SORT_IN_TEMPDB = OFF, IGNORE_DUP_KEY = OFF, DROP_EXISTING = OFF, ONLINE = OFF, ALLOW_ROW_LOCKS  = ON, ALLOW_PAGE_LOCKS  = ON) ON [PRIMARY]
GO
EXEC sys.sp_addextendedproperty @name=N'MS_Description', @value=N'0未支付成功 1 支付成功' , @level0type=N'SCHEMA',@level0name=N'dbo', @level1type=N'TABLE',@level1name=N'hx_Recharge_history', @level2type=N'COLUMN',@level2name=N'recharge_condition'
GO
/****** Object:  View [dbo].[V_Recharge_user_bank]    Script Date: 09/27/2016 10:30:13 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE VIEW [dbo].[V_Recharge_user_bank]
AS
SELECT     dbo.hx_Recharge_history.recharge_history_id, dbo.hx_Recharge_history.membertable_registerid, dbo.hx_Recharge_history.recharge_amount, 
                      dbo.hx_Recharge_history.recharge_time, dbo.hx_Recharge_history.account_amount, dbo.hx_Recharge_history.order_No, 
                      dbo.hx_Recharge_history.recharge_condition, dbo.hx_Recharge_history.recharge_bank, dbo.hx_member_table.username, dbo.hx_td_Bank.BankName, 
                      dbo.hx_member_table.realname
FROM         dbo.hx_Recharge_history INNER JOIN
                      dbo.hx_member_table ON dbo.hx_Recharge_history.membertable_registerid = dbo.hx_member_table.registerid INNER JOIN
                      dbo.hx_td_Bank ON dbo.hx_Recharge_history.recharge_bank = dbo.hx_td_Bank.OpenBankId
GO
EXEC sys.sp_addextendedproperty @name=N'MS_DiagramPane1', @value=N'[0E232FF0-B466-11cf-A24F-00AA00A3EFFF, 1.00]
Begin DesignProperties = 
   Begin PaneConfigurations = 
      Begin PaneConfiguration = 0
         NumPanes = 4
         Configuration = "(H (1[41] 4[21] 2[5] 3) )"
      End
      Begin PaneConfiguration = 1
         NumPanes = 3
         Configuration = "(H (1 [50] 4 [25] 3))"
      End
      Begin PaneConfiguration = 2
         NumPanes = 3
         Configuration = "(H (1 [50] 2 [25] 3))"
      End
      Begin PaneConfiguration = 3
         NumPanes = 3
         Configuration = "(H (4 [30] 2 [40] 3))"
      End
      Begin PaneConfiguration = 4
         NumPanes = 2
         Configuration = "(H (1 [56] 3))"
      End
      Begin PaneConfiguration = 5
         NumPanes = 2
         Configuration = "(H (2 [66] 3))"
      End
      Begin PaneConfiguration = 6
         NumPanes = 2
         Configuration = "(H (4 [50] 3))"
      End
      Begin PaneConfiguration = 7
         NumPanes = 1
         Configuration = "(V (3))"
      End
      Begin PaneConfiguration = 8
         NumPanes = 3
         Configuration = "(H (1[56] 4[18] 2) )"
      End
      Begin PaneConfiguration = 9
         NumPanes = 2
         Configuration = "(H (1 [75] 4))"
      End
      Begin PaneConfiguration = 10
         NumPanes = 2
         Configuration = "(H (1[66] 2) )"
      End
      Begin PaneConfiguration = 11
         NumPanes = 2
         Configuration = "(H (4 [60] 2))"
      End
      Begin PaneConfiguration = 12
         NumPanes = 1
         Configuration = "(H (1) )"
      End
      Begin PaneConfiguration = 13
         NumPanes = 1
         Configuration = "(V (4))"
      End
      Begin PaneConfiguration = 14
         NumPanes = 1
         Configuration = "(V (2))"
      End
      ActivePaneConfig = 0
   End
   Begin DiagramPane = 
      Begin Origin = 
         Top = 0
         Left = 0
      End
      Begin Tables = 
         Begin Table = "hx_Recharge_history"
            Begin Extent = 
               Top = 6
               Left = 38
               Bottom = 174
               Right = 236
            End
            DisplayFlags = 280
            TopColumn = 0
         End
         Begin Table = "hx_member_table"
            Begin Extent = 
               Top = 8
               Left = 374
               Bottom = 116
               Right = 561
            End
            DisplayFlags = 280
            TopColumn = 4
         End
         Begin Table = "hx_td_Bank"
            Begin Extent = 
               Top = 72
               Left = 691
               Bottom = 165
               Right = 830
            End
            DisplayFlags = 280
            TopColumn = 0
         End
      End
   End
   Begin SQLPane = 
   End
   Begin DataPane = 
      Begin ParameterDefaults = ""
      End
      Begin ColumnWidths = 10
         Width = 284
         Width = 1500
         Width = 1500
         Width = 1500
         Width = 1500
         Width = 1500
         Width = 1500
         Width = 1500
         Width = 1500
         Width = 1500
      End
   End
   Begin CriteriaPane = 
      Begin ColumnWidths = 11
         Column = 1440
         Alias = 900
         Table = 1170
         Output = 720
         Append = 1400
         NewValue = 1170
         SortType = 1350
         SortOrder = 1410
         GroupBy = 1350
         Filter = 1350
         Or = 1350
         Or = 1350
         Or = 1350
      End
   End
End
' , @level0type=N'SCHEMA',@level0name=N'dbo', @level1type=N'VIEW',@level1name=N'V_Recharge_user_bank'
GO
EXEC sys.sp_addextendedproperty @name=N'MS_DiagramPaneCount', @value=1 , @level0type=N'SCHEMA',@level0name=N'dbo', @level1type=N'VIEW',@level1name=N'V_Recharge_user_bank'
GO
/****** Object:  Table [dbo].[hx_Project_type]    Script Date: 09/27/2016 10:30:13 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
SET ANSI_PADDING ON
GO
CREATE TABLE [dbo].[hx_Project_type](
	[project_type_id] [int] IDENTITY(1,1) NOT NULL,
	[project_type_name] [varchar](200) NULL,
 CONSTRAINT [PK_HX_PROJECT_TYPE] PRIMARY KEY CLUSTERED 
(
	[project_type_id] ASC
)WITH (PAD_INDEX  = OFF, STATISTICS_NORECOMPUTE  = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS  = ON, ALLOW_PAGE_LOCKS  = ON) ON [PRIMARY]
) ON [PRIMARY]
GO
SET ANSI_PADDING OFF
GO
/****** Object:  Table [dbo].[hx_Mention_charges]    Script Date: 09/27/2016 10:30:13 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
SET ANSI_PADDING ON
GO
CREATE TABLE [dbo].[hx_Mention_charges](
	[mention_charges_id] [int] IDENTITY(1,1) NOT NULL,
	[mention_charges_name] [varchar](100) NULL,
	[minimum_amount] [numeric](38, 2) NULL,
	[maximum_amount] [numeric](38, 2) NULL,
	[fees] [numeric](38, 2) NULL,
	[fees_unit] [int] NULL,
 CONSTRAINT [PK_HX_MENTION_CHARGES] PRIMARY KEY CLUSTERED 
(
	[mention_charges_id] ASC
)WITH (PAD_INDEX  = OFF, STATISTICS_NORECOMPUTE  = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS  = ON, ALLOW_PAGE_LOCKS  = ON) ON [PRIMARY]
) ON [PRIMARY]
GO
SET ANSI_PADDING OFF
GO
EXEC sys.sp_addextendedproperty @name=N'MS_Description', @value=N'0 单笔( 元)  1 百分比(%)   收取' , @level0type=N'SCHEMA',@level0name=N'dbo', @level1type=N'TABLE',@level1name=N'hx_Mention_charges', @level2type=N'COLUMN',@level2name=N'fees_unit'
GO
/****** Object:  Trigger [hx_borrowing_targetdelete]    Script Date: 09/27/2016 10:30:13 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
-- =============================================
-- Author:		<Author,,Name>
-- Create date: <Create Date,,>
-- Description:	<Description,,>
-- =============================================
CREATE TRIGGER [dbo].[hx_borrowing_targetdelete] 
   ON  [dbo].[hx_borrowing_target] 
  instead of delete
AS 
BEGIN
	-- SET NOCOUNT ON added to prevent extra result sets from
	-- interfering with SELECT statements.
	SET NOCOUNT ON;
	
declare @id int  --定义一个变量id

select @id=targetid from deleted  --从deleted临时表中，赋值id给变量@id

delete hx_borrowing_target_detailed where targetid=@id  --先删除该类别下的所有详细内容

delete hx_borrower_guarantor_picture where targetid=@id  --先删除该类别下的所有资料图片

delete hx_borrowing_target where targetid=@id  --然后再删除 



    -- Insert statements for trigger here

END
GO
/****** Object:  Table [dbo].[hx_bonding_company]    Script Date: 09/27/2016 10:30:13 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
SET ANSI_PADDING ON
GO
CREATE TABLE [dbo].[hx_bonding_company](
	[companyid] [int] IDENTITY(1,1) NOT NULL,
	[company_name] [nvarchar](100) NULL,
	[registered_capital] [numeric](38, 0) NULL,
	[Date_incorporation] [datetime] NULL,
	[company_address] [varchar](100) NULL,
	[company_profile] [varchar](max) NULL,
	[business_licence] [varchar](50) NULL,
	[business_certificate] [varchar](50) NULL,
	[contract_covers] [varchar](100) NULL,
	[contract_bottom] [varchar](100) NULL,
	[legal_representative] [varchar](50) NULL,
	[agent] [varchar](50) NULL,
	[agent_name] [varchar](50) NULL,
	[agent_id_card] [varchar](50) NULL,
	[createtime] [datetime] NULL,
	[Tax_NO] [varchar](50) NULL,
	[GuarType] [int] NULL,
	[UsrCustId] [varchar](50) NULL,
	[AuditStat] [varchar](50) NULL,
	[TrxId] [varchar](50) NULL,
	[OpenBandkId] [varchar](50) NULL,
	[CardId] [varchar](50) NULL,
	[UsrId] [varchar](50) NULL,
	[company_Url] [varchar](150) NULL,
	[company_tel] [varchar](50) NULL,
 CONSTRAINT [PK_HX_BONDING_COMPANY] PRIMARY KEY CLUSTERED 
(
	[companyid] ASC
)WITH (PAD_INDEX  = OFF, STATISTICS_NORECOMPUTE  = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS  = ON, ALLOW_PAGE_LOCKS  = ON) ON [PRIMARY]
) ON [PRIMARY]
GO
SET ANSI_PADDING OFF
GO
/****** Object:  View [dbo].[V_borrowing_target_bonding]    Script Date: 09/27/2016 10:30:13 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE VIEW [dbo].[V_borrowing_target_bonding]
AS
SELECT     dbo.hx_borrowing_target.targetid, dbo.hx_borrowing_target.loan_number, dbo.hx_borrowing_target.borrower_registerid, dbo.hx_borrowing_target.borrowing_title, 
                      dbo.hx_borrowing_target.annual_interest_rate, dbo.hx_borrowing_target.borrowing_balance, dbo.hx_borrowing_target.life_of_loan, dbo.hx_borrowing_target.unit_day, 
                      dbo.hx_borrowing_target.release_date, dbo.hx_borrowing_target.month_payment_date, dbo.hx_borrowing_target.repayment_date, dbo.hx_borrowing_target.end_time, 
                      dbo.hx_bonding_company.companyid, dbo.hx_bonding_company.company_name, dbo.hx_bonding_company.agent_name, dbo.hx_bonding_company.agent_id_card, 
                      dbo.hx_member_table.username, dbo.hx_member_table.mobile, dbo.hx_member_table.email, dbo.hx_member_table.realname, dbo.hx_member_table.iD_number, 
                      dbo.hx_borrowing_target.payment_options, dbo.hx_bonding_company.legal_representative, dbo.hx_member_table.usertypes, dbo.hx_member_table.CopName
FROM         dbo.hx_borrowing_target INNER JOIN
                      dbo.hx_bonding_company ON dbo.hx_borrowing_target.companyid = dbo.hx_bonding_company.companyid INNER JOIN
                      dbo.hx_member_table ON dbo.hx_borrowing_target.borrower_registerid = dbo.hx_member_table.registerid
GO
EXEC sys.sp_addextendedproperty @name=N'MS_DiagramPane1', @value=N'[0E232FF0-B466-11cf-A24F-00AA00A3EFFF, 1.00]
Begin DesignProperties = 
   Begin PaneConfigurations = 
      Begin PaneConfiguration = 0
         NumPanes = 4
         Configuration = "(H (1[47] 4[17] 2[9] 3) )"
      End
      Begin PaneConfiguration = 1
         NumPanes = 3
         Configuration = "(H (1 [50] 4 [25] 3))"
      End
      Begin PaneConfiguration = 2
         NumPanes = 3
         Configuration = "(H (1 [50] 2 [25] 3))"
      End
      Begin PaneConfiguration = 3
         NumPanes = 3
         Configuration = "(H (4 [30] 2 [40] 3))"
      End
      Begin PaneConfiguration = 4
         NumPanes = 2
         Configuration = "(H (1 [56] 3))"
      End
      Begin PaneConfiguration = 5
         NumPanes = 2
         Configuration = "(H (2 [66] 3))"
      End
      Begin PaneConfiguration = 6
         NumPanes = 2
         Configuration = "(H (4 [50] 3))"
      End
      Begin PaneConfiguration = 7
         NumPanes = 1
         Configuration = "(V (3))"
      End
      Begin PaneConfiguration = 8
         NumPanes = 3
         Configuration = "(H (1[56] 4[18] 2) )"
      End
      Begin PaneConfiguration = 9
         NumPanes = 2
         Configuration = "(H (1 [75] 4))"
      End
      Begin PaneConfiguration = 10
         NumPanes = 2
         Configuration = "(H (1[66] 2) )"
      End
      Begin PaneConfiguration = 11
         NumPanes = 2
         Configuration = "(H (4 [60] 2))"
      End
      Begin PaneConfiguration = 12
         NumPanes = 1
         Configuration = "(H (1) )"
      End
      Begin PaneConfiguration = 13
         NumPanes = 1
         Configuration = "(V (4))"
      End
      Begin PaneConfiguration = 14
         NumPanes = 1
         Configuration = "(V (2))"
      End
      ActivePaneConfig = 0
   End
   Begin DiagramPane = 
      Begin Origin = 
         Top = 0
         Left = 0
      End
      Begin Tables = 
         Begin Table = "hx_borrowing_target"
            Begin Extent = 
               Top = 6
               Left = 38
               Bottom = 200
               Right = 306
            End
            DisplayFlags = 280
            TopColumn = 0
         End
         Begin Table = "hx_bonding_company"
            Begin Extent = 
               Top = 83
               Left = 372
               Bottom = 278
               Right = 551
            End
            DisplayFlags = 280
            TopColumn = 7
         End
         Begin Table = "hx_member_table"
            Begin Extent = 
               Top = 2
               Left = 449
               Bottom = 165
               Right = 729
            End
            DisplayFlags = 280
            TopColumn = 28
         End
      End
   End
   Begin SQLPane = 
   End
   Begin DataPane = 
      Begin ParameterDefaults = ""
      End
      Begin ColumnWidths = 17
         Width = 284
         Width = 1500
         Width = 1500
         Width = 1500
         Width = 1500
         Width = 1500
         Width = 1500
         Width = 1500
         Width = 1500
         Width = 1500
         Width = 1500
         Width = 1500
         Width = 1500
         Width = 1500
         Width = 1500
         Width = 1500
         Width = 1500
      End
   End
   Begin CriteriaPane = 
      Begin ColumnWidths = 11
         Column = 1440
         Alias = 900
         Table = 1170
         Output = 720
         Append = 1400
         NewValue = 1170
         SortType = 1350
         SortOrder = 1410
         GroupBy = 1350
         Filter = 1350
         Or = 1350
         Or = 1350
         Or = 1350
      End
   End
End
' , @level0type=N'SCHEMA',@level0name=N'dbo', @level1type=N'VIEW',@level1name=N'V_borrowing_target_bonding'
GO
EXEC sys.sp_addextendedproperty @name=N'MS_DiagramPaneCount', @value=1 , @level0type=N'SCHEMA',@level0name=N'dbo', @level1type=N'VIEW',@level1name=N'V_borrowing_target_bonding'
GO
/****** Object:  Table [dbo].[hx_Activity_schedule]    Script Date: 09/27/2016 10:30:13 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
SET ANSI_PADDING ON
GO
CREATE TABLE [dbo].[hx_Activity_schedule](
	[activity_schedule_id] [int] IDENTITY(1,1) NOT NULL,
	[activity_schedule_name] [varchar](50) NULL,
	[amount_of_reward] [numeric](38, 2) NULL,
	[use_lower_limit] [numeric](38, 2) NULL,
	[reward] [int] NULL,
	[start_date] [datetime] NULL,
	[end_date] [datetime] NULL,
	[entry_time] [datetime] NULL,
 CONSTRAINT [PK_HX_ACTIVITY_SCHEDULE] PRIMARY KEY CLUSTERED 
(
	[activity_schedule_id] ASC
)WITH (PAD_INDEX  = OFF, STATISTICS_NORECOMPUTE  = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS  = ON, ALLOW_PAGE_LOCKS  = ON) ON [PRIMARY]
) ON [PRIMARY]
GO
SET ANSI_PADDING OFF
GO
EXEC sys.sp_addextendedproperty @name=N'MS_Description', @value=N'0 常规(只奖励单方)  1 邀请奖励双方' , @level0type=N'SCHEMA',@level0name=N'dbo', @level1type=N'TABLE',@level1name=N'hx_Activity_schedule', @level2type=N'COLUMN',@level2name=N'reward'
GO
/****** Object:  Table [dbo].[guarantee_way]    Script Date: 09/27/2016 10:30:13 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
SET ANSI_PADDING ON
GO
CREATE TABLE [dbo].[guarantee_way](
	[guarantee_way_id] [int] IDENTITY(1,1) NOT NULL,
	[guarantee_way_name] [varchar](100) NULL,
	[amount_guaranteed] [numeric](38, 6) NULL,
	[createtime] [datetime] NULL,
 CONSTRAINT [PK_GUARANTEE_WAY] PRIMARY KEY CLUSTERED 
(
	[guarantee_way_id] ASC
)WITH (PAD_INDEX  = OFF, STATISTICS_NORECOMPUTE  = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS  = ON, ALLOW_PAGE_LOCKS  = ON) ON [PRIMARY]
) ON [PRIMARY]
GO
SET ANSI_PADDING OFF
GO
/****** Object:  View [dbo].[V_borrowing_target_addlist]    Script Date: 09/27/2016 10:30:13 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE VIEW [dbo].[V_borrowing_target_addlist]
AS
SELECT     dbo.hx_borrowing_target.targetid, dbo.hx_borrowing_target.borrower_registerid, dbo.hx_borrowing_target.loan_number, dbo.hx_borrowing_target.borrowing_title, 
                      dbo.hx_borrowing_target.borrowing_thumbnail, dbo.hx_borrowing_target.project_type_id, dbo.hx_borrowing_target.annual_interest_rate, 
                      dbo.hx_borrowing_target.borrowing_balance, dbo.hx_borrowing_target.life_of_loan, dbo.hx_borrowing_target.unit_day, dbo.hx_borrowing_target.release_date, 
                      dbo.hx_borrowing_target.value_date, dbo.hx_borrowing_target.month_payment_date, dbo.hx_borrowing_target.repayment_date, dbo.hx_borrowing_target.minimum, 
                      dbo.hx_borrowing_target.maxmum, dbo.hx_borrowing_target.companyid, dbo.hx_borrowing_target.guarantee_way_id, dbo.hx_borrowing_target.payment_options, 
                      dbo.hx_borrowing_target.end_time, dbo.hx_borrowing_target.service_charge, dbo.hx_borrowing_target.loan_management_fee, 
                      dbo.hx_borrowing_target.investors_management_fee, dbo.hx_borrowing_target.ordinary_overdue_management_fees, 
                      dbo.hx_borrowing_target.seriously_overdue_management_fees, dbo.hx_borrowing_target.ordinary_overdue_penalty, 
                      dbo.hx_borrowing_target.seriously_overdue_penalty, dbo.hx_borrowing_target.transfer_Expenses, dbo.hx_borrowing_target.fundraising_amount, 
                      dbo.hx_borrowing_target.tender_state, dbo.hx_borrowing_target.full_scale_loan, dbo.hx_borrowing_target.flow_return, dbo.hx_borrowing_target.recommend, 
                      dbo.hx_borrowing_target.sys_time, dbo.hx_borrowing_target.repaymentperiods, dbo.hx_bonding_company.company_name, 
                      dbo.guarantee_way.guarantee_way_name, dbo.hx_member_table.username, dbo.hx_member_table.realname, dbo.hx_borrowing_target_detailed.target_detailed_id, 
                      dbo.hx_borrowing_target.reviewremarks, dbo.hx_borrowing_target.recheckremarks, dbo.hx_borrowing_target.guarantee_fee, dbo.hx_borrowing_target.consultingAMT, 
                      dbo.hx_borrowing_target.guaranteeAMT, dbo.hx_borrowing_target.B_Rates, dbo.hx_borrowing_target.H_Repayment_Amt, dbo.hx_borrowing_target.Repay_Time, 
                      dbo.hx_borrowing_target.start_time, dbo.hx_borrowing_target.G_contract_Path, dbo.hx_member_table.UsrCustId AS BorrUsrCustId, 
                      dbo.hx_bonding_company.GuarType, dbo.hx_bonding_company.UsrCustId AS GuarCompUsrCustId, dbo.hx_borrowing_target_detailed.borrower_circumstances, 
                      dbo.hx_borrowing_target_detailed.item_details, dbo.hx_borrowing_target_detailed.borrower_base_material, dbo.hx_borrowing_target_detailed.use_funds, 
                      dbo.hx_borrowing_target_detailed.independent_advice, dbo.hx_borrowing_target_detailed.guarantee_agency_views, 
                      dbo.hx_borrowing_target_detailed.risk_control_measures, dbo.hx_borrowing_target.IsUse, dbo.hx_borrowing_target.indexorder
FROM         dbo.hx_borrowing_target INNER JOIN
                      dbo.hx_bonding_company ON dbo.hx_borrowing_target.companyid = dbo.hx_bonding_company.companyid INNER JOIN
                      dbo.guarantee_way ON dbo.hx_borrowing_target.guarantee_way_id = dbo.guarantee_way.guarantee_way_id INNER JOIN
                      dbo.hx_member_table ON dbo.hx_borrowing_target.borrower_registerid = dbo.hx_member_table.registerid INNER JOIN
                      dbo.hx_borrowing_target_detailed ON dbo.hx_borrowing_target.targetid = dbo.hx_borrowing_target_detailed.targetid
GO
EXEC sys.sp_addextendedproperty @name=N'MS_DiagramPane1', @value=N'[0E232FF0-B466-11cf-A24F-00AA00A3EFFF, 1.00]
Begin DesignProperties = 
   Begin PaneConfigurations = 
      Begin PaneConfiguration = 0
         NumPanes = 4
         Configuration = "(H (1[32] 4[43] 2[8] 3) )"
      End
      Begin PaneConfiguration = 1
         NumPanes = 3
         Configuration = "(H (1 [50] 4 [25] 3))"
      End
      Begin PaneConfiguration = 2
         NumPanes = 3
         Configuration = "(H (1 [50] 2 [25] 3))"
      End
      Begin PaneConfiguration = 3
         NumPanes = 3
         Configuration = "(H (4 [30] 2 [40] 3))"
      End
      Begin PaneConfiguration = 4
         NumPanes = 2
         Configuration = "(H (1 [56] 3))"
      End
      Begin PaneConfiguration = 5
         NumPanes = 2
         Configuration = "(H (2 [66] 3))"
      End
      Begin PaneConfiguration = 6
         NumPanes = 2
         Configuration = "(H (4 [50] 3))"
      End
      Begin PaneConfiguration = 7
         NumPanes = 1
         Configuration = "(V (3))"
      End
      Begin PaneConfiguration = 8
         NumPanes = 3
         Configuration = "(H (1[56] 4[18] 2) )"
      End
      Begin PaneConfiguration = 9
         NumPanes = 2
         Configuration = "(H (1 [75] 4))"
      End
      Begin PaneConfiguration = 10
         NumPanes = 2
         Configuration = "(H (1[66] 2) )"
      End
      Begin PaneConfiguration = 11
         NumPanes = 2
         Configuration = "(H (4 [60] 2))"
      End
      Begin PaneConfiguration = 12
         NumPanes = 1
         Configuration = "(H (1) )"
      End
      Begin PaneConfiguration = 13
         NumPanes = 1
         Configuration = "(V (4))"
      End
      Begin PaneConfiguration = 14
         NumPanes = 1
         Configuration = "(V (2))"
      End
      ActivePaneConfig = 0
   End
   Begin DiagramPane = 
      Begin Origin = 
         Top = 0
         Left = 0
      End
      Begin Tables = 
         Begin Table = "hx_borrowing_target"
            Begin Extent = 
               Top = 6
               Left = 38
               Bottom = 179
               Right = 301
            End
            DisplayFlags = 280
            TopColumn = 39
         End
         Begin Table = "hx_bonding_company"
            Begin Extent = 
               Top = 0
               Left = 648
               Bottom = 108
               Right = 827
            End
            DisplayFlags = 280
            TopColumn = 17
         End
         Begin Table = "guarantee_way"
            Begin Extent = 
               Top = 147
               Left = 646
               Bottom = 255
               Right = 834
            End
            DisplayFlags = 280
            TopColumn = 0
         End
         Begin Table = "hx_member_table"
            Begin Extent = 
               Top = 4
               Left = 452
               Bottom = 173
               Right = 639
            End
            DisplayFlags = 280
            TopColumn = 0
         End
         Begin Table = "hx_borrowing_target_detailed"
            Begin Extent = 
               Top = 42
               Left = 906
               Bottom = 215
               Right = 1230
            End
            DisplayFlags = 280
            TopColumn = 3
         End
      End
   End
   Begin SQLPane = 
   End
   Begin DataPane = 
      Begin ParameterDefaults = ""
      End
      Begin ColumnWidths = 62
         Width = 284
         Width = 1500
         Width = 1500
         Width = 1500
         Width = 1500
         Width = 1500
         Width = 1500
         Width = 1500
         Width = 1500
         Width = 1500
         Width = 1500
         Width = 1500
  ' , @level0type=N'SCHEMA',@level0name=N'dbo', @level1type=N'VIEW',@level1name=N'V_borrowing_target_addlist'
GO
EXEC sys.sp_addextendedproperty @name=N'MS_DiagramPane2', @value=N'       Width = 1500
         Width = 1500
         Width = 1500
         Width = 1500
         Width = 1500
         Width = 1500
         Width = 1500
         Width = 1500
         Width = 1500
         Width = 1500
         Width = 1500
         Width = 1500
         Width = 1500
         Width = 1500
         Width = 1500
         Width = 1500
         Width = 1500
         Width = 1500
         Width = 1500
         Width = 1500
         Width = 1500
         Width = 1500
         Width = 1500
         Width = 1500
         Width = 1500
         Width = 1500
         Width = 1500
         Width = 1500
         Width = 1500
         Width = 1500
         Width = 1500
         Width = 1500
         Width = 1500
         Width = 1500
         Width = 1500
         Width = 1500
         Width = 1500
         Width = 1500
         Width = 1500
         Width = 1500
         Width = 1500
         Width = 1500
         Width = 1500
         Width = 1500
         Width = 1500
         Width = 1500
         Width = 1500
         Width = 1500
         Width = 1500
         Width = 1500
      End
   End
   Begin CriteriaPane = 
      Begin ColumnWidths = 11
         Column = 2130
         Alias = 900
         Table = 3375
         Output = 720
         Append = 1400
         NewValue = 1170
         SortType = 1350
         SortOrder = 1410
         GroupBy = 1350
         Filter = 1350
         Or = 1350
         Or = 1350
         Or = 1350
      End
   End
End
' , @level0type=N'SCHEMA',@level0name=N'dbo', @level1type=N'VIEW',@level1name=N'V_borrowing_target_addlist'
GO
EXEC sys.sp_addextendedproperty @name=N'MS_DiagramPaneCount', @value=2 , @level0type=N'SCHEMA',@level0name=N'dbo', @level1type=N'VIEW',@level1name=N'V_borrowing_target_addlist'
GO
/****** Object:  Table [dbo].[GrabIphone]    Script Date: 09/27/2016 10:30:13 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE TABLE [dbo].[GrabIphone](
	[ID] [int] IDENTITY(1,1) NOT NULL,
	[RegrsterID] [int] NULL,
	[Color] [nvarchar](50) NULL,
	[Addtime] [datetime] NULL,
	[LuckDrawState] [int] NULL,
	[WinningState] [int] NULL,
	[WinningTime] [datetime] NULL,
	[TargetID] [int] NULL,
	[BidRecordsID] [int] NULL,
	[InvestmentAmount] [nvarchar](50) NULL,
 CONSTRAINT [PK_InvestmentRob] PRIMARY KEY CLUSTERED 
(
	[ID] ASC
)WITH (PAD_INDEX  = OFF, STATISTICS_NORECOMPUTE  = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS  = ON, ALLOW_PAGE_LOCKS  = ON) ON [PRIMARY]
) ON [PRIMARY]
GO
EXEC sys.sp_addextendedproperty @name=N'MS_Description', @value=N'用户ID' , @level0type=N'SCHEMA',@level0name=N'dbo', @level1type=N'TABLE',@level1name=N'GrabIphone', @level2type=N'COLUMN',@level2name=N'RegrsterID'
GO
EXEC sys.sp_addextendedproperty @name=N'MS_Description', @value=N'录入时间' , @level0type=N'SCHEMA',@level0name=N'dbo', @level1type=N'TABLE',@level1name=N'GrabIphone', @level2type=N'COLUMN',@level2name=N'Addtime'
GO
EXEC sys.sp_addextendedproperty @name=N'MS_Description', @value=N'抽奖状态：0未参与，1已参与' , @level0type=N'SCHEMA',@level0name=N'dbo', @level1type=N'TABLE',@level1name=N'GrabIphone', @level2type=N'COLUMN',@level2name=N'LuckDrawState'
GO
EXEC sys.sp_addextendedproperty @name=N'MS_Description', @value=N'中奖状态：0未中奖，1已中奖' , @level0type=N'SCHEMA',@level0name=N'dbo', @level1type=N'TABLE',@level1name=N'GrabIphone', @level2type=N'COLUMN',@level2name=N'WinningState'
GO
EXEC sys.sp_addextendedproperty @name=N'MS_Description', @value=N'中奖时间' , @level0type=N'SCHEMA',@level0name=N'dbo', @level1type=N'TABLE',@level1name=N'GrabIphone', @level2type=N'COLUMN',@level2name=N'WinningTime'
GO
EXEC sys.sp_addextendedproperty @name=N'MS_Description', @value=N'标的ID' , @level0type=N'SCHEMA',@level0name=N'dbo', @level1type=N'TABLE',@level1name=N'GrabIphone', @level2type=N'COLUMN',@level2name=N'TargetID'
GO
EXEC sys.sp_addextendedproperty @name=N'MS_Description', @value=N'用户投标记录ID' , @level0type=N'SCHEMA',@level0name=N'dbo', @level1type=N'TABLE',@level1name=N'GrabIphone', @level2type=N'COLUMN',@level2name=N'BidRecordsID'
GO
EXEC sys.sp_addextendedproperty @name=N'MS_Description', @value=N'投资金额' , @level0type=N'SCHEMA',@level0name=N'dbo', @level1type=N'TABLE',@level1name=N'GrabIphone', @level2type=N'COLUMN',@level2name=N'InvestmentAmount'
GO
/****** Object:  StoredProcedure [dbo].[GetPageRecord]    Script Date: 09/27/2016 10:30:13 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE PROCEDURE [dbo].[GetPageRecord]
    ( 
    @tblName varchar(255),--表名或视图表
    @strGetFields varchar(1000),  -- 欲选择字段列表
    @fldName varchar(255),      -- 排序字段及类型(多个条件用逗号分开)如：JobID DESC,Checkintime
    @PageSize int,--页尺寸
    @PageIndex int,--页号,从0开始
    @strWhere varchar(1500),--条件  
    @RecordCount int OUTPUT  --总记录数(存储过程输出参数) 
    ) 
AS 

BEGIN TRAN

DECLARE @SqlQuery varchar(4000)

--返回记录总数
    DECLARE @SearchSql AS Nvarchar(4000)
    SET @SearchSql= 'SELECT @RecordCount=Count(*) FROM '+@tblName+' WHERE '+@strWhere
    execute sp_executesql 
    @SearchSql,    --执行上面的sql语句
    N'@RecordCount int OUTPUT' ,   --执行输出数据的sql语句，output出总记录数 
    @RecordCount  OUTPUT

--返回记录数

    SET @SqlQuery='SELECT '+@strGetFields+'
    FROM (SELECT row_number() over(ORDER BY '+@fldName+') as rownum, 
            '+@strGetFields+'
          FROM '+@tblName+' WHERE '+@strWhere +') as temp
    WHERE rownum BETWEEN ('+cast(@PageIndex as varchar)+'-1)*'+cast(@PageSize as varchar)+'+1 and '+cast(@PageIndex as varchar)+'*'+cast(@PageSize as varchar) + ' ORDER BY '+@fldName
    --print @SqlQuery
    SET NOCOUNT ON
    execute(@SqlQuery)
    SET NOCOUNT OFF
COMMIT TRAN
GO
/****** Object:  StoredProcedure [dbo].[GetPageIndex]    Script Date: 09/27/2016 10:30:13 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE PROCEDURE [dbo].[GetPageIndex]
(
@tblName   varchar(1000),       -- 表名
@strGetFields varchar(1000),  -- 需要返回的列
@fldName varchar(255),      -- 排序的字段名
@PageSize   int ,          -- 页尺寸
@PageIndex  int ,           -- 页码
@strWhere  varchar(1500),  -- 查询条件(注意: 不要加where)
@Sort varchar(255),      --排序的方法
@RecordCount int OUTPUT  --总记录数(存储过程输出参数)

)
AS
declare @strSQL   varchar(5000)       -- 主语句
declare @strTmp   varchar(110)        -- 临时变量
declare @strOrder varchar(400)        -- 排序类型
declare @TmpSelect nvarchar(2000)      -- 记录统计

if @strWhere != '' 
begin
set @TmpSelect = 'select @RecordCount = count(*) from '+ @tblName +' where ' + @strWhere
end
else
begin
set @TmpSelect = 'select @RecordCount = count(*) from '+ @tblName
end
execute sp_executesql 
@TmpSelect,    --执行上面的sql语句
N'@RecordCount int OUTPUT' ,   --执行输出数据的sql语句，output出总记录数 
@RecordCount  OUTPUT
--if (@RecordCount = 0)    --如果没有贴子，则返回零
  --     return 0

if @Sort = 'desc'
begin
set @strTmp = '<(select min'
set @strOrder = ' order by ' + @fldName +' desc'
--如果@OrderType不是，就执行降序，这句很重要！
end
else
begin
set @strTmp = '>(select max'
set @strOrder = ' order by ' + @fldName +' asc'
end
 
if @PageIndex = 1
begin
if @strWhere != ''   
  begin
set @strSQL = 'select top ' + str(@PageSize) +' '+@strGetFields+ '  from ' + @tblName + ' where ' + @strWhere + ' ' + @strOrder
  end
else
  begin
set @strSQL = 'select top ' + str(@PageSize) +' '+@strGetFields+ '  from '+ @tblName + ' '+ @strOrder
  end
--如果是第一页就执行以上代码，这样会加快执行速度
end
else
begin
--以下代码赋予了@strSQL以真正执行的SQL代码
set @strSQL = 'select top ' + str(@PageSize) +' '+@strGetFields+ '  from '
+ @tblName + ' where ' + @fldName + '' + @strTmp + '('+ @fldName + ') from (select top ' + str((@PageIndex-1)*@PageSize) + ' '+ @fldName + ' from ' + @tblName + '' + @strOrder + ') as tblTmp)'+ @strOrder
 
if @strWhere != ''
set @strSQL = 'select top ' + str(@PageSize) +' '+@strGetFields+ '  from '
+ @tblName + ' where ' + @fldName + '' + @strTmp + '('
+ @fldName + ') from (select top ' + str((@PageIndex-1)*@PageSize) + ' '
+ @fldName + ' from ' + @tblName + ' where ' + @strWhere + ' '
+ @strOrder + ') as tblTmp) and ' + @strWhere + ' ' + @strOrder
end
exec (@strSQL)
RETURN
GO
/****** Object:  Table [dbo].[hx_member_ChannelKeys]    Script Date: 09/27/2016 10:30:13 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
SET ANSI_PADDING ON
GO
CREATE TABLE [dbo].[hx_member_ChannelKeys](
	[Mregisterid] [int] NULL,
	[ChannelId] [varchar](20) NULL,
	[ChannelRegid] [varchar](50) NULL,
	[ChannelKey] [varchar](50) NULL,
	[ChannelStep] [varchar](2) NULL
) ON [PRIMARY]
GO
SET ANSI_PADDING OFF
GO
/****** Object:  Table [dbo].[hx_investsearch]    Script Date: 09/27/2016 10:30:13 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
SET ANSI_PADDING ON
GO
CREATE TABLE [dbo].[hx_investsearch](
	[investsearchid] [int] IDENTITY(1,1) NOT NULL,
	[investtype] [int] NULL,
	[investname] [varchar](100) NULL,
	[splitname] [varchar](100) NULL,
 CONSTRAINT [PK_hx_investsearch] PRIMARY KEY CLUSTERED 
(
	[investsearchid] ASC
)WITH (PAD_INDEX  = OFF, STATISTICS_NORECOMPUTE  = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS  = ON, ALLOW_PAGE_LOCKS  = ON) ON [PRIMARY]
) ON [PRIMARY]
GO
SET ANSI_PADDING OFF
GO
/****** Object:  Table [dbo].[area]    Script Date: 09/27/2016 10:30:13 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
SET ANSI_PADDING ON
GO
CREATE TABLE [dbo].[area](
	[id] [int] IDENTITY(1,1) NOT NULL,
	[areaID] [int] NOT NULL,
	[area] [varchar](200) NOT NULL,
	[fatherID] [int] NOT NULL,
 CONSTRAINT [PK_area] PRIMARY KEY CLUSTERED 
(
	[id] ASC
)WITH (PAD_INDEX  = OFF, STATISTICS_NORECOMPUTE  = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS  = ON, ALLOW_PAGE_LOCKS  = ON) ON [PRIMARY]
) ON [PRIMARY]
GO
SET ANSI_PADDING OFF
GO
/****** Object:  Table [dbo].[ActivityRewardLogs]    Script Date: 09/27/2016 10:30:13 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE TABLE [dbo].[ActivityRewardLogs](
	[LogId] [int] IDENTITY(1,1) NOT NULL,
	[UserId] [int] NOT NULL,
	[Reward] [decimal](18, 0) NOT NULL,
	[IsDelete] [int] NOT NULL,
	[CreatedOn] [datetime] NOT NULL,
 CONSTRAINT [PK_ActivityRewardLogs] PRIMARY KEY CLUSTERED 
(
	[LogId] ASC
)WITH (PAD_INDEX  = OFF, STATISTICS_NORECOMPUTE  = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS  = ON, ALLOW_PAGE_LOCKS  = ON) ON [PRIMARY]
) ON [PRIMARY]
GO
/****** Object:  Trigger [hx_Bid_records_targetdelete]    Script Date: 09/27/2016 10:30:13 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
-- =============================================
-- Author:		<Author,,Name>
-- Create date: <Create Date,,>
-- Description:	<Description,,>
-- =============================================
CREATE TRIGGER [dbo].[hx_Bid_records_targetdelete]
   ON  [dbo].[hx_Bid_records] 
   instead of delete
AS 

BEGIN

	SET NOCOUNT ON;
	declare @bid_records_id int,@investment_amount numeric(38,6),@targetid int,@investor_registerid int ;  --定义一个变量id

	select @bid_records_id=bid_records_id,@investment_amount=investment_amount,@targetid=targetid,@investor_registerid=investor_registerid from deleted;
	update hx_borrowing_target  set fundraising_amount=fundraising_amount-@investment_amount where targetid=@targetid;
	
	
	
	
	--delete hx_td_frozen where bid_records_id=@bid_records_id  --先删除该项目下的投资冻结 这个位置得手动处理
	delete hx_income_statement where bid_records_id=@bid_records_id  --先删除该项目下的投资记录
	delete hx_Bid_records where bid_records_id=@bid_records_id  --然后再删除 该项目
	
	--update hx_member_table  set available_balance=available_balance+@investment_amount where registerid=@investor_registerid; --删除时同时还原金额
    update ActivityLogs set usedRecordID=0,usedtargetId=0,useStatus=0 where Logid in(select Logid from dbo.ActivityLogs where usedrecordid>0 and usedrecordid not in (select bid_records_id from hx_Bid_records)) 


END
GO
/****** Object:  Table [dbo].[Activity]    Script Date: 09/27/2016 10:30:13 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE TABLE [dbo].[Activity](
	[ActivityId] [int] IDENTITY(1,1) NOT NULL,
	[ActivityName] [nvarchar](200) NOT NULL,
	[StartDate] [datetime] NOT NULL,
	[EndDate] [datetime] NOT NULL,
	[SendWay] [int] NOT NULL,
	[UserType] [int] NOT NULL,
	[SendCount] [int] NOT NULL,
	[AddRate] [decimal](18, 1) NOT NULL,
	[UseBeginOn] [datetime] NOT NULL,
	[UseEndOn] [datetime] NOT NULL,
	[ActStatus] [int] NOT NULL,
	[GiveOther] [int] NOT NULL,
	[CreatedOn] [datetime] NOT NULL,
	[IsDelete] [int] NOT NULL,
 CONSTRAINT [PK_ACTIVITY] PRIMARY KEY CLUSTERED 
(
	[ActivityId] ASC
)WITH (PAD_INDEX  = OFF, STATISTICS_NORECOMPUTE  = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS  = ON, ALLOW_PAGE_LOCKS  = ON) ON [PRIMARY]
) ON [PRIMARY]
GO
EXEC sys.sp_addextendedproperty @name=N'MS_Description', @value=N'活动名称' , @level0type=N'SCHEMA',@level0name=N'dbo', @level1type=N'TABLE',@level1name=N'Activity', @level2type=N'COLUMN',@level2name=N'ActivityName'
GO
EXEC sys.sp_addextendedproperty @name=N'MS_Description', @value=N'活动开始时间' , @level0type=N'SCHEMA',@level0name=N'dbo', @level1type=N'TABLE',@level1name=N'Activity', @level2type=N'COLUMN',@level2name=N'StartDate'
GO
EXEC sys.sp_addextendedproperty @name=N'MS_Description', @value=N'活动结束时间' , @level0type=N'SCHEMA',@level0name=N'dbo', @level1type=N'TABLE',@level1name=N'Activity', @level2type=N'COLUMN',@level2name=N'EndDate'
GO
EXEC sys.sp_addextendedproperty @name=N'MS_Description', @value=N'发放方式 1 投资后立即发放 2 平台统一发放' , @level0type=N'SCHEMA',@level0name=N'dbo', @level1type=N'TABLE',@level1name=N'Activity', @level2type=N'COLUMN',@level2name=N'SendWay'
GO
EXEC sys.sp_addextendedproperty @name=N'MS_Description', @value=N'用户类型 1 新用户 2 首投用户 3 活动之前注册的用户 ' , @level0type=N'SCHEMA',@level0name=N'dbo', @level1type=N'TABLE',@level1name=N'Activity', @level2type=N'COLUMN',@level2name=N'UserType'
GO
EXEC sys.sp_addextendedproperty @name=N'MS_Description', @value=N'发放的数量 0是不限制' , @level0type=N'SCHEMA',@level0name=N'dbo', @level1type=N'TABLE',@level1name=N'Activity', @level2type=N'COLUMN',@level2name=N'SendCount'
GO
EXEC sys.sp_addextendedproperty @name=N'MS_Description', @value=N'加息比例 ' , @level0type=N'SCHEMA',@level0name=N'dbo', @level1type=N'TABLE',@level1name=N'Activity', @level2type=N'COLUMN',@level2name=N'AddRate'
GO
EXEC sys.sp_addextendedproperty @name=N'MS_Description', @value=N'期限开始时间' , @level0type=N'SCHEMA',@level0name=N'dbo', @level1type=N'TABLE',@level1name=N'Activity', @level2type=N'COLUMN',@level2name=N'UseBeginOn'
GO
EXEC sys.sp_addextendedproperty @name=N'MS_Description', @value=N'期限结束时间' , @level0type=N'SCHEMA',@level0name=N'dbo', @level1type=N'TABLE',@level1name=N'Activity', @level2type=N'COLUMN',@level2name=N'UseEndOn'
GO
EXEC sys.sp_addextendedproperty @name=N'MS_Description', @value=N'优惠券状态 0待发布 1已发布' , @level0type=N'SCHEMA',@level0name=N'dbo', @level1type=N'TABLE',@level1name=N'Activity', @level2type=N'COLUMN',@level2name=N'ActStatus'
GO
EXEC sys.sp_addextendedproperty @name=N'MS_Description', @value=N'0未删除 1 已删除' , @level0type=N'SCHEMA',@level0name=N'dbo', @level1type=N'TABLE',@level1name=N'Activity', @level2type=N'COLUMN',@level2name=N'IsDelete'
GO
/****** Object:  Table [dbo].[hx_contract_type]    Script Date: 09/27/2016 10:30:13 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
SET ANSI_PADDING ON
GO
CREATE TABLE [dbo].[hx_contract_type](
	[contract_type_id] [int] IDENTITY(1,1) NOT NULL,
	[contract_type_name] [varchar](50) NULL,
	[createtime] [datetime] NULL,
 CONSTRAINT [PK_HX_CONTRACT_TYPE] PRIMARY KEY CLUSTERED 
(
	[contract_type_id] ASC
)WITH (PAD_INDEX  = OFF, STATISTICS_NORECOMPUTE  = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS  = ON, ALLOW_PAGE_LOCKS  = ON) ON [PRIMARY]
) ON [PRIMARY]
GO
SET ANSI_PADDING OFF
GO
/****** Object:  Table [dbo].[hx_Contract_template]    Script Date: 09/27/2016 10:30:13 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
SET ANSI_PADDING ON
GO
CREATE TABLE [dbo].[hx_Contract_template](
	[contract_template_id] [int] IDENTITY(1,1) NOT NULL,
	[contract_type_id] [int] NOT NULL,
	[contract_template_name] [varchar](50) NULL,
	[contract_template_context] [varchar](max) NULL,
	[usestate] [int] NULL,
	[cretatetime] [datetime] NULL,
 CONSTRAINT [PK_HX_CONTRACT_TEMPLATE] PRIMARY KEY CLUSTERED 
(
	[contract_template_id] ASC
)WITH (PAD_INDEX  = OFF, STATISTICS_NORECOMPUTE  = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS  = ON, ALLOW_PAGE_LOCKS  = ON) ON [PRIMARY]
) ON [PRIMARY]
GO
SET ANSI_PADDING OFF
GO
CREATE NONCLUSTERED INDEX [IX_hx_Contract_template] ON [dbo].[hx_Contract_template] 
(
	[contract_type_id] ASC
)WITH (PAD_INDEX  = OFF, STATISTICS_NORECOMPUTE  = OFF, SORT_IN_TEMPDB = OFF, IGNORE_DUP_KEY = OFF, DROP_EXISTING = OFF, ONLINE = OFF, ALLOW_ROW_LOCKS  = ON, ALLOW_PAGE_LOCKS  = ON) ON [PRIMARY]
GO
EXEC sys.sp_addextendedproperty @name=N'MS_Description', @value=N'0 默认 未使用   1当前使用中' , @level0type=N'SCHEMA',@level0name=N'dbo', @level1type=N'TABLE',@level1name=N'hx_Contract_template', @level2type=N'COLUMN',@level2name=N'usestate'
GO
/****** Object:  Table [dbo].[hx_ChouJiang]    Script Date: 09/27/2016 10:30:13 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
SET ANSI_PADDING ON
GO
CREATE TABLE [dbo].[hx_ChouJiang](
	[id] [int] IDENTITY(1,1) NOT NULL,
	[Amount] [decimal](18, 2) NULL,
	[OrderState] [int] NULL,
	[ActivityScheduleId] [int] NULL,
	[MemberRegisterId] [int] NULL,
	[MemberUsrCustId] [varchar](50) NULL,
	[BidId] [int] NULL,
	[InvestTime] [datetime] NULL,
	[OrderTime] [datetime] NULL,
	[BonusId] [int] NULL,
 CONSTRAINT [PK_hx_ChouJiang] PRIMARY KEY CLUSTERED 
(
	[id] ASC
)WITH (PAD_INDEX  = OFF, STATISTICS_NORECOMPUTE  = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS  = ON, ALLOW_PAGE_LOCKS  = ON) ON [PRIMARY]
) ON [PRIMARY]
GO
SET ANSI_PADDING OFF
GO
/****** Object:  Table [dbo].[hx_CashAwards]    Script Date: 09/27/2016 10:30:13 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
SET ANSI_PADDING ON
GO
CREATE TABLE [dbo].[hx_CashAwards](
	[CashAwardsid] [int] IDENTITY(1,1) NOT NULL,
	[membertable_registerid] [int] NULL,
	[proid] [int] NULL,
	[Amounts] [decimal](8, 2) NULL,
	[AwardsTime] [datetime] NULL,
	[targetid] [int] NULL,
	[OrdId] [decimal](20, 0) NULL,
	[OrdIdstate] [int] NULL,
	[UsrCustId] [varchar](50) NULL,
 CONSTRAINT [PK_HX_CASHAWARDS] PRIMARY KEY CLUSTERED 
(
	[CashAwardsid] ASC
)WITH (PAD_INDEX  = OFF, STATISTICS_NORECOMPUTE  = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS  = ON, ALLOW_PAGE_LOCKS  = ON) ON [PRIMARY]
) ON [PRIMARY]
GO
SET ANSI_PADDING OFF
GO
EXEC sys.sp_addextendedproperty @name=N'MS_Description', @value=N'0  初始   1 转账中   3 转账成功' , @level0type=N'SCHEMA',@level0name=N'dbo', @level1type=N'TABLE',@level1name=N'hx_CashAwards', @level2type=N'COLUMN',@level2name=N'OrdIdstate'
GO
EXEC sys.sp_addextendedproperty @name=N'MS_Description', @value=N'由汇付生成的唯一标识' , @level0type=N'SCHEMA',@level0name=N'dbo', @level1type=N'TABLE',@level1name=N'hx_CashAwards', @level2type=N'COLUMN',@level2name=N'UsrCustId'
GO
/****** Object:  Table [dbo].[city]    Script Date: 09/27/2016 10:30:13 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
SET ANSI_PADDING ON
GO
CREATE TABLE [dbo].[city](
	[id] [int] IDENTITY(1,1) NOT NULL,
	[cityID] [int] NOT NULL,
	[city] [varchar](200) NOT NULL,
	[fatherID] [int] NOT NULL,
 CONSTRAINT [PK_city] PRIMARY KEY CLUSTERED 
(
	[id] ASC
)WITH (PAD_INDEX  = OFF, STATISTICS_NORECOMPUTE  = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS  = ON, ALLOW_PAGE_LOCKS  = ON) ON [PRIMARY]
) ON [PRIMARY]
GO
SET ANSI_PADDING OFF
GO
/****** Object:  Table [dbo].[bonus_account_water]    Script Date: 09/27/2016 10:30:13 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE TABLE [dbo].[bonus_account_water](
	[account_water_id] [int] IDENTITY(1,1) NOT NULL,
	[bonus_account_id] [int] NULL,
	[membertable_registerid] [int] NULL,
	[income] [numeric](38, 2) NULL,
	[expenditure] [numeric](38, 2) NULL,
	[time_of_occurrence] [datetime] NULL,
	[reward_balance] [numeric](38, 2) NULL,
	[award_description] [nvarchar](max) NULL,
	[water_type] [int] NULL,
 CONSTRAINT [PK_BONUS_ACCOUNT_WATER] PRIMARY KEY CLUSTERED 
(
	[account_water_id] ASC
)WITH (PAD_INDEX  = OFF, STATISTICS_NORECOMPUTE  = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS  = ON, ALLOW_PAGE_LOCKS  = ON) ON [PRIMARY]
) ON [PRIMARY]
GO
CREATE NONCLUSTERED INDEX [IX_bonus_account_water] ON [dbo].[bonus_account_water] 
(
	[bonus_account_id] ASC
)WITH (PAD_INDEX  = OFF, STATISTICS_NORECOMPUTE  = OFF, SORT_IN_TEMPDB = OFF, IGNORE_DUP_KEY = OFF, DROP_EXISTING = OFF, ONLINE = OFF, ALLOW_ROW_LOCKS  = ON, ALLOW_PAGE_LOCKS  = ON) ON [PRIMARY]
GO
EXEC sys.sp_addextendedproperty @name=N'MS_Description', @value=N'0 收入  1 支出' , @level0type=N'SCHEMA',@level0name=N'dbo', @level1type=N'TABLE',@level1name=N'bonus_account_water', @level2type=N'COLUMN',@level2name=N'water_type'
GO
EXEC sys.sp_addextendedproperty @name=N'MS_Description', @value=N'奖励帐户流水记录' , @level0type=N'SCHEMA',@level0name=N'dbo', @level1type=N'TABLE',@level1name=N'bonus_account_water'
GO
/****** Object:  StoredProcedure [dbo].[usp_PagingLarge]    Script Date: 09/27/2016 10:30:13 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE PROCEDURE [dbo].[usp_PagingLarge]
@TableNames VARCHAR(200),    --表名，可以是多个表，但不能用别名
@PrimaryKey VARCHAR(100),    --主键，可以为空，但@Order为空时该值不能为空
@Fields    VARCHAR(200),        --要取出的字段，可以是多个表的字段，可以为空，为空表示select *
@PageSize INT,            --每页记录数
@CurrentPage INT,        --当前页，0表示第1页
@Filter VARCHAR(200) = '',    --条件，可以为空，不用填 where
@Group VARCHAR(200) = '',    --分组依据，可以为空，不用填 group by
@Order VARCHAR(200) = ''    --排序，可以为空，为空默认按主键升序排列，不用填 order by
AS
BEGIN
    DECLARE @SortColumn VARCHAR(200)
    DECLARE @Operator CHAR(2)
    DECLARE @SortTable VARCHAR(200)
    DECLARE @SortName VARCHAR(200)
    IF @Fields = ''
        SET @Fields = '*'
    IF @Filter = ''
        SET @Filter = 'WHERE 1=1'
    ELSE
        SET @Filter = 'WHERE ' +  @Filter
    IF @Group <>''
        SET @Group = 'GROUP BY ' + @Group
 
    IF @Order <> ''
    BEGIN
        DECLARE @pos1 INT, @pos2 INT
        SET @Order = REPLACE(REPLACE(@Order, ' asc', ' ASC'), ' desc', ' DESC')
        IF CHARINDEX(' DESC', @Order) > 0
            IF CHARINDEX(' ASC', @Order) > 0
            BEGIN
                IF CHARINDEX(' DESC', @Order) < CHARINDEX(' ASC', @Order)
                    SET @Operator = '<='
                ELSE
                    SET @Operator = '>='
            END
            ELSE
                SET @Operator = '<='
        ELSE
            SET @Operator = '>='
        SET @SortColumn = REPLACE(REPLACE(REPLACE(@Order, ' ASC', ''), ' DESC', ''), ' ', '')
        SET @pos1 = CHARINDEX(',', @SortColumn)
        IF @pos1 > 0
            SET @SortColumn = SUBSTRING(@SortColumn, 1, @pos1-1)
        SET @pos2 = CHARINDEX('.', @SortColumn)
        IF @pos2 > 0
        BEGIN
            SET @SortTable = SUBSTRING(@SortColumn, 1, @pos2-1)
            IF @pos1 > 0 
                SET @SortName = SUBSTRING(@SortColumn, @pos2+1, @pos1-@pos2-1)
            ELSE
                SET @SortName = SUBSTRING(@SortColumn, @pos2+1, LEN(@SortColumn)-@pos2)
        END
        ELSE
        BEGIN
            SET @SortTable = @TableNames
            SET @SortName = @SortColumn
        END
    END
    ELSE
    BEGIN
        SET @SortColumn = @PrimaryKey
        SET @SortTable = @TableNames
        SET @SortName = @SortColumn
        SET @Order = @SortColumn
        SET @Operator = '>='
    END
 
    DECLARE @type varchar(50)
    DECLARE @prec int
    SELECT @type=t.name, @prec=c.prec
    FROM sysobjects o 
    JOIN syscolumns c on o.id=c.id
    JOIN systypes t on c.xusertype=t.xusertype
    WHERE o.name = @SortTable AND c.name = @SortName
    IF CHARINDEX('char', @type) > 0
    SET @type = @type + '(' + CAST(@prec AS varchar) + ')'
 
    DECLARE @TopRows INT
    SET @TopRows = @PageSize * @CurrentPage + 1   
    print @TopRows
    print @Operator
    EXEC('
        DECLARE @SortColumnBegin ' + @type + '
        SET ROWCOUNT ' + @TopRows + '
        SELECT @SortColumnBegin=' + @SortColumn + ' FROM  ' + @TableNames + ' ' + @Filter + ' ' + @Group + ' ORDER BY ' + @Order + '
        SET ROWCOUNT ' + @PageSize + '
        SELECT ' + @Fields + ' FROM  ' + @TableNames + ' ' + @Filter  + ' AND ' + @SortColumn + '' + @Operator + '@SortColumnBegin ' + @Group + ' ORDER BY ' + @Order + '    
    ')    
END
 

/** 调用过程
DECLARE	@return_value int

EXEC	@return_value = [dbo].[usp_PagingLarge]
		@TableNames = N'hx_member_table , hx_Bid_records ',
		@PrimaryKey = N'hx_member_table.registerid',
		@Fields = N'hx_member_table.registerid,hx_member_table.username,hx_member_table.mobile,hx_member_table.realname',
		@PageSize = 20,
		@CurrentPage = 2,
		@Filter = N'hx_member_table.registerid = hx_Bid_records.investor_registerid',
		@Group = N'hx_member_table.registerid,hx_member_table.username,hx_member_table.mobile,hx_member_table.realname',
        @Order = N'hx_member_table.registerid desc'
SELECT	'Return Value' = @return_value
**/
GO
/****** Object:  Table [dbo].[UserAddress]    Script Date: 09/27/2016 10:30:13 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE TABLE [dbo].[UserAddress](
	[userId] [int] NOT NULL,
	[provinceId] [int] NULL,
	[provinceName] [nvarchar](50) NULL,
	[cityId] [int] NULL,
	[cityName] [nvarchar](50) NULL,
	[countyId] [int] NULL,
	[countyName] [nvarchar](50) NULL,
	[detailAddress] [nvarchar](500) NULL,
	[createdOn] [datetime] NOT NULL,
	[updatedOn] [datetime] NOT NULL,
 CONSTRAINT [PK_UserAddress] PRIMARY KEY CLUSTERED 
(
	[userId] ASC
)WITH (PAD_INDEX  = OFF, STATISTICS_NORECOMPUTE  = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS  = ON, ALLOW_PAGE_LOCKS  = ON) ON [PRIMARY]
) ON [PRIMARY]
GO
EXEC sys.sp_addextendedproperty @name=N'MS_Description', @value=N'用户id' , @level0type=N'SCHEMA',@level0name=N'dbo', @level1type=N'TABLE',@level1name=N'UserAddress', @level2type=N'COLUMN',@level2name=N'userId'
GO
EXEC sys.sp_addextendedproperty @name=N'MS_Description', @value=N'省级id' , @level0type=N'SCHEMA',@level0name=N'dbo', @level1type=N'TABLE',@level1name=N'UserAddress', @level2type=N'COLUMN',@level2name=N'provinceId'
GO
EXEC sys.sp_addextendedproperty @name=N'MS_Description', @value=N'省级名称' , @level0type=N'SCHEMA',@level0name=N'dbo', @level1type=N'TABLE',@level1name=N'UserAddress', @level2type=N'COLUMN',@level2name=N'provinceName'
GO
EXEC sys.sp_addextendedproperty @name=N'MS_Description', @value=N'市级id' , @level0type=N'SCHEMA',@level0name=N'dbo', @level1type=N'TABLE',@level1name=N'UserAddress', @level2type=N'COLUMN',@level2name=N'cityId'
GO
EXEC sys.sp_addextendedproperty @name=N'MS_Description', @value=N'市级名称' , @level0type=N'SCHEMA',@level0name=N'dbo', @level1type=N'TABLE',@level1name=N'UserAddress', @level2type=N'COLUMN',@level2name=N'cityName'
GO
EXEC sys.sp_addextendedproperty @name=N'MS_Description', @value=N'县级id' , @level0type=N'SCHEMA',@level0name=N'dbo', @level1type=N'TABLE',@level1name=N'UserAddress', @level2type=N'COLUMN',@level2name=N'countyId'
GO
EXEC sys.sp_addextendedproperty @name=N'MS_Description', @value=N'县级名称' , @level0type=N'SCHEMA',@level0name=N'dbo', @level1type=N'TABLE',@level1name=N'UserAddress', @level2type=N'COLUMN',@level2name=N'countyName'
GO
EXEC sys.sp_addextendedproperty @name=N'MS_Description', @value=N'详细地址' , @level0type=N'SCHEMA',@level0name=N'dbo', @level1type=N'TABLE',@level1name=N'UserAddress', @level2type=N'COLUMN',@level2name=N'detailAddress'
GO
EXEC sys.sp_addextendedproperty @name=N'MS_Description', @value=N'创建时间' , @level0type=N'SCHEMA',@level0name=N'dbo', @level1type=N'TABLE',@level1name=N'UserAddress', @level2type=N'COLUMN',@level2name=N'createdOn'
GO
/****** Object:  StoredProcedure [dbo].[prSaveMemberAddress]    Script Date: 09/27/2016 10:30:13 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE	 PROC [dbo].[prSaveMemberAddress]
(
@userId INT,
@provId INT,
@cityId INT,
@counId INT,
@detAdds NVARCHAR(500)
)
AS
BEGIN

DECLARE @provName NVARCHAR(50);

DECLARE @cityName NVARCHAR(50);

DECLARE @countyName NVARCHAR(50);

SELECT @provName=AreaName FROM NormalArea WHERE AreaId=@provId;
SELECT @cityName=AreaName FROM NormalArea WHERE AreaId=@cityId AND parentId=@provId;
SELECT @countyName=AreaName FROM NormalArea WHERE AreaId=@counId AND parentId=@cityId;

IF(@provName='' or @provName is null)
BEGIN
RETURN -500;
END

IF(@cityName='' or @cityName is null)
BEGIN
RETURN -400;
END

IF(@countyName='' or @countyName is null)
BEGIN
RETURN -300;
END



IF(NOT EXISTS(SELECT registerid FROM dbo.hx_member_table WHERE registerid=@userId))
BEGIN
RETURN -200;
END




IF(EXISTS(SELECT userId FROM UserAddress WHERE userId=@userId))
BEGIN
UPDATE UserAddress SET 
cityId=@cityId,
cityName=@cityName,
provinceId=@provId,
provinceName=@provName,
countyId=@counId,
countyName=@countyName,
detailAddress=@detAdds,
updatedOn=GETDATE()
 WHERE userId=@userId
END	
ELSE
BEGIN

INSERT INTO [dbo].[UserAddress]
           ([userId]
           ,[provinceId]
           ,[provinceName]
           ,[cityId]
           ,[cityName]
           ,[countyId]
           ,[countyName]
           ,[detailAddress])
     VALUES
           (@userId
           ,@provId, @provName,@cityId, @cityName,@counId,@countyName, @detAdds)
END

RETURN 1;

END
GO
/****** Object:  StoredProcedure [dbo].[ViewStatisticsReports]    Script Date: 09/27/2016 10:30:13 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
create  PROCEDURE [dbo].[ViewStatisticsReports]

(

    @startDate varchar(50),--开始时间

    @endDate varchar(50),  -- 结束时间

    @mobile varchar(1000)   -- 电话号

)

AS

BEGIN

   BEGIN TRAN

   DECLARE @SqlQuery varchar(4000)

	  

   if(@startDate!='' and @endDate!='')

   begin

	SET @SqlQuery='select investor_registerid,
	sum(case when rank=1 and invest_time between '''+@startDate+''' and '''+@endDate+''' then investment_amount else 0 end) as FirstMoney,
	sum(case when rank=1 then 1 else 0 end) as FirstCount,
	sum(case when rank>1 and invest_time between '''+@startDate+''' and '''+@endDate+''' then investment_amount else 0 end) as ComplexMoney,
	sum(case when rank>1 then 1 else 0 end) as ComplexCount,
	SUM(case when invest_time between '''+@startDate+''' and '''+@endDate+''' then investment_amount else 0 end) as AllMoney,
	SUM(case when invest_time between '''+@startDate+''' and '''+@endDate+''' then investment_amount*current_period/12 else 0 end) as FractureMoney,
	(isnull((SELECT SUM(recharge_amount) FROM dbo.hx_Recharge_history bb WHERE bb.membertable_registerid=aa.investor_registerid and recharge_condition=1 and recharge_time between '''+@startDate+''' and '''+@endDate+''' group by membertable_registerid) 

	+
	(SELECT SUM(money_order) FROM dbo.hx_td_LLpay_Recharge cc WHERE cc.UsrId=aa.investor_registerid and ReState=1 and ordertime between '''+@startDate+''' and '''+@endDate+''' group by UsrId),0))
	as RechargeAllMoney
	 from 
	(select * ,rank () OVER (PARTITION BY investor_registerid ORDER BY invest_time)  rank 
	 from hx_Bid_records where invest_state=1'

	end

   else if(@startDate!='' and @endDate='')

   begin

	SET @SqlQuery='select investor_registerid,
	sum(case when rank=1 and invest_time >= '''+@startDate+''' then investment_amount else 0 end) as FirstMoney,
	sum(case when rank=1 then 1 else 0 end) as FirstCount,
	sum(case when rank>1 and invest_time >= '''+@startDate+''' then investment_amount else 0 end) as ComplexMoney,
	sum(case when rank>1 then 1 else 0 end) as ComplexCount,
	SUM(case when invest_time >= '''+@startDate+''' then investment_amount else 0 end) as AllMoney,
	SUM(case when invest_time >= '''+@startDate+''' then investment_amount*current_period/12 else 0 end) as FractureMoney,
	(isnull((SELECT SUM(recharge_amount) FROM dbo.hx_Recharge_history bb WHERE bb.membertable_registerid=aa.investor_registerid and recharge_condition=1 and recharge_time >= '''+@startDate+''' group by membertable_registerid) 

	+

	(SELECT SUM(money_order) FROM dbo.hx_td_LLpay_Recharge cc WHERE cc.UsrId=aa.investor_registerid and ReState=1 and ordertime >= '''+@startDate+''' group by UsrId),0))
	as RechargeAllMoney
	 from 
	(select * ,rank () OVER (PARTITION BY investor_registerid ORDER BY invest_time)  rank 
	 from hx_Bid_records where invest_state=1'

	end

   else if(@startDate='' and @endDate!='')

   

   begin

	   SET @SqlQuery='select investor_registerid,

	sum(case when rank=1 and invest_time <= '''+@endDate+''' then investment_amount else 0 end) as FirstMoney,

	sum(case when rank=1 then 1 else 0 end) as FirstCount,

	sum(case when rank>1 and invest_time <= '''+@endDate+''' then investment_amount else 0 end) as ComplexMoney,

	sum(case when rank>1 then 1 else 0 end) as ComplexCount,

	SUM(case when invest_time <= '''+@endDate+''' then investment_amount else 0 end) as AllMoney,

	SUM(case when invest_time <= '''+@endDate+''' then investment_amount*current_period/12 else 0 end) as FractureMoney,

	(isnull((SELECT SUM(recharge_amount) FROM dbo.hx_Recharge_history bb WHERE bb.membertable_registerid=aa.investor_registerid and recharge_condition=1 and recharge_time <= '''+@endDate+''' group by membertable_registerid) 

	+

	(SELECT SUM(money_order) FROM dbo.hx_td_LLpay_Recharge cc WHERE cc.UsrId=aa.investor_registerid and ReState=1 and ordertime <= '''+@endDate+''' group by UsrId),0))

	as RechargeAllMoney

	 from 

	(select * ,rank () OVER (PARTITION BY investor_registerid ORDER BY invest_time)  rank 

	 from hx_Bid_records where invest_state=1'

	end

   else

		begin

	    SET @SqlQuery='select investor_registerid,

		sum(case when rank=1 then investment_amount else 0 end) as FirstMoney,

		sum(case when rank=1 then 1 else 0 end) as FirstCount,

		sum(case when rank>1 then investment_amount else 0 end) as ComplexMoney,

		sum(case when rank>1 then 1 else 0 end) as ComplexCount,

		SUM(investment_amount) as AllMoney,

		SUM(investment_amount*current_period/12) as FractureMoney,

		(isnull((SELECT SUM(recharge_amount) FROM dbo.hx_Recharge_history bb WHERE bb.membertable_registerid=aa.investor_registerid and recharge_condition=1 group by membertable_registerid) 

		+

		(SELECT SUM(money_order) FROM dbo.hx_td_LLpay_Recharge cc WHERE cc.UsrId=aa.investor_registerid and ReState=1 group by UsrId)
,0))
		as RechargeAllMoney

		 from 

		(select * ,rank () OVER (PARTITION BY investor_registerid ORDER BY invest_time)  rank 

		 from hx_Bid_records where invest_state=1'

		end

	if(@mobile!='')

		begin

			SET @SqlQuery=@SqlQuery+' and investor_registerid in (select registerid from hx_member_table where mobile in ('+cast(@mobile as varchar(1000))+'))'			

		end

	SET @SqlQuery=@SqlQuery+') aa group by investor_registerid'

	print(@SqlQuery)

	SET NOCOUNT ON

		execute(@SqlQuery)

	SET NOCOUNT OFF

	COMMIT TRAN

END
GO
/****** Object:  StoredProcedure [dbo].[ViewDetailsReports]    Script Date: 09/27/2016 10:30:13 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE PROCEDURE [dbo].[ViewDetailsReports]  
(  
    @startDate varchar(50),--开始时间  
    @endDate varchar(50),  -- 结束时间  
    @mobile varchar(1000)   -- 电话号  
)  
AS  
BEGIN  
   BEGIN TRAN  
   DECLARE @SqlQuery varchar(4000)  
     
   if(@startDate!='' and @endDate!='')  
 begin  
   SET @SqlQuery= 'select [registerid]  
   ,[username]  
   ,[realname]  
   ,[registration_time]  
   ,(isnull((select SUM(investment_amount)  FROM dbo.hx_Bid_records b where b.investor_registerid=a.registerid and invest_state=1 and invest_time between '''+@startDate+''' and '''+@endDate+'''),0)) as AllMoney  
   ,(isnull((select SUM(investment_amount*current_period/12) FROM hx_Bid_records c where c.investor_registerid=a.registerid and invest_time between '''+@startDate+''' and '''+@endDate+'''),0)) as FractureMoney  
   ,(isnull((SELECT SUM(recharge_amount) FROM dbo.hx_Recharge_history d WHERE d.membertable_registerid=a.registerid and recharge_condition=1 and recharge_time between '''+@startDate+''' and '''+@endDate+''' group by membertable_registerid)   
   +  
   (SELECT SUM(money_order) FROM dbo.hx_td_LLpay_Recharge f WHERE f.UsrId=a.registerid and ReState=1 and ordertime between '''+@startDate+''' and '''+@endDate+''' group by UsrId),0))  
   as RechargeAllMoney  
   ,(CASE WHEN (select COUNT(1) from hx_Bid_records e where  e.investor_registerid=a.registerid and invest_state=1 and invest_time between '''+@startDate+''' and '''+@endDate+''')=1 THEN ''首投'' ELSE ''复投'' END ) AS IsFirst  
   FROM [hx_member_table] a '  
 end  
 else if(@startDate!='' and @endDate='')  
  begin  
    SET @SqlQuery= 'select [registerid]  
   ,[username]  
  ,[realname]  
  ,[registration_time]  
  ,(isnull((select SUM(investment_amount)  FROM dbo.hx_Bid_records b where b.investor_registerid=a.registerid and invest_state=1 and invest_time>='''+@startDate+''' ),0)) as AllMoney  
  ,(isnull((select SUM(investment_amount*current_period/12) FROM hx_Bid_records c where c.investor_registerid=a.registerid and invest_time>= '''+@startDate+'''),0))  
 as FractureMoney  
  ,(isnull((SELECT SUM(recharge_amount) FROM dbo.hx_Recharge_history d WHERE d.membertable_registerid=a.registerid and recharge_condition=1 and recharge_time>= '''+@startDate+''' group by membertable_registerid)   
  +  
  (SELECT SUM(money_order) FROM dbo.hx_td_LLpay_Recharge f WHERE f.UsrId=a.registerid and ReState=1 and ordertime>= '''+@startDate+''' group by UsrId),0))  
  as RechargeAllMoney  
  ,(CASE  (select COUNT(1) from hx_Bid_records e where  e.investor_registerid=a.registerid and invest_state=1 and invest_time>= '''+@startDate+''') WHEN 1 THEN ''首投'' WHEN 0 THEN ''无投资''  ELSE ''复投'' END ) AS IsFirst  
  FROM [hx_member_table] a '  
  end  
 else if(@startDate='' and @endDate!='')  
  begin  
  SET @SqlQuery= 'select [registerid]  
  ,[username]  
  ,[realname]  
  ,[registration_time]  
  ,(isnull((select SUM(investment_amount)  FROM dbo.hx_Bid_records b where b.investor_registerid=a.registerid and invest_state=1 and invest_time<= '''+@endDate+'''),0)) as AllMoney  
  ,(isnull((select SUM(investment_amount*current_period/12) FROM hx_Bid_records c where c.investor_registerid=a.registerid and invest_time<= '''+@endDate+'''),0)) as FractureMoney  
  ,(isnull((SELECT SUM(recharge_amount) FROM dbo.hx_Recharge_history d WHERE d.membertable_registerid=a.registerid and recharge_condition=1 and recharge_time<= '''+@endDate+''' group by membertable_registerid)   
  +  
  (SELECT SUM(money_order) FROM dbo.hx_td_LLpay_Recharge f WHERE f.UsrId=a.registerid and ReState=1 and ordertime<= '''+@endDate+''' group by UsrId),0))  
  as RechargeAllMoney  
  ,(CASE (select COUNT(1) from hx_Bid_records e where  e.investor_registerid=a.registerid and invest_state=1 and invest_time<= '''+@endDate+''') WHEN 1 THEN ''首投''  WHEN 0 THEN ''无投资''  ELSE ''复投'' END ) AS IsFirst  
  FROM [hx_member_table] a '  
  end  
 else  
  begin  
    SET @SqlQuery= 'select [registerid]  
    ,[username]  
    ,[realname]  
    ,[registration_time]  
    ,(isnull((select SUM(investment_amount)  FROM dbo.hx_Bid_records b where b.investor_registerid=a.registerid and invest_state=1),0)) as AllMoney  
    ,(isnull((select SUM(investment_amount*current_period/12) FROM hx_Bid_records c where c.investor_registerid=a.registerid),0)) as FractureMoney  
    ,(isnull((SELECT SUM(recharge_amount) FROM dbo.hx_Recharge_history d WHERE d.membertable_registerid=a.registerid and recharge_condition=1 group by membertable_registerid)   
    +  
    (SELECT SUM(money_order) FROM dbo.hx_td_LLpay_Recharge f WHERE f.UsrId=a.registerid and ReState=1 group by UsrId) ,0))  
    as RechargeAllMoney  
    ,(CASE (select COUNT(1) from hx_Bid_records e where  e.investor_registerid=a.registerid and invest_state=1) WHEN 1 THEN ''首投'' WHEN 0 THEN ''无投资''   ELSE ''复投'' END ) AS IsFirst  
    FROM [hx_member_table] a '  
  end  
  
 if(@mobile!='')  
 begin  
   SET @SqlQuery=@SqlQuery+' where mobile in ('+cast(@mobile as varchar(1000))+')'  
  end  
 print(@SqlQuery)  
 SET NOCOUNT ON  
  execute(@SqlQuery)  
      
 SET NOCOUNT OFF  
 COMMIT TRAN  
END
GO
/****** Object:  View [dbo].[V_type_news]    Script Date: 09/27/2016 10:30:13 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE view [dbo].[V_type_news]
as
select  dbo.hx_td_about_news.newid, dbo.hx_td_about_news.web_Type_menu_id, dbo.hx_td_about_news.News_title, dbo.hx_td_about_news.News_Key,   
                      dbo.hx_td_about_news.news_Des, dbo.hx_td_about_news.context, dbo.hx_td_about_news.createtime, dbo.hx_td_about_news.adminuserid,   
                      dbo.hx_td_web_type.menu_name, dbo.hx_td_web_type.parentid, dbo.hx_td_web_type.rootid, dbo.hx_td_web_type.path1, dbo.hx_td_web_type.orderid,   
                      hx_td_web_type_1.menu_name AS topmenuname, dbo.hx_td_about_news.comm, dbo.hx_td_about_news.listcomm  from hx_td_about_news left join hx_td_web_type  on hx_td_about_news.web_Type_menu_id=hx_td_web_type.menu_id 
left join hx_td_web_type as hx_td_web_type_1 on  dbo.hx_td_web_type.rootid = hx_td_web_type_1.menu_id
GO
EXEC sys.sp_addextendedproperty @name=N'MS_DiagramPane1', @value=N'[0E232FF0-B466-11cf-A24F-00AA00A3EFFF, 1.00]
Begin DesignProperties = 
   Begin PaneConfigurations = 
      Begin PaneConfiguration = 0
         NumPanes = 4
         Configuration = "(H (1[45] 4[19] 2[13] 3) )"
      End
      Begin PaneConfiguration = 1
         NumPanes = 3
         Configuration = "(H (1 [50] 4 [25] 3))"
      End
      Begin PaneConfiguration = 2
         NumPanes = 3
         Configuration = "(H (1 [50] 2 [25] 3))"
      End
      Begin PaneConfiguration = 3
         NumPanes = 3
         Configuration = "(H (4 [30] 2 [40] 3))"
      End
      Begin PaneConfiguration = 4
         NumPanes = 2
         Configuration = "(H (1 [56] 3))"
      End
      Begin PaneConfiguration = 5
         NumPanes = 2
         Configuration = "(H (2 [66] 3))"
      End
      Begin PaneConfiguration = 6
         NumPanes = 2
         Configuration = "(H (4 [50] 3))"
      End
      Begin PaneConfiguration = 7
         NumPanes = 1
         Configuration = "(V (3))"
      End
      Begin PaneConfiguration = 8
         NumPanes = 3
         Configuration = "(H (1[56] 4[18] 2) )"
      End
      Begin PaneConfiguration = 9
         NumPanes = 2
         Configuration = "(H (1 [75] 4))"
      End
      Begin PaneConfiguration = 10
         NumPanes = 2
         Configuration = "(H (1[66] 2) )"
      End
      Begin PaneConfiguration = 11
         NumPanes = 2
         Configuration = "(H (4 [60] 2))"
      End
      Begin PaneConfiguration = 12
         NumPanes = 1
         Configuration = "(H (1) )"
      End
      Begin PaneConfiguration = 13
         NumPanes = 1
         Configuration = "(V (4))"
      End
      Begin PaneConfiguration = 14
         NumPanes = 1
         Configuration = "(V (2))"
      End
      ActivePaneConfig = 0
   End
   Begin DiagramPane = 
      Begin Origin = 
         Top = 0
         Left = -135
      End
      Begin Tables = 
         Begin Table = "hx_td_web_type"
            Begin Extent = 
               Top = 0
               Left = 256
               Bottom = 150
               Right = 474
            End
            DisplayFlags = 280
            TopColumn = 9
         End
         Begin Table = "hx_td_about_news"
            Begin Extent = 
               Top = 0
               Left = 643
               Bottom = 156
               Right = 819
            End
            DisplayFlags = 280
            TopColumn = 3
         End
         Begin Table = "hx_td_web_type_1"
            Begin Extent = 
               Top = 6
               Left = 38
               Bottom = 169
               Right = 176
            End
            DisplayFlags = 280
            TopColumn = 0
         End
      End
   End
   Begin SQLPane = 
   End
   Begin DataPane = 
      Begin ParameterDefaults = ""
      End
      Begin ColumnWidths = 16
         Width = 284
         Width = 1500
         Width = 1500
         Width = 1500
         Width = 1500
         Width = 1500
         Width = 1500
         Width = 1500
         Width = 1500
         Width = 1500
         Width = 1500
         Width = 1500
         Width = 1500
         Width = 1500
         Width = 1500
         Width = 1500
      End
   End
   Begin CriteriaPane = 
      Begin ColumnWidths = 11
         Column = 1440
         Alias = 1605
         Table = 1170
         Output = 720
         Append = 1400
         NewValue = 1170
         SortType = 1350
         SortOrder = 1410
         GroupBy = 1350
         Filter = 1350
         Or = 1350
         Or = 1350
         Or = 1350
      End
   End
End
' , @level0type=N'SCHEMA',@level0name=N'dbo', @level1type=N'VIEW',@level1name=N'V_type_news'
GO
EXEC sys.sp_addextendedproperty @name=N'MS_DiagramPaneCount', @value=1 , @level0type=N'SCHEMA',@level0name=N'dbo', @level1type=N'VIEW',@level1name=N'V_type_news'
GO
/****** Object:  View [dbo].[V_td_LLpay_bank]    Script Date: 09/27/2016 10:30:13 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE VIEW [dbo].[V_td_LLpay_bank]
AS
SELECT     dbo.hx_td_LLpay_Recharge.Rechargeid, dbo.hx_td_LLpay_Recharge.UsrId, dbo.hx_td_LLpay_Recharge.no_order, dbo.hx_td_LLpay_Recharge.ordertime, 
                      dbo.hx_td_LLpay_Recharge.info_order, dbo.hx_td_LLpay_Recharge.money_order, dbo.hx_td_LLpay_Recharge.BankCode, dbo.hx_td_LLpay_Recharge.card_no, 
                      dbo.hx_td_LLpay_Recharge.ReState, dbo.hx_td_LLpay_Recharge.oid_paybill, dbo.hx_td_LLBack.BankCode AS Expr1, dbo.hx_td_LLBack.BankName
FROM         dbo.hx_td_LLpay_Recharge INNER JOIN
                      dbo.hx_td_LLBack ON dbo.hx_td_LLpay_Recharge.BankCode = dbo.hx_td_LLBack.BankCode
GO
EXEC sys.sp_addextendedproperty @name=N'MS_DiagramPane1', @value=N'[0E232FF0-B466-11cf-A24F-00AA00A3EFFF, 1.00]
Begin DesignProperties = 
   Begin PaneConfigurations = 
      Begin PaneConfiguration = 0
         NumPanes = 4
         Configuration = "(H (1[41] 4[20] 2[11] 3) )"
      End
      Begin PaneConfiguration = 1
         NumPanes = 3
         Configuration = "(H (1 [50] 4 [25] 3))"
      End
      Begin PaneConfiguration = 2
         NumPanes = 3
         Configuration = "(H (1 [50] 2 [25] 3))"
      End
      Begin PaneConfiguration = 3
         NumPanes = 3
         Configuration = "(H (4 [30] 2 [40] 3))"
      End
      Begin PaneConfiguration = 4
         NumPanes = 2
         Configuration = "(H (1 [56] 3))"
      End
      Begin PaneConfiguration = 5
         NumPanes = 2
         Configuration = "(H (2 [66] 3))"
      End
      Begin PaneConfiguration = 6
         NumPanes = 2
         Configuration = "(H (4 [50] 3))"
      End
      Begin PaneConfiguration = 7
         NumPanes = 1
         Configuration = "(V (3))"
      End
      Begin PaneConfiguration = 8
         NumPanes = 3
         Configuration = "(H (1[56] 4[18] 2) )"
      End
      Begin PaneConfiguration = 9
         NumPanes = 2
         Configuration = "(H (1 [75] 4))"
      End
      Begin PaneConfiguration = 10
         NumPanes = 2
         Configuration = "(H (1[66] 2) )"
      End
      Begin PaneConfiguration = 11
         NumPanes = 2
         Configuration = "(H (4 [60] 2))"
      End
      Begin PaneConfiguration = 12
         NumPanes = 1
         Configuration = "(H (1) )"
      End
      Begin PaneConfiguration = 13
         NumPanes = 1
         Configuration = "(V (4))"
      End
      Begin PaneConfiguration = 14
         NumPanes = 1
         Configuration = "(V (2))"
      End
      ActivePaneConfig = 0
   End
   Begin DiagramPane = 
      Begin Origin = 
         Top = 0
         Left = 0
      End
      Begin Tables = 
         Begin Table = "hx_td_LLpay_Recharge"
            Begin Extent = 
               Top = 6
               Left = 38
               Bottom = 206
               Right = 182
            End
            DisplayFlags = 280
            TopColumn = 0
         End
         Begin Table = "hx_td_LLBack"
            Begin Extent = 
               Top = 6
               Left = 220
               Bottom = 174
               Right = 353
            End
            DisplayFlags = 280
            TopColumn = 0
         End
      End
   End
   Begin SQLPane = 
   End
   Begin DataPane = 
      Begin ParameterDefaults = ""
      End
      Begin ColumnWidths = 9
         Width = 284
         Width = 1500
         Width = 1500
         Width = 1500
         Width = 1500
         Width = 1500
         Width = 1500
         Width = 1500
         Width = 1500
      End
   End
   Begin CriteriaPane = 
      Begin ColumnWidths = 11
         Column = 1440
         Alias = 900
         Table = 1170
         Output = 720
         Append = 1400
         NewValue = 1170
         SortType = 1350
         SortOrder = 1410
         GroupBy = 1350
         Filter = 1350
         Or = 1350
         Or = 1350
         Or = 1350
      End
   End
End
' , @level0type=N'SCHEMA',@level0name=N'dbo', @level1type=N'VIEW',@level1name=N'V_td_LLpay_bank'
GO
EXEC sys.sp_addextendedproperty @name=N'MS_DiagramPaneCount', @value=1 , @level0type=N'SCHEMA',@level0name=N'dbo', @level1type=N'VIEW',@level1name=N'V_td_LLpay_bank'
GO
/****** Object:  View [dbo].[V_menu_toptype]    Script Date: 09/27/2016 10:30:13 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE VIEW [dbo].[V_menu_toptype]
AS
SELECT     hx_td_admin_role_1.adminuserid, dbo.hx_td_admin_role.menu_id, dbo.hx_td_menu.menu_name, dbo.hx_td_menu.parentid, 
                      hx_td_menu_1.menu_name AS topmenu_name, hx_td_menu_1.parentid AS topparentid, hx_td_admin_role_1.isread, hx_td_admin_role_1.isadd, 
                      hx_td_admin_role_1.isedit, hx_td_admin_role_1.isdelete
FROM         dbo.hx_td_admin_role AS hx_td_admin_role_1 INNER JOIN
                      dbo.hx_td_admin_role ON hx_td_admin_role_1.menu_id = dbo.hx_td_admin_role.menu_id INNER JOIN
                      dbo.hx_td_menu ON hx_td_admin_role_1.menu_id = dbo.hx_td_menu.menu_id INNER JOIN
                      dbo.hx_td_menu AS hx_td_menu_1 ON dbo.hx_td_menu.parentid = hx_td_menu_1.menu_id
WHERE     (hx_td_admin_role_1.isread = 1)
GO
EXEC sys.sp_addextendedproperty @name=N'MS_DiagramPane1', @value=N'[0E232FF0-B466-11cf-A24F-00AA00A3EFFF, 1.00]
Begin DesignProperties = 
   Begin PaneConfigurations = 
      Begin PaneConfiguration = 0
         NumPanes = 4
         Configuration = "(H (1[27] 4[24] 2[22] 3) )"
      End
      Begin PaneConfiguration = 1
         NumPanes = 3
         Configuration = "(H (1 [50] 4 [25] 3))"
      End
      Begin PaneConfiguration = 2
         NumPanes = 3
         Configuration = "(H (1 [50] 2 [25] 3))"
      End
      Begin PaneConfiguration = 3
         NumPanes = 3
         Configuration = "(H (4 [30] 2 [40] 3))"
      End
      Begin PaneConfiguration = 4
         NumPanes = 2
         Configuration = "(H (1 [56] 3))"
      End
      Begin PaneConfiguration = 5
         NumPanes = 2
         Configuration = "(H (2 [66] 3))"
      End
      Begin PaneConfiguration = 6
         NumPanes = 2
         Configuration = "(H (4 [50] 3))"
      End
      Begin PaneConfiguration = 7
         NumPanes = 1
         Configuration = "(V (3))"
      End
      Begin PaneConfiguration = 8
         NumPanes = 3
         Configuration = "(H (1[56] 4[18] 2) )"
      End
      Begin PaneConfiguration = 9
         NumPanes = 2
         Configuration = "(H (1 [75] 4))"
      End
      Begin PaneConfiguration = 10
         NumPanes = 2
         Configuration = "(H (1[66] 2) )"
      End
      Begin PaneConfiguration = 11
         NumPanes = 2
         Configuration = "(H (4 [60] 2))"
      End
      Begin PaneConfiguration = 12
         NumPanes = 1
         Configuration = "(H (1) )"
      End
      Begin PaneConfiguration = 13
         NumPanes = 1
         Configuration = "(V (4))"
      End
      Begin PaneConfiguration = 14
         NumPanes = 1
         Configuration = "(V (2))"
      End
      ActivePaneConfig = 0
   End
   Begin DiagramPane = 
      Begin Origin = 
         Top = 0
         Left = 0
      End
      Begin Tables = 
         Begin Table = "hx_td_admin_role_1"
            Begin Extent = 
               Top = 5
               Left = 526
               Bottom = 189
               Right = 693
            End
            DisplayFlags = 280
            TopColumn = 0
         End
         Begin Table = "hx_td_admin_role"
            Begin Extent = 
               Top = 9
               Left = 716
               Bottom = 171
               Right = 866
            End
            DisplayFlags = 280
            TopColumn = 1
         End
         Begin Table = "hx_td_menu"
            Begin Extent = 
               Top = 11
               Left = 353
               Bottom = 119
               Right = 491
            End
            DisplayFlags = 280
            TopColumn = 0
         End
         Begin Table = "hx_td_menu_1"
            Begin Extent = 
               Top = 14
               Left = 161
               Bottom = 122
               Right = 299
            End
            DisplayFlags = 280
            TopColumn = 0
         End
      End
   End
   Begin SQLPane = 
   End
   Begin DataPane = 
      Begin ParameterDefaults = ""
      End
      Begin ColumnWidths = 11
         Width = 284
         Width = 1500
         Width = 1500
         Width = 1500
         Width = 1500
         Width = 1500
         Width = 1500
         Width = 1500
         Width = 1500
         Width = 1500
         Width = 1500
      End
   End
   Begin CriteriaPane = 
      Begin ColumnWidths = 11
         Column = 1440
         Alias = 900
         Table = 2655
         Output = 720
         Append = 1400
         NewValue = 1170
         SortType = 1350
         SortOrder = 1410
         GroupBy = 1350
         Filter = 1350' , @level0type=N'SCHEMA',@level0name=N'dbo', @level1type=N'VIEW',@level1name=N'V_menu_toptype'
GO
EXEC sys.sp_addextendedproperty @name=N'MS_DiagramPane2', @value=N'
         Or = 1350
         Or = 1350
         Or = 1350
      End
   End
End
' , @level0type=N'SCHEMA',@level0name=N'dbo', @level1type=N'VIEW',@level1name=N'V_menu_toptype'
GO
EXEC sys.sp_addextendedproperty @name=N'MS_DiagramPaneCount', @value=2 , @level0type=N'SCHEMA',@level0name=N'dbo', @level1type=N'VIEW',@level1name=N'V_menu_toptype'
GO
/****** Object:  View [dbo].[V_contract_type_template]    Script Date: 09/27/2016 10:30:13 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE VIEW [dbo].[V_contract_type_template]
AS
SELECT     dbo.hx_Contract_template.contract_template_id, dbo.hx_Contract_template.contract_template_name, dbo.hx_Contract_template.contract_template_context, 
                      dbo.hx_Contract_template.usestate, dbo.hx_Contract_template.cretatetime, dbo.hx_contract_type.contract_type_name, dbo.hx_contract_type.contract_type_id
FROM         dbo.hx_Contract_template INNER JOIN
                      dbo.hx_contract_type ON dbo.hx_Contract_template.contract_type_id = dbo.hx_contract_type.contract_type_id
GO
EXEC sys.sp_addextendedproperty @name=N'MS_DiagramPane1', @value=N'[0E232FF0-B466-11cf-A24F-00AA00A3EFFF, 1.00]
Begin DesignProperties = 
   Begin PaneConfigurations = 
      Begin PaneConfiguration = 0
         NumPanes = 4
         Configuration = "(H (1[41] 4[20] 2[5] 3) )"
      End
      Begin PaneConfiguration = 1
         NumPanes = 3
         Configuration = "(H (1 [50] 4 [25] 3))"
      End
      Begin PaneConfiguration = 2
         NumPanes = 3
         Configuration = "(H (1 [50] 2 [25] 3))"
      End
      Begin PaneConfiguration = 3
         NumPanes = 3
         Configuration = "(H (4 [30] 2 [40] 3))"
      End
      Begin PaneConfiguration = 4
         NumPanes = 2
         Configuration = "(H (1 [56] 3))"
      End
      Begin PaneConfiguration = 5
         NumPanes = 2
         Configuration = "(H (2 [66] 3))"
      End
      Begin PaneConfiguration = 6
         NumPanes = 2
         Configuration = "(H (4 [50] 3))"
      End
      Begin PaneConfiguration = 7
         NumPanes = 1
         Configuration = "(V (3))"
      End
      Begin PaneConfiguration = 8
         NumPanes = 3
         Configuration = "(H (1[56] 4[18] 2) )"
      End
      Begin PaneConfiguration = 9
         NumPanes = 2
         Configuration = "(H (1 [75] 4))"
      End
      Begin PaneConfiguration = 10
         NumPanes = 2
         Configuration = "(H (1[66] 2) )"
      End
      Begin PaneConfiguration = 11
         NumPanes = 2
         Configuration = "(H (4 [60] 2))"
      End
      Begin PaneConfiguration = 12
         NumPanes = 1
         Configuration = "(H (1) )"
      End
      Begin PaneConfiguration = 13
         NumPanes = 1
         Configuration = "(V (4))"
      End
      Begin PaneConfiguration = 14
         NumPanes = 1
         Configuration = "(V (2))"
      End
      ActivePaneConfig = 0
   End
   Begin DiagramPane = 
      Begin Origin = 
         Top = 0
         Left = 0
      End
      Begin Tables = 
         Begin Table = "hx_Contract_template"
            Begin Extent = 
               Top = 14
               Left = 453
               Bottom = 167
               Right = 664
            End
            DisplayFlags = 280
            TopColumn = 2
         End
         Begin Table = "hx_contract_type"
            Begin Extent = 
               Top = 6
               Left = 126
               Bottom = 99
               Right = 306
            End
            DisplayFlags = 280
            TopColumn = 0
         End
      End
   End
   Begin SQLPane = 
   End
   Begin DataPane = 
      Begin ParameterDefaults = ""
      End
      Begin ColumnWidths = 9
         Width = 284
         Width = 1500
         Width = 1500
         Width = 1500
         Width = 1500
         Width = 1500
         Width = 2340
         Width = 1500
         Width = 1500
      End
   End
   Begin CriteriaPane = 
      Begin ColumnWidths = 11
         Column = 1440
         Alias = 900
         Table = 1170
         Output = 720
         Append = 1400
         NewValue = 1170
         SortType = 1350
         SortOrder = 1410
         GroupBy = 1350
         Filter = 1350
         Or = 1350
         Or = 1350
         Or = 1350
      End
   End
End
' , @level0type=N'SCHEMA',@level0name=N'dbo', @level1type=N'VIEW',@level1name=N'V_contract_type_template'
GO
EXEC sys.sp_addextendedproperty @name=N'MS_DiagramPaneCount', @value=1 , @level0type=N'SCHEMA',@level0name=N'dbo', @level1type=N'VIEW',@level1name=N'V_contract_type_template'
GO
/****** Object:  Table [dbo].[bonus_account]    Script Date: 09/27/2016 10:30:13 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
SET ANSI_PADDING ON
GO
CREATE TABLE [dbo].[bonus_account](
	[bonus_account_id] [int] IDENTITY(1,1) NOT NULL,
	[activity_schedule_id] [int] NULL,
	[membertable_registerid] [int] NULL,
	[activity_schedule_name] [varchar](50) NULL,
	[amount_of_reward] [numeric](38, 2) NULL,
	[use_lower_limit] [numeric](38, 2) NULL,
	[reward] [int] NULL,
	[start_date] [datetime] NULL,
	[end_date] [datetime] NULL,
	[reward_state] [int] NULL,
	[reward_remarks] [nvarchar](max) NULL,
	[entry_time] [datetime] NULL,
	[act_state] [int] NULL,
	[proid] [int] NULL,
 CONSTRAINT [PK_BONUS_ACCOUNT] PRIMARY KEY CLUSTERED 
(
	[bonus_account_id] ASC
)WITH (PAD_INDEX  = OFF, STATISTICS_NORECOMPUTE  = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS  = ON, ALLOW_PAGE_LOCKS  = ON) ON [PRIMARY]
) ON [PRIMARY]
GO
SET ANSI_PADDING OFF
GO
CREATE NONCLUSTERED INDEX [IX_bonus_account] ON [dbo].[bonus_account] 
(
	[activity_schedule_id] ASC
)WITH (PAD_INDEX  = OFF, STATISTICS_NORECOMPUTE  = OFF, SORT_IN_TEMPDB = OFF, IGNORE_DUP_KEY = OFF, DROP_EXISTING = OFF, ONLINE = OFF, ALLOW_ROW_LOCKS  = ON, ALLOW_PAGE_LOCKS  = ON) ON [PRIMARY]
GO
CREATE NONCLUSTERED INDEX [IX_bonus_account_1] ON [dbo].[bonus_account] 
(
	[membertable_registerid] ASC
)WITH (PAD_INDEX  = OFF, STATISTICS_NORECOMPUTE  = OFF, SORT_IN_TEMPDB = OFF, IGNORE_DUP_KEY = OFF, DROP_EXISTING = OFF, ONLINE = OFF, ALLOW_ROW_LOCKS  = ON, ALLOW_PAGE_LOCKS  = ON) ON [PRIMARY]
GO
CREATE NONCLUSTERED INDEX [IX_bonus_account_2] ON [dbo].[bonus_account] 
(
	[proid] ASC
)WITH (PAD_INDEX  = OFF, STATISTICS_NORECOMPUTE  = OFF, SORT_IN_TEMPDB = OFF, IGNORE_DUP_KEY = OFF, DROP_EXISTING = OFF, ONLINE = OFF, ALLOW_ROW_LOCKS  = ON, ALLOW_PAGE_LOCKS  = ON) ON [PRIMARY]
GO
EXEC sys.sp_addextendedproperty @name=N'MS_Description', @value=N'0 常规(只奖励单方)  1 邀请奖励双方' , @level0type=N'SCHEMA',@level0name=N'dbo', @level1type=N'TABLE',@level1name=N'bonus_account', @level2type=N'COLUMN',@level2name=N'reward'
GO
EXEC sys.sp_addextendedproperty @name=N'MS_Description', @value=N'0 未使用   1已使用  2 已过期' , @level0type=N'SCHEMA',@level0name=N'dbo', @level1type=N'TABLE',@level1name=N'bonus_account', @level2type=N'COLUMN',@level2name=N'reward_state'
GO
/****** Object:  View [dbo].[V_bonus_account]    Script Date: 09/27/2016 10:30:13 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE VIEW [dbo].[V_bonus_account]
AS
SELECT     dbo.bonus_account.bonus_account_id, dbo.bonus_account.activity_schedule_id, dbo.bonus_account.activity_schedule_name, dbo.bonus_account.amount_of_reward, 
                      dbo.bonus_account.use_lower_limit, dbo.bonus_account.reward, dbo.bonus_account.start_date, dbo.bonus_account.end_date, dbo.bonus_account.reward_state, 
                      dbo.bonus_account.reward_remarks, dbo.bonus_account.entry_time, dbo.bonus_account.act_state, dbo.bonus_account.proid, dbo.hx_member_table.username, 
                      dbo.hx_member_table.realname, dbo.bonus_account.membertable_registerid, dbo.hx_member_table.mobile, dbo.hx_member_table.iD_number
FROM         dbo.bonus_account INNER JOIN
                      dbo.hx_Activity_schedule ON dbo.bonus_account.activity_schedule_id = dbo.hx_Activity_schedule.activity_schedule_id INNER JOIN
                      dbo.hx_member_table ON dbo.bonus_account.membertable_registerid = dbo.hx_member_table.registerid
GO
EXEC sys.sp_addextendedproperty @name=N'MS_DiagramPane1', @value=N'[0E232FF0-B466-11cf-A24F-00AA00A3EFFF, 1.00]
Begin DesignProperties = 
   Begin PaneConfigurations = 
      Begin PaneConfiguration = 0
         NumPanes = 4
         Configuration = "(H (1[41] 4[20] 2[7] 3) )"
      End
      Begin PaneConfiguration = 1
         NumPanes = 3
         Configuration = "(H (1 [50] 4 [25] 3))"
      End
      Begin PaneConfiguration = 2
         NumPanes = 3
         Configuration = "(H (1 [50] 2 [25] 3))"
      End
      Begin PaneConfiguration = 3
         NumPanes = 3
         Configuration = "(H (4 [30] 2 [40] 3))"
      End
      Begin PaneConfiguration = 4
         NumPanes = 2
         Configuration = "(H (1 [56] 3))"
      End
      Begin PaneConfiguration = 5
         NumPanes = 2
         Configuration = "(H (2 [66] 3))"
      End
      Begin PaneConfiguration = 6
         NumPanes = 2
         Configuration = "(H (4 [50] 3))"
      End
      Begin PaneConfiguration = 7
         NumPanes = 1
         Configuration = "(V (3))"
      End
      Begin PaneConfiguration = 8
         NumPanes = 3
         Configuration = "(H (1[56] 4[18] 2) )"
      End
      Begin PaneConfiguration = 9
         NumPanes = 2
         Configuration = "(H (1 [75] 4))"
      End
      Begin PaneConfiguration = 10
         NumPanes = 2
         Configuration = "(H (1[66] 2) )"
      End
      Begin PaneConfiguration = 11
         NumPanes = 2
         Configuration = "(H (4 [60] 2))"
      End
      Begin PaneConfiguration = 12
         NumPanes = 1
         Configuration = "(H (1) )"
      End
      Begin PaneConfiguration = 13
         NumPanes = 1
         Configuration = "(V (4))"
      End
      Begin PaneConfiguration = 14
         NumPanes = 1
         Configuration = "(V (2))"
      End
      ActivePaneConfig = 0
   End
   Begin DiagramPane = 
      Begin Origin = 
         Top = 0
         Left = 0
      End
      Begin Tables = 
         Begin Table = "bonus_account"
            Begin Extent = 
               Top = 13
               Left = 346
               Bottom = 175
               Right = 541
            End
            DisplayFlags = 280
            TopColumn = 3
         End
         Begin Table = "hx_Activity_schedule"
            Begin Extent = 
               Top = 9
               Left = 659
               Bottom = 117
               Right = 854
            End
            DisplayFlags = 280
            TopColumn = 0
         End
         Begin Table = "hx_member_table"
            Begin Extent = 
               Top = 6
               Left = 38
               Bottom = 172
               Right = 241
            End
            DisplayFlags = 280
            TopColumn = 2
         End
      End
   End
   Begin SQLPane = 
   End
   Begin DataPane = 
      Begin ParameterDefaults = ""
      End
      Begin ColumnWidths = 16
         Width = 284
         Width = 1500
         Width = 1500
         Width = 1500
         Width = 1500
         Width = 1500
         Width = 1500
         Width = 1500
         Width = 1500
         Width = 1500
         Width = 1500
         Width = 1500
         Width = 1500
         Width = 1500
         Width = 1500
         Width = 1500
      End
   End
   Begin CriteriaPane = 
      Begin ColumnWidths = 11
         Column = 1440
         Alias = 900
         Table = 1170
         Output = 720
         Append = 1400
         NewValue = 1170
         SortType = 1350
         SortOrder = 1410
         GroupBy = 1350
         Filter = 1350
         Or = 1350
         Or = 1350
         Or = 1350
      End
   End
End
' , @level0type=N'SCHEMA',@level0name=N'dbo', @level1type=N'VIEW',@level1name=N'V_bonus_account'
GO
EXEC sys.sp_addextendedproperty @name=N'MS_DiagramPaneCount', @value=1 , @level0type=N'SCHEMA',@level0name=N'dbo', @level1type=N'VIEW',@level1name=N'V_bonus_account'
GO
/****** Object:  View [dbo].[V_bid_records_bonus_account]    Script Date: 09/27/2016 10:30:13 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE VIEW [dbo].[V_bid_records_bonus_account]
AS
SELECT     dbo.hx_Bid_records.bid_records_id, dbo.hx_Bid_records.borrower_registerid, dbo.hx_Bid_records.targetid, dbo.hx_Bid_records.loan_number, 
                      dbo.hx_Bid_records.annual_interest_rate, dbo.hx_Bid_records.current_period, dbo.hx_Bid_records.investment_amount, dbo.hx_Bid_records.OrdId, 
                      dbo.bonus_account.proid, dbo.bonus_account.bonus_account_id, dbo.bonus_account.activity_schedule_id, dbo.bonus_account.activity_schedule_name, 
                      dbo.bonus_account.amount_of_reward, dbo.bonus_account.use_lower_limit, dbo.bonus_account.reward, dbo.bonus_account.start_date, 
                      dbo.bonus_account.membertable_registerid, dbo.bonus_account.reward_state
FROM         dbo.hx_Bid_records INNER JOIN
                      dbo.bonus_account ON dbo.hx_Bid_records.bid_records_id = dbo.bonus_account.proid
GO
EXEC sys.sp_addextendedproperty @name=N'MS_DiagramPane1', @value=N'[0E232FF0-B466-11cf-A24F-00AA00A3EFFF, 1.00]
Begin DesignProperties = 
   Begin PaneConfigurations = 
      Begin PaneConfiguration = 0
         NumPanes = 4
         Configuration = "(H (1[35] 4[11] 2[26] 3) )"
      End
      Begin PaneConfiguration = 1
         NumPanes = 3
         Configuration = "(H (1 [50] 4 [25] 3))"
      End
      Begin PaneConfiguration = 2
         NumPanes = 3
         Configuration = "(H (1 [50] 2 [25] 3))"
      End
      Begin PaneConfiguration = 3
         NumPanes = 3
         Configuration = "(H (4 [30] 2 [40] 3))"
      End
      Begin PaneConfiguration = 4
         NumPanes = 2
         Configuration = "(H (1 [56] 3))"
      End
      Begin PaneConfiguration = 5
         NumPanes = 2
         Configuration = "(H (2 [66] 3))"
      End
      Begin PaneConfiguration = 6
         NumPanes = 2
         Configuration = "(H (4 [50] 3))"
      End
      Begin PaneConfiguration = 7
         NumPanes = 1
         Configuration = "(V (3))"
      End
      Begin PaneConfiguration = 8
         NumPanes = 3
         Configuration = "(H (1[56] 4[18] 2) )"
      End
      Begin PaneConfiguration = 9
         NumPanes = 2
         Configuration = "(H (1 [75] 4))"
      End
      Begin PaneConfiguration = 10
         NumPanes = 2
         Configuration = "(H (1[66] 2) )"
      End
      Begin PaneConfiguration = 11
         NumPanes = 2
         Configuration = "(H (4 [60] 2))"
      End
      Begin PaneConfiguration = 12
         NumPanes = 1
         Configuration = "(H (1) )"
      End
      Begin PaneConfiguration = 13
         NumPanes = 1
         Configuration = "(V (4))"
      End
      Begin PaneConfiguration = 14
         NumPanes = 1
         Configuration = "(V (2))"
      End
      ActivePaneConfig = 0
   End
   Begin DiagramPane = 
      Begin Origin = 
         Top = 0
         Left = 0
      End
      Begin Tables = 
         Begin Table = "hx_Bid_records"
            Begin Extent = 
               Top = 6
               Left = 38
               Bottom = 174
               Right = 223
            End
            DisplayFlags = 280
            TopColumn = 0
         End
         Begin Table = "bonus_account"
            Begin Extent = 
               Top = 6
               Left = 257
               Bottom = 174
               Right = 452
            End
            DisplayFlags = 280
            TopColumn = 5
         End
      End
   End
   Begin SQLPane = 
   End
   Begin DataPane = 
      Begin ParameterDefaults = ""
      End
      Begin ColumnWidths = 9
         Width = 284
         Width = 1500
         Width = 1500
         Width = 1500
         Width = 1500
         Width = 1500
         Width = 1500
         Width = 1500
         Width = 1500
      End
   End
   Begin CriteriaPane = 
      Begin ColumnWidths = 11
         Column = 1440
         Alias = 900
         Table = 1170
         Output = 720
         Append = 1400
         NewValue = 1170
         SortType = 1350
         SortOrder = 1410
         GroupBy = 1350
         Filter = 1350
         Or = 1350
         Or = 1350
         Or = 1350
      End
   End
End
' , @level0type=N'SCHEMA',@level0name=N'dbo', @level1type=N'VIEW',@level1name=N'V_bid_records_bonus_account'
GO
EXEC sys.sp_addextendedproperty @name=N'MS_DiagramPaneCount', @value=1 , @level0type=N'SCHEMA',@level0name=N'dbo', @level1type=N'VIEW',@level1name=N'V_bid_records_bonus_account'
GO
/****** Object:  View [dbo].[v_adminuser_department]    Script Date: 09/27/2016 10:30:13 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE VIEW [dbo].[v_adminuser_department]
AS
SELECT     dbo.hx_td_adminuser.adminuserid, dbo.hx_td_adminuser.adminuser, dbo.hx_td_adminuser.userpass, dbo.hx_td_adminuser.state, dbo.hx_td_adminuser.datetime, 
                      dbo.hx_td_adminuser.trueName, dbo.hx_td_adminuser.province, dbo.hx_td_adminuser.city, dbo.hx_td_adminuser.email, dbo.hx_td_adminuser.tel, 
                      dbo.hx_td_adminuser.phone_number, dbo.hx_td_adminuser.lastLoginTime, dbo.hx_td_adminuser.lastLoginIP, dbo.hx_td_adminuser.loginTimes, 
                      dbo.hx_td_adminuser.worknum, dbo.hx_td_adminuser.sex, dbo.hx_td_adminuser.department_id, dbo.hx_td_adminuser.area_id, dbo.hx_td_department.parentid, 
                      dbo.hx_td_department.rootid, dbo.hx_td_department.department_name
FROM         dbo.hx_td_adminuser INNER JOIN
                      dbo.hx_td_department ON dbo.hx_td_adminuser.department_id = dbo.hx_td_department.department_id
GO
EXEC sys.sp_addextendedproperty @name=N'MS_DiagramPane1', @value=N'[0E232FF0-B466-11cf-A24F-00AA00A3EFFF, 1.00]
Begin DesignProperties = 
   Begin PaneConfigurations = 
      Begin PaneConfiguration = 0
         NumPanes = 4
         Configuration = "(H (1[68] 4[5] 2[9] 3) )"
      End
      Begin PaneConfiguration = 1
         NumPanes = 3
         Configuration = "(H (1 [50] 4 [25] 3))"
      End
      Begin PaneConfiguration = 2
         NumPanes = 3
         Configuration = "(H (1 [50] 2 [25] 3))"
      End
      Begin PaneConfiguration = 3
         NumPanes = 3
         Configuration = "(H (4 [30] 2 [40] 3))"
      End
      Begin PaneConfiguration = 4
         NumPanes = 2
         Configuration = "(H (1 [56] 3))"
      End
      Begin PaneConfiguration = 5
         NumPanes = 2
         Configuration = "(H (2 [66] 3))"
      End
      Begin PaneConfiguration = 6
         NumPanes = 2
         Configuration = "(H (4 [50] 3))"
      End
      Begin PaneConfiguration = 7
         NumPanes = 1
         Configuration = "(V (3))"
      End
      Begin PaneConfiguration = 8
         NumPanes = 3
         Configuration = "(H (1[56] 4[18] 2) )"
      End
      Begin PaneConfiguration = 9
         NumPanes = 2
         Configuration = "(H (1 [75] 4))"
      End
      Begin PaneConfiguration = 10
         NumPanes = 2
         Configuration = "(H (1[66] 2) )"
      End
      Begin PaneConfiguration = 11
         NumPanes = 2
         Configuration = "(H (4 [60] 2))"
      End
      Begin PaneConfiguration = 12
         NumPanes = 1
         Configuration = "(H (1) )"
      End
      Begin PaneConfiguration = 13
         NumPanes = 1
         Configuration = "(V (4))"
      End
      Begin PaneConfiguration = 14
         NumPanes = 1
         Configuration = "(V (2))"
      End
      ActivePaneConfig = 0
   End
   Begin DiagramPane = 
      Begin Origin = 
         Top = 0
         Left = 0
      End
      Begin Tables = 
         Begin Table = "hx_td_adminuser"
            Begin Extent = 
               Top = 6
               Left = 38
               Bottom = 210
               Right = 190
            End
            DisplayFlags = 280
            TopColumn = 8
         End
         Begin Table = "hx_td_department"
            Begin Extent = 
               Top = 6
               Left = 228
               Bottom = 245
               Right = 396
            End
            DisplayFlags = 280
            TopColumn = 0
         End
      End
   End
   Begin SQLPane = 
   End
   Begin DataPane = 
      Begin ParameterDefaults = ""
      End
      Begin ColumnWidths = 9
         Width = 284
         Width = 1500
         Width = 1500
         Width = 1500
         Width = 1500
         Width = 1500
         Width = 1500
         Width = 1500
         Width = 1500
      End
   End
   Begin CriteriaPane = 
      Begin ColumnWidths = 11
         Column = 1440
         Alias = 900
         Table = 1170
         Output = 720
         Append = 1400
         NewValue = 1170
         SortType = 1350
         SortOrder = 1410
         GroupBy = 1350
         Filter = 1350
         Or = 1350
         Or = 1350
         Or = 1350
      End
   End
End
' , @level0type=N'SCHEMA',@level0name=N'dbo', @level1type=N'VIEW',@level1name=N'v_adminuser_department'
GO
EXEC sys.sp_addextendedproperty @name=N'MS_DiagramPaneCount', @value=1 , @level0type=N'SCHEMA',@level0name=N'dbo', @level1type=N'VIEW',@level1name=N'v_adminuser_department'
GO
/****** Object:  View [dbo].[v_admin_role_menu]    Script Date: 09/27/2016 10:30:13 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE VIEW [dbo].[v_admin_role_menu]
AS
SELECT     dbo.hx_td_menu.menu_id, dbo.hx_td_menu.menu_name, dbo.hx_td_menu.parentid, dbo.hx_td_menu.rootid, dbo.hx_td_menu.depath, dbo.hx_td_admin_role.department_id, 
                      dbo.hx_td_admin_role.menu_id AS Expr1, dbo.hx_td_admin_role.isread, dbo.hx_td_admin_role.isadd, dbo.hx_td_admin_role.isedit, dbo.hx_td_admin_role.isdelete, 
                      dbo.hx_td_admin_role.adminuserid, dbo.hx_td_admin_role.id, dbo.hx_td_menu.path1, dbo.hx_td_menu.path2, dbo.hx_td_menu.path3, dbo.hx_td_menu.path4
FROM         dbo.hx_td_menu INNER JOIN
                      dbo.hx_td_admin_role ON dbo.hx_td_menu.menu_id = dbo.hx_td_admin_role.menu_id
GO
EXEC sys.sp_addextendedproperty @name=N'MS_DiagramPane1', @value=N'[0E232FF0-B466-11cf-A24F-00AA00A3EFFF, 1.00]
Begin DesignProperties = 
   Begin PaneConfigurations = 
      Begin PaneConfiguration = 0
         NumPanes = 4
         Configuration = "(H (1[40] 4[20] 2[20] 3) )"
      End
      Begin PaneConfiguration = 1
         NumPanes = 3
         Configuration = "(H (1 [50] 4 [25] 3))"
      End
      Begin PaneConfiguration = 2
         NumPanes = 3
         Configuration = "(H (1 [50] 2 [25] 3))"
      End
      Begin PaneConfiguration = 3
         NumPanes = 3
         Configuration = "(H (4 [30] 2 [40] 3))"
      End
      Begin PaneConfiguration = 4
         NumPanes = 2
         Configuration = "(H (1 [56] 3))"
      End
      Begin PaneConfiguration = 5
         NumPanes = 2
         Configuration = "(H (2 [66] 3))"
      End
      Begin PaneConfiguration = 6
         NumPanes = 2
         Configuration = "(H (4 [50] 3))"
      End
      Begin PaneConfiguration = 7
         NumPanes = 1
         Configuration = "(V (3))"
      End
      Begin PaneConfiguration = 8
         NumPanes = 3
         Configuration = "(H (1[56] 4[18] 2) )"
      End
      Begin PaneConfiguration = 9
         NumPanes = 2
         Configuration = "(H (1 [75] 4))"
      End
      Begin PaneConfiguration = 10
         NumPanes = 2
         Configuration = "(H (1[66] 2) )"
      End
      Begin PaneConfiguration = 11
         NumPanes = 2
         Configuration = "(H (4 [60] 2))"
      End
      Begin PaneConfiguration = 12
         NumPanes = 1
         Configuration = "(H (1) )"
      End
      Begin PaneConfiguration = 13
         NumPanes = 1
         Configuration = "(V (4))"
      End
      Begin PaneConfiguration = 14
         NumPanes = 1
         Configuration = "(V (2))"
      End
      ActivePaneConfig = 0
   End
   Begin DiagramPane = 
      Begin Origin = 
         Top = 0
         Left = 0
      End
      Begin Tables = 
         Begin Table = "td_menu"
            Begin Extent = 
               Top = 6
               Left = 38
               Bottom = 200
               Right = 176
            End
            DisplayFlags = 280
            TopColumn = 6
         End
         Begin Table = "td_admin_role"
            Begin Extent = 
               Top = 6
               Left = 214
               Bottom = 195
               Right = 364
            End
            DisplayFlags = 280
            TopColumn = 0
         End
      End
   End
   Begin SQLPane = 
   End
   Begin DataPane = 
      Begin ParameterDefaults = ""
      End
   End
   Begin CriteriaPane = 
      Begin ColumnWidths = 11
         Column = 1440
         Alias = 900
         Table = 1170
         Output = 720
         Append = 1400
         NewValue = 1170
         SortType = 1350
         SortOrder = 1410
         GroupBy = 1350
         Filter = 1350
         Or = 1350
         Or = 1350
         Or = 1350
      End
   End
End
' , @level0type=N'SCHEMA',@level0name=N'dbo', @level1type=N'VIEW',@level1name=N'v_admin_role_menu'
GO
EXEC sys.sp_addextendedproperty @name=N'MS_DiagramPaneCount', @value=1 , @level0type=N'SCHEMA',@level0name=N'dbo', @level1type=N'VIEW',@level1name=N'v_admin_role_menu'
GO
/****** Object:  View [dbo].[V_AD_type]    Script Date: 09/27/2016 10:30:13 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE VIEW [dbo].[V_AD_type]
AS
SELECT     dbo.hx_td_Ad.Adid, dbo.hx_td_Ad.AdName, dbo.hx_td_Ad.Adcreatetime, dbo.hx_td_Ad.AdState, dbo.hx_td_Ad.AdTypeId, dbo.hx_td_Ad.AdLink, dbo.hx_td_Ad.AdPath, 
                      dbo.hx_td_web_Ad_type.AdtypeName
FROM         dbo.hx_td_Ad INNER JOIN
                      dbo.hx_td_web_Ad_type ON dbo.hx_td_Ad.AdTypeId = dbo.hx_td_web_Ad_type.AdTypeId
GO
EXEC sys.sp_addextendedproperty @name=N'MS_DiagramPane1', @value=N'[0E232FF0-B466-11cf-A24F-00AA00A3EFFF, 1.00]
Begin DesignProperties = 
   Begin PaneConfigurations = 
      Begin PaneConfiguration = 0
         NumPanes = 4
         Configuration = "(H (1[41] 4[21] 2[16] 3) )"
      End
      Begin PaneConfiguration = 1
         NumPanes = 3
         Configuration = "(H (1 [50] 4 [25] 3))"
      End
      Begin PaneConfiguration = 2
         NumPanes = 3
         Configuration = "(H (1 [50] 2 [25] 3))"
      End
      Begin PaneConfiguration = 3
         NumPanes = 3
         Configuration = "(H (4 [30] 2 [40] 3))"
      End
      Begin PaneConfiguration = 4
         NumPanes = 2
         Configuration = "(H (1 [56] 3))"
      End
      Begin PaneConfiguration = 5
         NumPanes = 2
         Configuration = "(H (2 [66] 3))"
      End
      Begin PaneConfiguration = 6
         NumPanes = 2
         Configuration = "(H (4 [50] 3))"
      End
      Begin PaneConfiguration = 7
         NumPanes = 1
         Configuration = "(V (3))"
      End
      Begin PaneConfiguration = 8
         NumPanes = 3
         Configuration = "(H (1[56] 4[18] 2) )"
      End
      Begin PaneConfiguration = 9
         NumPanes = 2
         Configuration = "(H (1 [75] 4))"
      End
      Begin PaneConfiguration = 10
         NumPanes = 2
         Configuration = "(H (1[66] 2) )"
      End
      Begin PaneConfiguration = 11
         NumPanes = 2
         Configuration = "(H (4 [60] 2))"
      End
      Begin PaneConfiguration = 12
         NumPanes = 1
         Configuration = "(H (1) )"
      End
      Begin PaneConfiguration = 13
         NumPanes = 1
         Configuration = "(V (4))"
      End
      Begin PaneConfiguration = 14
         NumPanes = 1
         Configuration = "(V (2))"
      End
      ActivePaneConfig = 0
   End
   Begin DiagramPane = 
      Begin Origin = 
         Top = 0
         Left = 0
      End
      Begin Tables = 
         Begin Table = "hx_td_Ad"
            Begin Extent = 
               Top = 6
               Left = 38
               Bottom = 174
               Right = 182
            End
            DisplayFlags = 280
            TopColumn = 0
         End
         Begin Table = "hx_td_web_Ad_type"
            Begin Extent = 
               Top = 6
               Left = 220
               Bottom = 99
               Right = 362
            End
            DisplayFlags = 280
            TopColumn = 0
         End
      End
   End
   Begin SQLPane = 
   End
   Begin DataPane = 
      Begin ParameterDefaults = ""
      End
      Begin ColumnWidths = 9
         Width = 284
         Width = 1500
         Width = 1500
         Width = 1440
         Width = 1500
         Width = 1500
         Width = 1500
         Width = 1500
         Width = 1500
      End
   End
   Begin CriteriaPane = 
      Begin ColumnWidths = 11
         Column = 1440
         Alias = 900
         Table = 1170
         Output = 720
         Append = 1400
         NewValue = 1170
         SortType = 1350
         SortOrder = 1410
         GroupBy = 1350
         Filter = 1350
         Or = 1350
         Or = 1350
         Or = 1350
      End
   End
End
' , @level0type=N'SCHEMA',@level0name=N'dbo', @level1type=N'VIEW',@level1name=N'V_AD_type'
GO
EXEC sys.sp_addextendedproperty @name=N'MS_DiagramPaneCount', @value=1 , @level0type=N'SCHEMA',@level0name=N'dbo', @level1type=N'VIEW',@level1name=N'V_AD_type'
GO
/****** Object:  View [dbo].[V_bonus_account_water]    Script Date: 09/27/2016 10:30:13 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE VIEW [dbo].[V_bonus_account_water]
AS
SELECT     dbo.bonus_account_water.account_water_id, dbo.bonus_account_water.bonus_account_id, dbo.bonus_account_water.membertable_registerid, 
                      dbo.bonus_account_water.income, dbo.bonus_account_water.expenditure, dbo.bonus_account_water.time_of_occurrence, dbo.bonus_account_water.reward_balance, 
                      dbo.bonus_account_water.award_description, dbo.bonus_account_water.water_type, dbo.bonus_account.start_date, dbo.bonus_account.end_date, 
                      dbo.bonus_account.act_state, dbo.bonus_account.activity_schedule_name, dbo.bonus_account.reward_state
FROM         dbo.bonus_account INNER JOIN
                      dbo.bonus_account_water ON dbo.bonus_account.bonus_account_id = dbo.bonus_account_water.bonus_account_id
GO
EXEC sys.sp_addextendedproperty @name=N'MS_DiagramPane1', @value=N'[0E232FF0-B466-11cf-A24F-00AA00A3EFFF, 1.00]
Begin DesignProperties = 
   Begin PaneConfigurations = 
      Begin PaneConfiguration = 0
         NumPanes = 4
         Configuration = "(H (1[48] 4[2] 2[21] 3) )"
      End
      Begin PaneConfiguration = 1
         NumPanes = 3
         Configuration = "(H (1 [50] 4 [25] 3))"
      End
      Begin PaneConfiguration = 2
         NumPanes = 3
         Configuration = "(H (1 [50] 2 [25] 3))"
      End
      Begin PaneConfiguration = 3
         NumPanes = 3
         Configuration = "(H (4 [30] 2 [40] 3))"
      End
      Begin PaneConfiguration = 4
         NumPanes = 2
         Configuration = "(H (1 [56] 3))"
      End
      Begin PaneConfiguration = 5
         NumPanes = 2
         Configuration = "(H (2 [66] 3))"
      End
      Begin PaneConfiguration = 6
         NumPanes = 2
         Configuration = "(H (4 [50] 3))"
      End
      Begin PaneConfiguration = 7
         NumPanes = 1
         Configuration = "(V (3))"
      End
      Begin PaneConfiguration = 8
         NumPanes = 3
         Configuration = "(H (1[56] 4[18] 2) )"
      End
      Begin PaneConfiguration = 9
         NumPanes = 2
         Configuration = "(H (1 [75] 4))"
      End
      Begin PaneConfiguration = 10
         NumPanes = 2
         Configuration = "(H (1[66] 2) )"
      End
      Begin PaneConfiguration = 11
         NumPanes = 2
         Configuration = "(H (4 [60] 2))"
      End
      Begin PaneConfiguration = 12
         NumPanes = 1
         Configuration = "(H (1) )"
      End
      Begin PaneConfiguration = 13
         NumPanes = 1
         Configuration = "(V (4))"
      End
      Begin PaneConfiguration = 14
         NumPanes = 1
         Configuration = "(V (2))"
      End
      ActivePaneConfig = 0
   End
   Begin DiagramPane = 
      Begin Origin = 
         Top = 0
         Left = 0
      End
      Begin Tables = 
         Begin Table = "bonus_account"
            Begin Extent = 
               Top = 6
               Left = 38
               Bottom = 174
               Right = 233
            End
            DisplayFlags = 280
            TopColumn = 3
         End
         Begin Table = "bonus_account_water"
            Begin Extent = 
               Top = 6
               Left = 271
               Bottom = 174
               Right = 464
            End
            DisplayFlags = 280
            TopColumn = 1
         End
      End
   End
   Begin SQLPane = 
   End
   Begin DataPane = 
      Begin ParameterDefaults = ""
      End
      Begin ColumnWidths = 9
         Width = 284
         Width = 1500
         Width = 1500
         Width = 1500
         Width = 1500
         Width = 1500
         Width = 1500
         Width = 1500
         Width = 1500
      End
   End
   Begin CriteriaPane = 
      Begin ColumnWidths = 11
         Column = 1440
         Alias = 900
         Table = 1170
         Output = 720
         Append = 1400
         NewValue = 1170
         SortType = 1350
         SortOrder = 1410
         GroupBy = 1350
         Filter = 1350
         Or = 1350
         Or = 1350
         Or = 1350
      End
   End
End
' , @level0type=N'SCHEMA',@level0name=N'dbo', @level1type=N'VIEW',@level1name=N'V_bonus_account_water'
GO
EXEC sys.sp_addextendedproperty @name=N'MS_DiagramPaneCount', @value=1 , @level0type=N'SCHEMA',@level0name=N'dbo', @level1type=N'VIEW',@level1name=N'V_bonus_account_water'
GO
/****** Object:  Default [DF_ActivityLogs_UserId]    Script Date: 09/27/2016 10:30:11 ******/
ALTER TABLE [dbo].[ActivityLogs] ADD  CONSTRAINT [DF_ActivityLogs_UserId]  DEFAULT ((0)) FOR [UserId]
GO
/****** Object:  Default [DF_ActivityLogs_ActivityId]    Script Date: 09/27/2016 10:30:11 ******/
ALTER TABLE [dbo].[ActivityLogs] ADD  CONSTRAINT [DF_ActivityLogs_ActivityId]  DEFAULT ((0)) FOR [ActivityId]
GO
/****** Object:  Default [DF__ActivityL__ActTy__32616E72]    Script Date: 09/27/2016 10:30:11 ******/
ALTER TABLE [dbo].[ActivityLogs] ADD  CONSTRAINT [DF__ActivityL__ActTy__32616E72]  DEFAULT ((0)) FOR [ActType]
GO
/****** Object:  Default [DF_ActivityLogs_ActivityName]    Script Date: 09/27/2016 10:30:11 ******/
ALTER TABLE [dbo].[ActivityLogs] ADD  CONSTRAINT [DF_ActivityLogs_ActivityName]  DEFAULT (N'‘’') FOR [ActivityName]
GO
/****** Object:  Default [DF__ActivityL__VWBeg__3449B6E4]    Script Date: 09/27/2016 10:30:11 ******/
ALTER TABLE [dbo].[ActivityLogs] ADD  CONSTRAINT [DF__ActivityL__VWBeg__3449B6E4]  DEFAULT (getdate()) FOR [UseBeginOn]
GO
/****** Object:  Default [DF__ActivityL__VWEnd__335592AB]    Script Date: 09/27/2016 10:30:11 ******/
ALTER TABLE [dbo].[ActivityLogs] ADD  CONSTRAINT [DF__ActivityL__VWEnd__335592AB]  DEFAULT (getdate()) FOR [UseEndOn]
GO
/****** Object:  Default [DF_ActivityLogs_RecordId]    Script Date: 09/27/2016 10:30:11 ******/
ALTER TABLE [dbo].[ActivityLogs] ADD  CONSTRAINT [DF_ActivityLogs_RecordId]  DEFAULT ((0)) FOR [RecordId]
GO
/****** Object:  Default [DF_ActivityLogs_TargetId]    Script Date: 09/27/2016 10:30:11 ******/
ALTER TABLE [dbo].[ActivityLogs] ADD  CONSTRAINT [DF_ActivityLogs_TargetId]  DEFAULT ((0)) FOR [TargetId]
GO
/****** Object:  Default [DF_ActivityLogs_UsedRecordId]    Script Date: 09/27/2016 10:30:11 ******/
ALTER TABLE [dbo].[ActivityLogs] ADD  CONSTRAINT [DF_ActivityLogs_UsedRecordId]  DEFAULT ((0)) FOR [UsedRecordId]
GO
/****** Object:  Default [DF_ActivityLogs_UsedTargetId]    Script Date: 09/27/2016 10:30:11 ******/
ALTER TABLE [dbo].[ActivityLogs] ADD  CONSTRAINT [DF_ActivityLogs_UsedTargetId]  DEFAULT ((0)) FOR [UsedTargetId]
GO
/****** Object:  Default [DF__ActivityL__VWAmo__353DDB1D]    Script Date: 09/27/2016 10:30:11 ******/
ALTER TABLE [dbo].[ActivityLogs] ADD  CONSTRAINT [DF__ActivityL__VWAmo__353DDB1D]  DEFAULT ((0)) FOR [AddRate]
GO
/****** Object:  Default [DF_ActivityLogs_UseStatus]    Script Date: 09/27/2016 10:30:11 ******/
ALTER TABLE [dbo].[ActivityLogs] ADD  CONSTRAINT [DF_ActivityLogs_UseStatus]  DEFAULT ((0)) FOR [UseStatus]
GO
/****** Object:  Default [DF__ActivityL__Creat__3631FF56]    Script Date: 09/27/2016 10:30:11 ******/
ALTER TABLE [dbo].[ActivityLogs] ADD  CONSTRAINT [DF__ActivityL__Creat__3631FF56]  DEFAULT (getdate()) FOR [CreateOn]
GO
/****** Object:  Default [DF_Statistics_Member_RegistCount]    Script Date: 09/27/2016 10:30:11 ******/
ALTER TABLE [dbo].[Statistics_Member] ADD  CONSTRAINT [DF_Statistics_Member_RegistCount]  DEFAULT ((0)) FOR [RegistCount]
GO
/****** Object:  Default [DF_Statistics_Member_RealNameCount]    Script Date: 09/27/2016 10:30:11 ******/
ALTER TABLE [dbo].[Statistics_Member] ADD  CONSTRAINT [DF_Statistics_Member_RealNameCount]  DEFAULT ((0)) FOR [RealNameCount]
GO
/****** Object:  Default [DF_Statistics_Member_InvestCount]    Script Date: 09/27/2016 10:30:11 ******/
ALTER TABLE [dbo].[Statistics_Member] ADD  CONSTRAINT [DF_Statistics_Member_InvestCount]  DEFAULT ((0)) FOR [InvestCount]
GO
/****** Object:  Default [DF_Statistics_Member_IsFinish]    Script Date: 09/27/2016 10:30:11 ******/
ALTER TABLE [dbo].[Statistics_Member] ADD  CONSTRAINT [DF_Statistics_Member_IsFinish]  DEFAULT ((0)) FOR [IsFinish]
GO
/****** Object:  Default [DF_Statistics_Member_UpdatedOn]    Script Date: 09/27/2016 10:30:11 ******/
ALTER TABLE [dbo].[Statistics_Member] ADD  CONSTRAINT [DF_Statistics_Member_UpdatedOn]  DEFAULT (getdate()) FOR [UpdatedOn]
GO
/****** Object:  Default [DF_Statistics_Member_CreatedOn]    Script Date: 09/27/2016 10:30:11 ******/
ALTER TABLE [dbo].[Statistics_Member] ADD  CONSTRAINT [DF_Statistics_Member_CreatedOn]  DEFAULT (getdate()) FOR [CreatedOn]
GO
/****** Object:  Default [DF_hx_borrowing_target_loan_number]    Script Date: 09/27/2016 10:30:11 ******/
ALTER TABLE [dbo].[hx_borrowing_target] ADD  CONSTRAINT [DF_hx_borrowing_target_loan_number]  DEFAULT ((0.00)) FOR [loan_number]
GO
/****** Object:  Default [DF_hx_borrowing_target_annual_interest_rate]    Script Date: 09/27/2016 10:30:11 ******/
ALTER TABLE [dbo].[hx_borrowing_target] ADD  CONSTRAINT [DF_hx_borrowing_target_annual_interest_rate]  DEFAULT ((0.00)) FOR [annual_interest_rate]
GO
/****** Object:  Default [DF_hx_borrowing_target_borrowing_balance]    Script Date: 09/27/2016 10:30:11 ******/
ALTER TABLE [dbo].[hx_borrowing_target] ADD  CONSTRAINT [DF_hx_borrowing_target_borrowing_balance]  DEFAULT ((0.00)) FOR [borrowing_balance]
GO
/****** Object:  Default [DF_hx_borrowing_target_life_of_loan]    Script Date: 09/27/2016 10:30:11 ******/
ALTER TABLE [dbo].[hx_borrowing_target] ADD  CONSTRAINT [DF_hx_borrowing_target_life_of_loan]  DEFAULT ((0)) FOR [life_of_loan]
GO
/****** Object:  Default [DF_hx_borrowing_target_unit_day]    Script Date: 09/27/2016 10:30:11 ******/
ALTER TABLE [dbo].[hx_borrowing_target] ADD  CONSTRAINT [DF_hx_borrowing_target_unit_day]  DEFAULT ((0)) FOR [unit_day]
GO
/****** Object:  Default [DF_hx_borrowing_target_minimum]    Script Date: 09/27/2016 10:30:11 ******/
ALTER TABLE [dbo].[hx_borrowing_target] ADD  CONSTRAINT [DF_hx_borrowing_target_minimum]  DEFAULT ((0.00)) FOR [minimum]
GO
/****** Object:  Default [DF_hx_borrowing_target_maxmum]    Script Date: 09/27/2016 10:30:11 ******/
ALTER TABLE [dbo].[hx_borrowing_target] ADD  CONSTRAINT [DF_hx_borrowing_target_maxmum]  DEFAULT ((0.00)) FOR [maxmum]
GO
/****** Object:  Default [DF_hx_borrowing_target_companyid]    Script Date: 09/27/2016 10:30:11 ******/
ALTER TABLE [dbo].[hx_borrowing_target] ADD  CONSTRAINT [DF_hx_borrowing_target_companyid]  DEFAULT ((0)) FOR [companyid]
GO
/****** Object:  Default [DF_hx_borrowing_target_guarantee_way_id]    Script Date: 09/27/2016 10:30:11 ******/
ALTER TABLE [dbo].[hx_borrowing_target] ADD  CONSTRAINT [DF_hx_borrowing_target_guarantee_way_id]  DEFAULT ((0)) FOR [guarantee_way_id]
GO
/****** Object:  Default [DF_hx_borrowing_target_payment_options]    Script Date: 09/27/2016 10:30:11 ******/
ALTER TABLE [dbo].[hx_borrowing_target] ADD  CONSTRAINT [DF_hx_borrowing_target_payment_options]  DEFAULT ((0)) FOR [payment_options]
GO
/****** Object:  Default [DF_hx_borrowing_target_start_time]    Script Date: 09/27/2016 10:30:11 ******/
ALTER TABLE [dbo].[hx_borrowing_target] ADD  CONSTRAINT [DF_hx_borrowing_target_start_time]  DEFAULT (getdate()) FOR [start_time]
GO
/****** Object:  Default [DF_hx_borrowing_target_service_charge]    Script Date: 09/27/2016 10:30:11 ******/
ALTER TABLE [dbo].[hx_borrowing_target] ADD  CONSTRAINT [DF_hx_borrowing_target_service_charge]  DEFAULT ((0.00)) FOR [service_charge]
GO
/****** Object:  Default [DF_hx_borrowing_target_loan_management_fee]    Script Date: 09/27/2016 10:30:11 ******/
ALTER TABLE [dbo].[hx_borrowing_target] ADD  CONSTRAINT [DF_hx_borrowing_target_loan_management_fee]  DEFAULT ((0.00)) FOR [loan_management_fee]
GO
/****** Object:  Default [DF_hx_borrowing_target_investors_management_fee]    Script Date: 09/27/2016 10:30:11 ******/
ALTER TABLE [dbo].[hx_borrowing_target] ADD  CONSTRAINT [DF_hx_borrowing_target_investors_management_fee]  DEFAULT ((0.00)) FOR [investors_management_fee]
GO
/****** Object:  Default [DF_hx_borrowing_target_ordinary_overdue_management_fees]    Script Date: 09/27/2016 10:30:11 ******/
ALTER TABLE [dbo].[hx_borrowing_target] ADD  CONSTRAINT [DF_hx_borrowing_target_ordinary_overdue_management_fees]  DEFAULT ((0.00)) FOR [ordinary_overdue_management_fees]
GO
/****** Object:  Default [DF_hx_borrowing_target_seriously_overdue_management_fees]    Script Date: 09/27/2016 10:30:11 ******/
ALTER TABLE [dbo].[hx_borrowing_target] ADD  CONSTRAINT [DF_hx_borrowing_target_seriously_overdue_management_fees]  DEFAULT ((0.00)) FOR [seriously_overdue_management_fees]
GO
/****** Object:  Default [DF_hx_borrowing_target_ordinary_overdue_penalty]    Script Date: 09/27/2016 10:30:11 ******/
ALTER TABLE [dbo].[hx_borrowing_target] ADD  CONSTRAINT [DF_hx_borrowing_target_ordinary_overdue_penalty]  DEFAULT ((0.00)) FOR [ordinary_overdue_penalty]
GO
/****** Object:  Default [DF_hx_borrowing_target_seriously_overdue_penalty]    Script Date: 09/27/2016 10:30:11 ******/
ALTER TABLE [dbo].[hx_borrowing_target] ADD  CONSTRAINT [DF_hx_borrowing_target_seriously_overdue_penalty]  DEFAULT ((0.00)) FOR [seriously_overdue_penalty]
GO
/****** Object:  Default [DF_hx_borrowing_target_transfer_Expenses]    Script Date: 09/27/2016 10:30:11 ******/
ALTER TABLE [dbo].[hx_borrowing_target] ADD  CONSTRAINT [DF_hx_borrowing_target_transfer_Expenses]  DEFAULT ((0.00)) FOR [transfer_Expenses]
GO
/****** Object:  Default [DF_hx_borrowing_target_fundraising_amount]    Script Date: 09/27/2016 10:30:11 ******/
ALTER TABLE [dbo].[hx_borrowing_target] ADD  CONSTRAINT [DF_hx_borrowing_target_fundraising_amount]  DEFAULT ((0.00)) FOR [fundraising_amount]
GO
/****** Object:  Default [DF_hx_borrowing_target_tender_state]    Script Date: 09/27/2016 10:30:11 ******/
ALTER TABLE [dbo].[hx_borrowing_target] ADD  CONSTRAINT [DF_hx_borrowing_target_tender_state]  DEFAULT ((-1)) FOR [tender_state]
GO
/****** Object:  Default [DF_hx_borrowing_target_full_scale_loan]    Script Date: 09/27/2016 10:30:11 ******/
ALTER TABLE [dbo].[hx_borrowing_target] ADD  CONSTRAINT [DF_hx_borrowing_target_full_scale_loan]  DEFAULT ((0)) FOR [full_scale_loan]
GO
/****** Object:  Default [DF_hx_borrowing_target_flow_return]    Script Date: 09/27/2016 10:30:11 ******/
ALTER TABLE [dbo].[hx_borrowing_target] ADD  CONSTRAINT [DF_hx_borrowing_target_flow_return]  DEFAULT ((0)) FOR [flow_return]
GO
/****** Object:  Default [DF_hx_borrowing_target_recommend]    Script Date: 09/27/2016 10:30:11 ******/
ALTER TABLE [dbo].[hx_borrowing_target] ADD  CONSTRAINT [DF_hx_borrowing_target_recommend]  DEFAULT ((0)) FOR [recommend]
GO
/****** Object:  Default [DF_hx_borrowing_target_sys_time]    Script Date: 09/27/2016 10:30:11 ******/
ALTER TABLE [dbo].[hx_borrowing_target] ADD  CONSTRAINT [DF_hx_borrowing_target_sys_time]  DEFAULT (getdate()) FOR [sys_time]
GO
/****** Object:  Default [DF_hx_borrowing_target_repaymentperiods]    Script Date: 09/27/2016 10:30:11 ******/
ALTER TABLE [dbo].[hx_borrowing_target] ADD  CONSTRAINT [DF_hx_borrowing_target_repaymentperiods]  DEFAULT ((0)) FOR [repaymentperiods]
GO
/****** Object:  Default [DF_hx_borrowing_target_guarantee_fee]    Script Date: 09/27/2016 10:30:11 ******/
ALTER TABLE [dbo].[hx_borrowing_target] ADD  CONSTRAINT [DF_hx_borrowing_target_guarantee_fee]  DEFAULT ((0.00)) FOR [guarantee_fee]
GO
/****** Object:  Default [DF_hx_borrowing_target_consultingAMT]    Script Date: 09/27/2016 10:30:11 ******/
ALTER TABLE [dbo].[hx_borrowing_target] ADD  CONSTRAINT [DF_hx_borrowing_target_consultingAMT]  DEFAULT ((0.00)) FOR [consultingAMT]
GO
/****** Object:  Default [DF_hx_borrowing_target_guaranteeAMT]    Script Date: 09/27/2016 10:30:11 ******/
ALTER TABLE [dbo].[hx_borrowing_target] ADD  CONSTRAINT [DF_hx_borrowing_target_guaranteeAMT]  DEFAULT ((0.00)) FOR [guaranteeAMT]
GO
/****** Object:  Default [DF_hx_borrowing_target_B_Rates]    Script Date: 09/27/2016 10:30:11 ******/
ALTER TABLE [dbo].[hx_borrowing_target] ADD  CONSTRAINT [DF_hx_borrowing_target_B_Rates]  DEFAULT ((0)) FOR [B_Rates]
GO
/****** Object:  Default [DF_hx_borrowing_target_H_Repayment_Amt]    Script Date: 09/27/2016 10:30:11 ******/
ALTER TABLE [dbo].[hx_borrowing_target] ADD  CONSTRAINT [DF_hx_borrowing_target_H_Repayment_Amt]  DEFAULT ((0.00)) FOR [H_Repayment_Amt]
GO
/****** Object:  Default [DF_hx_borrowing_target_IsUse]    Script Date: 09/27/2016 10:30:11 ******/
ALTER TABLE [dbo].[hx_borrowing_target] ADD  CONSTRAINT [DF_hx_borrowing_target_IsUse]  DEFAULT ((0)) FOR [IsUse]
GO
/****** Object:  Default [DF_hx_borrowing_target_indexorder]    Script Date: 09/27/2016 10:30:11 ******/
ALTER TABLE [dbo].[hx_borrowing_target] ADD  CONSTRAINT [DF_hx_borrowing_target_indexorder]  DEFAULT ((0)) FOR [indexorder]
GO
/****** Object:  Default [DF_hx_Bid_records_withoutinterest]    Script Date: 09/27/2016 10:30:11 ******/
ALTER TABLE [dbo].[hx_Bid_records] ADD  CONSTRAINT [DF_hx_Bid_records_withoutinterest]  DEFAULT ((0.00)) FOR [withoutinterest]
GO
/****** Object:  Default [DF_hx_Bid_records_haveinterest]    Script Date: 09/27/2016 10:30:11 ******/
ALTER TABLE [dbo].[hx_Bid_records] ADD  CONSTRAINT [DF_hx_Bid_records_haveinterest]  DEFAULT ((0.00)) FOR [haveinterest]
GO
/****** Object:  Default [DF_hx_Bid_records_ordstate]    Script Date: 09/27/2016 10:30:11 ******/
ALTER TABLE [dbo].[hx_Bid_records] ADD  CONSTRAINT [DF_hx_Bid_records_ordstate]  DEFAULT ((0)) FOR [ordstate]
GO
/****** Object:  Default [DF_hx_Bid_records_IsLoans]    Script Date: 09/27/2016 10:30:11 ******/
ALTER TABLE [dbo].[hx_Bid_records] ADD  CONSTRAINT [DF_hx_Bid_records_IsLoans]  DEFAULT ((0)) FOR [IsLoans]
GO
/****** Object:  Default [DF_hx_income_statement_repayment_amount]    Script Date: 09/27/2016 10:30:11 ******/
ALTER TABLE [dbo].[hx_income_statement] ADD  CONSTRAINT [DF_hx_income_statement_repayment_amount]  DEFAULT ((0.00)) FOR [repayment_amount]
GO
/****** Object:  Default [DF_hx_income_statement_Principal]    Script Date: 09/27/2016 10:30:11 ******/
ALTER TABLE [dbo].[hx_income_statement] ADD  CONSTRAINT [DF_hx_income_statement_Principal]  DEFAULT ((0.00)) FOR [Principal]
GO
/****** Object:  Default [DF_hx_income_statement_interestpayment]    Script Date: 09/27/2016 10:30:11 ******/
ALTER TABLE [dbo].[hx_income_statement] ADD  CONSTRAINT [DF_hx_income_statement_interestpayment]  DEFAULT ((0.00)) FOR [interestpayment]
GO
/****** Object:  Default [DF_hx_income_statement_interestDay]    Script Date: 09/27/2016 10:30:11 ******/
ALTER TABLE [dbo].[hx_income_statement] ADD  CONSTRAINT [DF_hx_income_statement_interestDay]  DEFAULT ((0)) FOR [interestDay]
GO
/****** Object:  Default [DF_hx_income_statement_TotalInstallments]    Script Date: 09/27/2016 10:30:11 ******/
ALTER TABLE [dbo].[hx_income_statement] ADD  CONSTRAINT [DF_hx_income_statement_TotalInstallments]  DEFAULT ((0)) FOR [TotalInstallments]
GO
/****** Object:  Default [DF_hx_income_statement_BorrFees]    Script Date: 09/27/2016 10:30:11 ******/
ALTER TABLE [dbo].[hx_income_statement] ADD  CONSTRAINT [DF_hx_income_statement_BorrFees]  DEFAULT ((0.00)) FOR [BorrFees]
GO
/****** Object:  Default [DF_hx_income_statement_InveFess]    Script Date: 09/27/2016 10:30:11 ******/
ALTER TABLE [dbo].[hx_income_statement] ADD  CONSTRAINT [DF_hx_income_statement_InveFess]  DEFAULT ((0.00)) FOR [InveFess]
GO
/****** Object:  Default [DF_Contract_management_contract_type]    Script Date: 09/27/2016 10:30:12 ******/
ALTER TABLE [dbo].[Contract_management] ADD  CONSTRAINT [DF_Contract_management_contract_type]  DEFAULT ((0)) FOR [contract_type]
GO
/****** Object:  Default [DF_hx_member_table_istransactionpassword]    Script Date: 09/27/2016 10:30:12 ******/
ALTER TABLE [dbo].[hx_member_table] ADD  CONSTRAINT [DF_hx_member_table_istransactionpassword]  DEFAULT ((0)) FOR [istransactionpassword]
GO
/****** Object:  Default [DF_hx_member_table_ismobile]    Script Date: 09/27/2016 10:30:12 ******/
ALTER TABLE [dbo].[hx_member_table] ADD  CONSTRAINT [DF_hx_member_table_ismobile]  DEFAULT ((0)) FOR [ismobile]
GO
/****** Object:  Default [DF_hx_member_table_isrealname]    Script Date: 09/27/2016 10:30:12 ******/
ALTER TABLE [dbo].[hx_member_table] ADD  CONSTRAINT [DF_hx_member_table_isrealname]  DEFAULT ((0)) FOR [isrealname]
GO
/****** Object:  Default [DF_hx_member_table_isbankcard]    Script Date: 09/27/2016 10:30:12 ******/
ALTER TABLE [dbo].[hx_member_table] ADD  CONSTRAINT [DF_hx_member_table_isbankcard]  DEFAULT ((0)) FOR [isbankcard]
GO
/****** Object:  Default [DF_hx_member_table_isemail]    Script Date: 09/27/2016 10:30:12 ******/
ALTER TABLE [dbo].[hx_member_table] ADD  CONSTRAINT [DF_hx_member_table_isemail]  DEFAULT ((0)) FOR [isemail]
GO
/****** Object:  Default [DF_hx_member_table_userstate]    Script Date: 09/27/2016 10:30:12 ******/
ALTER TABLE [dbo].[hx_member_table] ADD  CONSTRAINT [DF_hx_member_table_userstate]  DEFAULT ((0)) FOR [userstate]
GO
/****** Object:  Default [DF_hx_member_table_account_total_assets]    Script Date: 09/27/2016 10:30:12 ******/
ALTER TABLE [dbo].[hx_member_table] ADD  CONSTRAINT [DF_hx_member_table_account_total_assets]  DEFAULT ((0.00)) FOR [account_total_assets]
GO
/****** Object:  Default [DF_hx_member_table_available_balance]    Script Date: 09/27/2016 10:30:12 ******/
ALTER TABLE [dbo].[hx_member_table] ADD  CONSTRAINT [DF_hx_member_table_available_balance]  DEFAULT ((0.00)) FOR [available_balance]
GO
/****** Object:  Default [DF_hx_member_table_collect_total_amount]    Script Date: 09/27/2016 10:30:12 ******/
ALTER TABLE [dbo].[hx_member_table] ADD  CONSTRAINT [DF_hx_member_table_collect_total_amount]  DEFAULT ((0.00)) FOR [collect_total_amount]
GO
/****** Object:  Default [DF_hx_member_table_frozen_sum]    Script Date: 09/27/2016 10:30:12 ******/
ALTER TABLE [dbo].[hx_member_table] ADD  CONSTRAINT [DF_hx_member_table_frozen_sum]  DEFAULT ((0.00)) FOR [frozen_sum]
GO
/****** Object:  Default [DF_hx_member_table_open_tonto_account]    Script Date: 09/27/2016 10:30:12 ******/
ALTER TABLE [dbo].[hx_member_table] ADD  CONSTRAINT [DF_hx_member_table_open_tonto_account]  DEFAULT ((0)) FOR [open_tonto_account]
GO
/****** Object:  Default [DF_hx_member_table_usertypes]    Script Date: 09/27/2016 10:30:12 ******/
ALTER TABLE [dbo].[hx_member_table] ADD  CONSTRAINT [DF_hx_member_table_usertypes]  DEFAULT ((0)) FOR [usertypes]
GO
/****** Object:  Default [DF_hx_member_table_registration_time]    Script Date: 09/27/2016 10:30:12 ******/
ALTER TABLE [dbo].[hx_member_table] ADD  CONSTRAINT [DF_hx_member_table_registration_time]  DEFAULT (getdate()) FOR [registration_time]
GO
/****** Object:  Default [DF_hx_member_table_useridentity]    Script Date: 09/27/2016 10:30:12 ******/
ALTER TABLE [dbo].[hx_member_table] ADD  CONSTRAINT [DF_hx_member_table_useridentity]  DEFAULT ((0)) FOR [useridentity]
GO
/****** Object:  Default [DF_hx_member_table_Channelsource]    Script Date: 09/27/2016 10:30:12 ******/
ALTER TABLE [dbo].[hx_member_table] ADD  CONSTRAINT [DF_hx_member_table_Channelsource]  DEFAULT ((0)) FOR [Channelsource]
GO
/****** Object:  Default [DF_hx_td_frozen_FrozenState]    Script Date: 09/27/2016 10:30:12 ******/
ALTER TABLE [dbo].[hx_td_frozen] ADD  CONSTRAINT [DF_hx_td_frozen_FrozenState]  DEFAULT ((0)) FOR [FrozenState]
GO
/****** Object:  Default [DF__NormalAre__AreaN__1F83A428]    Script Date: 09/27/2016 10:30:13 ******/
ALTER TABLE [dbo].[NormalArea] ADD  DEFAULT ((1)) FOR [AreaNameEn]
GO
/****** Object:  Default [DF__NormalAre__AreaS__2077C861]    Script Date: 09/27/2016 10:30:13 ******/
ALTER TABLE [dbo].[NormalArea] ADD  DEFAULT ((2)) FOR [AreaShortNameEn]
GO
/****** Object:  Default [DF_hx_td_web_Ad_type_createtime]    Script Date: 09/27/2016 10:30:13 ******/
ALTER TABLE [dbo].[hx_td_web_Ad_type] ADD  CONSTRAINT [DF_hx_td_web_Ad_type_createtime]  DEFAULT (getdate()) FOR [createtime]
GO
/****** Object:  Default [DF_hx_td_Userinvitation_Invitereward]    Script Date: 09/27/2016 10:30:13 ******/
ALTER TABLE [dbo].[hx_td_Userinvitation] ADD  CONSTRAINT [DF_hx_td_Userinvitation_Invitereward]  DEFAULT ((0)) FOR [Invitereward]
GO
/****** Object:  Default [DF_hx_td_UserCash_OrdIdState]    Script Date: 09/27/2016 10:30:13 ******/
ALTER TABLE [dbo].[hx_td_UserCash] ADD  CONSTRAINT [DF_hx_td_UserCash_OrdIdState]  DEFAULT ((0)) FOR [OrdIdState]
GO
/****** Object:  Default [DF_hx_td_System_message_PubTime]    Script Date: 09/27/2016 10:30:13 ******/
ALTER TABLE [dbo].[hx_td_System_message] ADD  CONSTRAINT [DF_hx_td_System_message_PubTime]  DEFAULT (getdate()) FOR [PubTime]
GO
/****** Object:  Default [DF_hx_td_System_message_MReg]    Script Date: 09/27/2016 10:30:13 ******/
ALTER TABLE [dbo].[hx_td_System_message] ADD  CONSTRAINT [DF_hx_td_System_message_MReg]  DEFAULT ((0)) FOR [MReg]
GO
/****** Object:  Default [DF_hx_td_System_message_Mtype]    Script Date: 09/27/2016 10:30:13 ******/
ALTER TABLE [dbo].[hx_td_System_message] ADD  CONSTRAINT [DF_hx_td_System_message_Mtype]  DEFAULT ((0)) FOR [Mtype]
GO
/****** Object:  Default [DF_hx_td_SMSEmail_SEtype]    Script Date: 09/27/2016 10:30:13 ******/
ALTER TABLE [dbo].[hx_td_SMSEmail] ADD  CONSTRAINT [DF_hx_td_SMSEmail_SEtype]  DEFAULT ((0)) FOR [SEtype]
GO
/****** Object:  Default [DF_hx_td_SMS_record_smstype]    Script Date: 09/27/2016 10:30:13 ******/
ALTER TABLE [dbo].[hx_td_SMS_record] ADD  CONSTRAINT [DF_hx_td_SMS_record_smstype]  DEFAULT ((0)) FOR [smstype]
GO
/****** Object:  Default [DF_hx_td_SMS_record_sendtime]    Script Date: 09/27/2016 10:30:13 ******/
ALTER TABLE [dbo].[hx_td_SMS_record] ADD  CONSTRAINT [DF_hx_td_SMS_record_sendtime]  DEFAULT (getdate()) FOR [sendtime]
GO
/****** Object:  Default [DF_hx_td_SMS_record_hits]    Script Date: 09/27/2016 10:30:13 ******/
ALTER TABLE [dbo].[hx_td_SMS_record] ADD  CONSTRAINT [DF_hx_td_SMS_record_hits]  DEFAULT ((1)) FOR [hits]
GO
/****** Object:  Default [DF_hx_td_reviewremarks_reviewtime]    Script Date: 09/27/2016 10:30:13 ******/
ALTER TABLE [dbo].[hx_td_reviewremarks] ADD  CONSTRAINT [DF_hx_td_reviewremarks_reviewtime]  DEFAULT (getdate()) FOR [reviewtime]
GO
/****** Object:  Default [DF_hx_td_Phone_records_recordtime]    Script Date: 09/27/2016 10:30:13 ******/
ALTER TABLE [dbo].[hx_td_Phone_records] ADD  CONSTRAINT [DF_hx_td_Phone_records_recordtime]  DEFAULT (getdate()) FOR [recordtime]
GO
/****** Object:  Default [DF_hx_td_Phone_records_registerid]    Script Date: 09/27/2016 10:30:13 ******/
ALTER TABLE [dbo].[hx_td_Phone_records] ADD  CONSTRAINT [DF_hx_td_Phone_records_registerid]  DEFAULT ((0)) FOR [registerid]
GO
/****** Object:  Default [DF_hx_td_Phone_records_adminid]    Script Date: 09/27/2016 10:30:13 ******/
ALTER TABLE [dbo].[hx_td_Phone_records] ADD  CONSTRAINT [DF_hx_td_Phone_records_adminid]  DEFAULT ((0)) FOR [adminid]
GO
/****** Object:  Default [DF_hx_td_Myborrow_TimeLimit]    Script Date: 09/27/2016 10:30:13 ******/
ALTER TABLE [dbo].[hx_td_Myborrow] ADD  CONSTRAINT [DF_hx_td_Myborrow_TimeLimit]  DEFAULT ((1)) FOR [TimeLimit]
GO
/****** Object:  Default [DF_hx_td_Myborrow_Mortgage]    Script Date: 09/27/2016 10:30:13 ******/
ALTER TABLE [dbo].[hx_td_Myborrow] ADD  CONSTRAINT [DF_hx_td_Myborrow_Mortgage]  DEFAULT ((0)) FOR [Mortgage]
GO
/****** Object:  Default [DF_hx_td_Myborrow_EntryTime]    Script Date: 09/27/2016 10:30:13 ******/
ALTER TABLE [dbo].[hx_td_Myborrow] ADD  CONSTRAINT [DF_hx_td_Myborrow_EntryTime]  DEFAULT (getdate()) FOR [EntryTime]
GO
/****** Object:  Default [DF_hx_td_Myborrow_BorrType]    Script Date: 09/27/2016 10:30:13 ******/
ALTER TABLE [dbo].[hx_td_Myborrow] ADD  CONSTRAINT [DF_hx_td_Myborrow_BorrType]  DEFAULT ((0)) FOR [BorrType]
GO
/****** Object:  Default [DF_hx_td_Myborrow_BorrState]    Script Date: 09/27/2016 10:30:13 ******/
ALTER TABLE [dbo].[hx_td_Myborrow] ADD  CONSTRAINT [DF_hx_td_Myborrow_BorrState]  DEFAULT ((0)) FOR [BorrState]
GO
/****** Object:  Default [DF_LoginInfo_LoginTime]    Script Date: 09/27/2016 10:30:13 ******/
ALTER TABLE [dbo].[hx_td_LoginInfo] ADD  CONSTRAINT [DF_LoginInfo_LoginTime]  DEFAULT (getdate()) FOR [LoginTime]
GO
/****** Object:  Default [DF_LoginInfo_LoginSuccess]    Script Date: 09/27/2016 10:30:13 ******/
ALTER TABLE [dbo].[hx_td_LoginInfo] ADD  CONSTRAINT [DF_LoginInfo_LoginSuccess]  DEFAULT ((0)) FOR [LoginSuccess]
GO
/****** Object:  Default [DF_hx_td_Loan_records_targetid]    Script Date: 09/27/2016 10:30:13 ******/
ALTER TABLE [dbo].[hx_td_Loan_records] ADD  CONSTRAINT [DF_hx_td_Loan_records_targetid]  DEFAULT ((0)) FOR [targetid]
GO
/****** Object:  Default [DF_hx_td_LLpay_re_cash_OrdTime]    Script Date: 09/27/2016 10:30:13 ******/
ALTER TABLE [dbo].[hx_td_LLpay_re_cash] ADD  CONSTRAINT [DF_hx_td_LLpay_re_cash_OrdTime]  DEFAULT (getdate()) FOR [OrdTime]
GO
/****** Object:  Default [DF_hx_td_LLPay_bindCard_Bindtime]    Script Date: 09/27/2016 10:30:13 ******/
ALTER TABLE [dbo].[hx_td_LLPay_bindCard] ADD  CONSTRAINT [DF_hx_td_LLPay_bindCard_Bindtime]  DEFAULT (getdate()) FOR [Bindtime]
GO
/****** Object:  Default [DF_hx_td_LLPay_bindCard_cardstate]    Script Date: 09/27/2016 10:30:13 ******/
ALTER TABLE [dbo].[hx_td_LLPay_bindCard] ADD  CONSTRAINT [DF_hx_td_LLPay_bindCard_cardstate]  DEFAULT ((0)) FOR [cardstate]
GO
/****** Object:  Default [DF_hx_td_LL_cash_money_order]    Script Date: 09/27/2016 10:30:13 ******/
ALTER TABLE [dbo].[hx_td_LL_cash] ADD  CONSTRAINT [DF_hx_td_LL_cash_money_order]  DEFAULT ((0.00)) FOR [money_order]
GO
/****** Object:  Default [DF_hx_td_LL_cash_ordertime]    Script Date: 09/27/2016 10:30:13 ******/
ALTER TABLE [dbo].[hx_td_LL_cash] ADD  CONSTRAINT [DF_hx_td_LL_cash_ordertime]  DEFAULT (getdate()) FOR [ordertime]
GO
/****** Object:  Default [DF_td_department_child_department_id]    Script Date: 09/27/2016 10:30:13 ******/
ALTER TABLE [dbo].[hx_td_department_child] ADD  CONSTRAINT [DF_td_department_child_department_id]  DEFAULT ((0)) FOR [department_id]
GO
/****** Object:  Default [DF_td_department_child_menu_id]    Script Date: 09/27/2016 10:30:13 ******/
ALTER TABLE [dbo].[hx_td_department_child] ADD  CONSTRAINT [DF_td_department_child_menu_id]  DEFAULT ((0)) FOR [menu_id]
GO
/****** Object:  Default [DF_td_department_child_isread]    Script Date: 09/27/2016 10:30:13 ******/
ALTER TABLE [dbo].[hx_td_department_child] ADD  CONSTRAINT [DF_td_department_child_isread]  DEFAULT ((0)) FOR [isread]
GO
/****** Object:  Default [DF_td_department_child_isadd]    Script Date: 09/27/2016 10:30:13 ******/
ALTER TABLE [dbo].[hx_td_department_child] ADD  CONSTRAINT [DF_td_department_child_isadd]  DEFAULT ((0)) FOR [isadd]
GO
/****** Object:  Default [DF_td_department_child_isedit]    Script Date: 09/27/2016 10:30:13 ******/
ALTER TABLE [dbo].[hx_td_department_child] ADD  CONSTRAINT [DF_td_department_child_isedit]  DEFAULT ((0)) FOR [isedit]
GO
/****** Object:  Default [DF_td_department_child_isdelete]    Script Date: 09/27/2016 10:30:13 ******/
ALTER TABLE [dbo].[hx_td_department_child] ADD  CONSTRAINT [DF_td_department_child_isdelete]  DEFAULT ((0)) FOR [isdelete]
GO
/****** Object:  Default [DF_adminuser_state]    Script Date: 09/27/2016 10:30:13 ******/
ALTER TABLE [dbo].[hx_td_adminuser] ADD  CONSTRAINT [DF_adminuser_state]  DEFAULT ((0)) FOR [state]
GO
/****** Object:  Default [DF_adminuser_datetime]    Script Date: 09/27/2016 10:30:13 ******/
ALTER TABLE [dbo].[hx_td_adminuser] ADD  CONSTRAINT [DF_adminuser_datetime]  DEFAULT (getdate()) FOR [datetime]
GO
/****** Object:  Default [DF_adminuser_lastLoginTime]    Script Date: 09/27/2016 10:30:13 ******/
ALTER TABLE [dbo].[hx_td_adminuser] ADD  CONSTRAINT [DF_adminuser_lastLoginTime]  DEFAULT (getdate()) FOR [lastLoginTime]
GO
/****** Object:  Default [DF_adminuser_loginTimes]    Script Date: 09/27/2016 10:30:13 ******/
ALTER TABLE [dbo].[hx_td_adminuser] ADD  CONSTRAINT [DF_adminuser_loginTimes]  DEFAULT ((0)) FOR [loginTimes]
GO
/****** Object:  Default [DF_adminuser_department_id]    Script Date: 09/27/2016 10:30:13 ******/
ALTER TABLE [dbo].[hx_td_adminuser] ADD  CONSTRAINT [DF_adminuser_department_id]  DEFAULT ((0)) FOR [department_id]
GO
/****** Object:  Default [DF_adminuser_area_id]    Script Date: 09/27/2016 10:30:13 ******/
ALTER TABLE [dbo].[hx_td_adminuser] ADD  CONSTRAINT [DF_adminuser_area_id]  DEFAULT ((0)) FOR [area_id]
GO
/****** Object:  Default [DF_td_admin_role_department_id]    Script Date: 09/27/2016 10:30:13 ******/
ALTER TABLE [dbo].[hx_td_admin_role] ADD  CONSTRAINT [DF_td_admin_role_department_id]  DEFAULT ((0)) FOR [department_id]
GO
/****** Object:  Default [DF_td_admin_role_menu_id]    Script Date: 09/27/2016 10:30:13 ******/
ALTER TABLE [dbo].[hx_td_admin_role] ADD  CONSTRAINT [DF_td_admin_role_menu_id]  DEFAULT ((0)) FOR [menu_id]
GO
/****** Object:  Default [DF_td_admin_role_isread]    Script Date: 09/27/2016 10:30:13 ******/
ALTER TABLE [dbo].[hx_td_admin_role] ADD  CONSTRAINT [DF_td_admin_role_isread]  DEFAULT ((0)) FOR [isread]
GO
/****** Object:  Default [DF_td_admin_role_isadd]    Script Date: 09/27/2016 10:30:13 ******/
ALTER TABLE [dbo].[hx_td_admin_role] ADD  CONSTRAINT [DF_td_admin_role_isadd]  DEFAULT ((0)) FOR [isadd]
GO
/****** Object:  Default [DF_td_admin_role_isedit]    Script Date: 09/27/2016 10:30:13 ******/
ALTER TABLE [dbo].[hx_td_admin_role] ADD  CONSTRAINT [DF_td_admin_role_isedit]  DEFAULT ((0)) FOR [isedit]
GO
/****** Object:  Default [DF_td_admin_role_isdelete]    Script Date: 09/27/2016 10:30:13 ******/
ALTER TABLE [dbo].[hx_td_admin_role] ADD  CONSTRAINT [DF_td_admin_role_isdelete]  DEFAULT ((0)) FOR [isdelete]
GO
/****** Object:  Default [DF_td_admin_role_adminuserid]    Script Date: 09/27/2016 10:30:13 ******/
ALTER TABLE [dbo].[hx_td_admin_role] ADD  CONSTRAINT [DF_td_admin_role_adminuserid]  DEFAULT ((0)) FOR [adminuserid]
GO
/****** Object:  Default [DF_hx_td_Ad_Adcreatetime]    Script Date: 09/27/2016 10:30:13 ******/
ALTER TABLE [dbo].[hx_td_Ad] ADD  CONSTRAINT [DF_hx_td_Ad_Adcreatetime]  DEFAULT (getdate()) FOR [Adcreatetime]
GO
/****** Object:  Default [DF_hx_td_Ad_AdState]    Script Date: 09/27/2016 10:30:13 ******/
ALTER TABLE [dbo].[hx_td_Ad] ADD  CONSTRAINT [DF_hx_td_Ad_AdState]  DEFAULT ((0)) FOR [AdState]
GO
/****** Object:  Default [DF_hx_td_about_news_comm]    Script Date: 09/27/2016 10:30:13 ******/
ALTER TABLE [dbo].[hx_td_about_news] ADD  CONSTRAINT [DF_hx_td_about_news_comm]  DEFAULT ((0)) FOR [comm]
GO
/****** Object:  Default [DF_hx_td_about_news_listcomm]    Script Date: 09/27/2016 10:30:13 ******/
ALTER TABLE [dbo].[hx_td_about_news] ADD  CONSTRAINT [DF_hx_td_about_news_listcomm]  DEFAULT ((0)) FOR [listcomm]
GO
/****** Object:  Default [DF_hx_repayment_plan_fees]    Script Date: 09/27/2016 10:30:13 ******/
ALTER TABLE [dbo].[hx_repayment_plan] ADD  CONSTRAINT [DF_hx_repayment_plan_fees]  DEFAULT ((0)) FOR [fees]
GO
/****** Object:  Default [DF_hx_repayment_plan_O_penalty]    Script Date: 09/27/2016 10:30:13 ******/
ALTER TABLE [dbo].[hx_repayment_plan] ADD  CONSTRAINT [DF_hx_repayment_plan_O_penalty]  DEFAULT ((0)) FOR [O_penalty]
GO
/****** Object:  Default [DF_hx_repayment_plan_shall_repayment]    Script Date: 09/27/2016 10:30:13 ******/
ALTER TABLE [dbo].[hx_repayment_plan] ADD  CONSTRAINT [DF_hx_repayment_plan_shall_repayment]  DEFAULT ((0)) FOR [shall_repayment]
GO
/****** Object:  Default [DF_hx_repayment_plan_pla_amt_generation]    Script Date: 09/27/2016 10:30:13 ******/
ALTER TABLE [dbo].[hx_repayment_plan] ADD  CONSTRAINT [DF_hx_repayment_plan_pla_amt_generation]  DEFAULT ((0.0)) FOR [pla_amt_generation]
GO
/****** Object:  Default [DF_hx_repayment_plan_Interest_spreads]    Script Date: 09/27/2016 10:30:13 ******/
ALTER TABLE [dbo].[hx_repayment_plan] ADD  CONSTRAINT [DF_hx_repayment_plan_Interest_spreads]  DEFAULT ((0.0)) FOR [Interest_spreads]
GO
/****** Object:  Default [DF_hx_bonding_company_GuarType]    Script Date: 09/27/2016 10:30:13 ******/
ALTER TABLE [dbo].[hx_bonding_company] ADD  CONSTRAINT [DF_hx_bonding_company_GuarType]  DEFAULT ((0)) FOR [GuarType]
GO
/****** Object:  Default [DF_ActivityRewardLogs_IsDelete]    Script Date: 09/27/2016 10:30:13 ******/
ALTER TABLE [dbo].[ActivityRewardLogs] ADD  CONSTRAINT [DF_ActivityRewardLogs_IsDelete]  DEFAULT ((0)) FOR [IsDelete]
GO
/****** Object:  Default [DF_ActivityRewardLogs_CreatedOn]    Script Date: 09/27/2016 10:30:13 ******/
ALTER TABLE [dbo].[ActivityRewardLogs] ADD  CONSTRAINT [DF_ActivityRewardLogs_CreatedOn]  DEFAULT (getdate()) FOR [CreatedOn]
GO
/****** Object:  Default [DF__Activity__StartD__231F2AE2]    Script Date: 09/27/2016 10:30:13 ******/
ALTER TABLE [dbo].[Activity] ADD  CONSTRAINT [DF__Activity__StartD__231F2AE2]  DEFAULT (getdate()) FOR [StartDate]
GO
/****** Object:  Default [DF__Activity__EndDat__24134F1B]    Script Date: 09/27/2016 10:30:13 ******/
ALTER TABLE [dbo].[Activity] ADD  CONSTRAINT [DF__Activity__EndDat__24134F1B]  DEFAULT (getdate()) FOR [EndDate]
GO
/****** Object:  Default [DF_Activity_SendWay]    Script Date: 09/27/2016 10:30:13 ******/
ALTER TABLE [dbo].[Activity] ADD  CONSTRAINT [DF_Activity_SendWay]  DEFAULT ((2)) FOR [SendWay]
GO
/****** Object:  Default [DF__Activity__ActMod__25077354]    Script Date: 09/27/2016 10:30:13 ******/
ALTER TABLE [dbo].[Activity] ADD  CONSTRAINT [DF__Activity__ActMod__25077354]  DEFAULT ((1)) FOR [UserType]
GO
/****** Object:  Default [DF__Activity__VWType__25FB978D]    Script Date: 09/27/2016 10:30:13 ******/
ALTER TABLE [dbo].[Activity] ADD  CONSTRAINT [DF__Activity__VWType__25FB978D]  DEFAULT ((0)) FOR [SendCount]
GO
/****** Object:  Default [DF__Activity__UseLim__26EFBBC6]    Script Date: 09/27/2016 10:30:13 ******/
ALTER TABLE [dbo].[Activity] ADD  CONSTRAINT [DF__Activity__UseLim__26EFBBC6]  DEFAULT ((0)) FOR [AddRate]
GO
/****** Object:  Default [DF__Activity__VWBegi__28D80438]    Script Date: 09/27/2016 10:30:13 ******/
ALTER TABLE [dbo].[Activity] ADD  CONSTRAINT [DF__Activity__VWBegi__28D80438]  DEFAULT (getdate()) FOR [UseBeginOn]
GO
/****** Object:  Default [DF__Activity__VWEndD__29CC2871]    Script Date: 09/27/2016 10:30:13 ******/
ALTER TABLE [dbo].[Activity] ADD  CONSTRAINT [DF__Activity__VWEndD__29CC2871]  DEFAULT (getdate()) FOR [UseEndOn]
GO
/****** Object:  Default [DF__Activity__ActSta__2BB470E3]    Script Date: 09/27/2016 10:30:13 ******/
ALTER TABLE [dbo].[Activity] ADD  CONSTRAINT [DF__Activity__ActSta__2BB470E3]  DEFAULT ((0)) FOR [ActStatus]
GO
/****** Object:  Default [DF_Activity_GiveOther]    Script Date: 09/27/2016 10:30:13 ******/
ALTER TABLE [dbo].[Activity] ADD  CONSTRAINT [DF_Activity_GiveOther]  DEFAULT ((0)) FOR [GiveOther]
GO
/****** Object:  Default [DF__Activity__Create__2CA8951C]    Script Date: 09/27/2016 10:30:13 ******/
ALTER TABLE [dbo].[Activity] ADD  CONSTRAINT [DF__Activity__Create__2CA8951C]  DEFAULT (getdate()) FOR [CreatedOn]
GO
/****** Object:  Default [DF_Activity_IsDelete]    Script Date: 09/27/2016 10:30:13 ******/
ALTER TABLE [dbo].[Activity] ADD  CONSTRAINT [DF_Activity_IsDelete]  DEFAULT ((0)) FOR [IsDelete]
GO
/****** Object:  Default [DF_hx_contract_type_createtime]    Script Date: 09/27/2016 10:30:13 ******/
ALTER TABLE [dbo].[hx_contract_type] ADD  CONSTRAINT [DF_hx_contract_type_createtime]  DEFAULT (getdate()) FOR [createtime]
GO
/****** Object:  Default [DF_hx_Contract_template_usestate]    Script Date: 09/27/2016 10:30:13 ******/
ALTER TABLE [dbo].[hx_Contract_template] ADD  CONSTRAINT [DF_hx_Contract_template_usestate]  DEFAULT ((0)) FOR [usestate]
GO
/****** Object:  Default [DF_hx_Contract_template_cretatetime]    Script Date: 09/27/2016 10:30:13 ******/
ALTER TABLE [dbo].[hx_Contract_template] ADD  CONSTRAINT [DF_hx_Contract_template_cretatetime]  DEFAULT (getdate()) FOR [cretatetime]
GO
/****** Object:  Default [DF_hx_CashAwards_Amounts]    Script Date: 09/27/2016 10:30:13 ******/
ALTER TABLE [dbo].[hx_CashAwards] ADD  CONSTRAINT [DF_hx_CashAwards_Amounts]  DEFAULT ((0.00)) FOR [Amounts]
GO
/****** Object:  Default [DF_hx_CashAwards_AwardsTime]    Script Date: 09/27/2016 10:30:13 ******/
ALTER TABLE [dbo].[hx_CashAwards] ADD  CONSTRAINT [DF_hx_CashAwards_AwardsTime]  DEFAULT (getdate()) FOR [AwardsTime]
GO
/****** Object:  Default [DF_hx_CashAwards_OrdIdstate]    Script Date: 09/27/2016 10:30:13 ******/
ALTER TABLE [dbo].[hx_CashAwards] ADD  CONSTRAINT [DF_hx_CashAwards_OrdIdstate]  DEFAULT ((0)) FOR [OrdIdstate]
GO
/****** Object:  Default [DF_UserAddress_createdOn]    Script Date: 09/27/2016 10:30:13 ******/
ALTER TABLE [dbo].[UserAddress] ADD  CONSTRAINT [DF_UserAddress_createdOn]  DEFAULT (getdate()) FOR [createdOn]
GO
/****** Object:  Default [DF_UserAddress_updatedOn]    Script Date: 09/27/2016 10:30:13 ******/
ALTER TABLE [dbo].[UserAddress] ADD  CONSTRAINT [DF_UserAddress_updatedOn]  DEFAULT (getdate()) FOR [updatedOn]
GO
/****** Object:  Default [DF_bonus_account_act_state]    Script Date: 09/27/2016 10:30:13 ******/
ALTER TABLE [dbo].[bonus_account] ADD  CONSTRAINT [DF_bonus_account_act_state]  DEFAULT ((0)) FOR [act_state]
GO
